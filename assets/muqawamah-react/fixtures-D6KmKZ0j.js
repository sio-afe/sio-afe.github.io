import{r as e,s,j as a,c as t,R as c}from"./supabaseClient-Bdusv2SU.js";import{T as n}from"./TournamentNavbar-D2cgzQdF.js";import{F as m}from"./Footer-YZurjJeH.js";function i(){const[t,c]=e.useState([]),[i,l]=e.useState(!0),[r,d]=e.useState(1),[o]=e.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");e.useEffect(()=>{h()},[o]);const h=async()=>{try{l(!0);const{data:e,error:a}=await s.from("matches").select("\n          *,\n          home_team:teams!matches_home_team_id_fkey(id, name, crest_url),\n          away_team:teams!matches_away_team_id_fkey(id, name, crest_url)\n        ").eq("category",o).order("match_number",{ascending:!0}).order("scheduled_time",{ascending:!0});if(a)throw a;if(c(e||[]),e&&e.length>0){const s=[...new Set(e.map(e=>e.match_number).filter(Boolean))],a=e.filter(e=>"completed"===e.status).map(e=>e.match_number).sort((e,s)=>s-e)[0];if(a){const e=s.some(e=>e>a);d(e?a+1:a)}else d(s[0]||1)}}catch(e){}finally{l(!1)}},u=e.useMemo(()=>{const e={};return t.forEach(s=>{const a=s.match_number||1;e[a]||(e[a]=[]),e[a].push(s)}),e},[t]),x=e.useMemo(()=>[...new Set(t.map(e=>e.match_number).filter(Boolean))].sort((e,s)=>e-s),[t]),v=e=>e?e.length>=5?e.substring(0,5):e:"TBD";if(i)return a.jsxs(a.Fragment,{children:[a.jsx(n,{}),a.jsx("div",{className:"fixtures-loading",children:a.jsxs("div",{className:"fixtures-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading fixtures..."})]})}),a.jsx(m,{edition:"2026"})]});const j=u[r]||[];return a.jsxs(a.Fragment,{children:[a.jsx(n,{}),a.jsx("div",{className:"fixtures-page-v2",children:a.jsxs("div",{className:"fixtures-container-v2",children:[a.jsxs("div",{className:"fixtures-header-v2",children:[a.jsx("h1",{children:"Fixtures & Results"}),a.jsx("hr",{className:"fixtures-divider"})]}),x.length>0&&a.jsx("div",{className:"matchday-tabs-v2",children:x.map(e=>a.jsx("button",{className:"matchday-tab-v2 "+(r===e?"active":""),onClick:()=>d(e),children:e},e))}),a.jsx("div",{className:"matches-list-v2",children:j.length>0?j.map(e=>{var s,t,c,n,m,i,l,r;const d="completed"===e.status,o=e.home_score??0,h=e.away_score??0;return a.jsxs("div",{className:"match-card-v2",children:[a.jsx("div",{className:"match-time-mobile",children:a.jsx("span",{className:"time-text",children:v(e.scheduled_time)})}),a.jsxs("div",{className:"match-row-v2",children:[a.jsx("div",{className:"match-time-desktop",children:a.jsx("span",{className:"time-text",children:v(e.scheduled_time)})}),a.jsxs("div",{className:"match-team-v2 home",children:[a.jsx("span",{className:"team-name-v2",children:(null==(s=e.home_team)?void 0:s.name)||"TBD"}),a.jsx("div",{className:"team-logo-v2",children:(null==(t=e.home_team)?void 0:t.crest_url)?a.jsx("img",{src:e.home_team.crest_url,alt:e.home_team.name}):a.jsx("span",{children:(null==(n=null==(c=e.home_team)?void 0:c.name)?void 0:n.charAt(0))||"?"})})]}),a.jsx("div",{className:"match-score-v2",children:d?a.jsxs("span",{className:"score-display",children:[o," - ",h]}):a.jsx("span",{className:"vs-display",children:"vs"})}),a.jsxs("div",{className:"match-team-v2 away",children:[a.jsx("div",{className:"team-logo-v2",children:(null==(m=e.away_team)?void 0:m.crest_url)?a.jsx("img",{src:e.away_team.crest_url,alt:e.away_team.name}):a.jsx("span",{children:(null==(l=null==(i=e.away_team)?void 0:i.name)?void 0:l.charAt(0))||"?"})}),a.jsx("span",{className:"team-name-v2",children:(null==(r=e.away_team)?void 0:r.name)||"TBD"})]}),e.venue&&a.jsx("div",{className:"match-venue-desktop",children:a.jsx("span",{children:e.venue})})]}),e.venue&&a.jsx("div",{className:"match-venue-mobile",children:a.jsx("span",{children:e.venue})})]},e.id)}):a.jsxs("div",{className:"no-matches-v2",children:[a.jsx("i",{className:"fas fa-calendar-times"}),a.jsxs("p",{children:["No fixtures scheduled for Matchday ",r]})]})})]})}),a.jsx(m,{edition:"2026"})]})}t.createRoot(document.getElementById("fixtures-root")).render(a.jsx(c.StrictMode,{children:a.jsx(i,{})}));
