import{j as a,r as s,s as e,c as l,R as i}from"./supabaseClient-ClKdzuI3.js";import{F as r}from"./Footer-CtlgMCy7.js";import{T as n}from"./TournamentNavbar-Dc8uCZ-S.js";function t({teams:s=[],onTeamClick:e}){return a.jsxs("div",{className:"team-database",children:[a.jsx("div",{className:"team-database-header",children:a.jsx("h1",{className:"team-database-title",children:"Teams"})}),a.jsx("div",{className:"teams-count",children:a.jsxs("span",{children:[s.length," teams registered"]})}),a.jsx("div",{className:"teams-grid",children:s.map((s,l)=>{var i;const r=["linear-gradient(135deg, rgba(33, 150, 243, 0.15) 0%, rgba(33, 150, 243, 0.02) 100%)","linear-gradient(135deg, rgba(156, 39, 176, 0.15) 0%, rgba(156, 39, 176, 0.02) 100%)","linear-gradient(135deg, rgba(244, 67, 54, 0.15) 0%, rgba(244, 67, 54, 0.02) 100%)","linear-gradient(135deg, rgba(76, 175, 80, 0.15) 0%, rgba(76, 175, 80, 0.02) 100%)","linear-gradient(135deg, rgba(255, 152, 0, 0.15) 0%, rgba(255, 152, 0, 0.02) 100%)","linear-gradient(135deg, rgba(158, 158, 158, 0.15) 0%, rgba(158, 158, 158, 0.02) 100%)"],n=r[l%r.length];return a.jsxs("div",{className:"team-card-db",style:{background:n},onClick:()=>e&&e(s),children:[a.jsx("div",{className:"team-logo-large",children:s.crest_url?a.jsx("img",{src:s.crest_url,alt:s.name}):a.jsx("span",{children:(null==(i=s.name)?void 0:i.charAt(0))||"?"})}),a.jsxs("div",{className:"team-info-db",children:[a.jsx("h3",{className:"team-name-db",children:s.name}),a.jsx("p",{className:"team-captain-db",children:s.captain})]})]},s.id)})}),0===s.length&&a.jsxs("div",{className:"no-teams",children:[a.jsx("i",{className:"fas fa-shield-alt"}),a.jsx("p",{children:"No teams registered yet"})]}),a.jsx("div",{className:"back-to-tournament",children:a.jsxs("a",{href:"/muqawamah/2026/",className:"back-link",children:[a.jsx("i",{className:"fas fa-arrow-left"})," Back to Tournament"]})})]})}const c={Goalkeeper:"GOALKEEPERS",Defender:"DEFENDERS",Midfielder:"MIDFIELDERS",Forward:"FORWARDS",Striker:"FORWARDS",Substitute:"SUBSTITUTES"},d={GK:"Goalkeeper",CB:"Defender",LB:"Defender",RB:"Defender",CDM:"Midfielder",CM:"Midfielder",CAM:"Midfielder",LM:"Midfielder",RM:"Midfielder",CF:"Forward",ST:"Forward",SUB:"Substitute"};function m({teamId:l,onBack:i,onNavigateToPlayer:t}){var m;const[o,h]=s.useState(null),[j,x]=s.useState([]),[p,g]=s.useState([]),[N,u]=s.useState({topScorers:[],topAssists:[]}),[v,f]=s.useState(!0);s.useEffect(()=>{l&&b()},[l]);const b=async()=>{try{const{data:a,error:s}=await e.from("teams").select("*").eq("id",l).single();if(s)throw s;if(h(a),null==a?void 0:a.category){const{data:s}=await e.from("teams").select("id, name, crest_url, played, won, drawn, lost, goals_for, goals_against, points").eq("category",a.category).order("points",{ascending:!1}).order("goals_for",{ascending:!1});if(s){const a=s.map((a,s)=>({...a,position:s+1}));g(a)}}if(null==a?void 0:a.registration_id){const{data:s}=await e.from("team_players").select("id, player_name, player_image, position, player_age").eq("team_id",a.registration_id);s&&(x(s),u({topScorers:[],topAssists:[]}))}}catch(a){}finally{f(!1)}},w=a=>d[a]||a||"Unknown";if(v)return a.jsx("div",{className:"team-detail-loading",children:a.jsxs("div",{className:"teams-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading team..."})]})});if(!o)return a.jsxs("div",{className:"team-detail-error",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"}),a.jsx("p",{children:"Team not found"}),a.jsxs("button",{onClick:i,className:"back-btn",children:[a.jsx("i",{className:"fas fa-arrow-left"})," Back to Teams"]})]});const y=(()=>{const a={};return j.forEach(s=>{const e=w(s.position),l=c[e]||"OTHERS";a[l]||(a[l]=[]),a[l].push(s)}),a})(),S=o.match_log||[];return a.jsxs(a.Fragment,{children:[a.jsx(n,{}),a.jsxs("div",{className:"team-detail",children:[a.jsxs("div",{className:"team-hero",children:[a.jsx("div",{className:"team-hero-bg"}),a.jsxs("div",{className:"team-hero-content",children:[a.jsx("div",{className:"team-crest-hero",children:o.crest_url?a.jsx("img",{src:o.crest_url,alt:o.name}):a.jsx("span",{children:(null==(m=o.name)?void 0:m.charAt(0))||"?"})}),a.jsxs("div",{className:"team-info-hero",children:[a.jsx("h1",{className:"team-name-hero",children:o.name}),a.jsxs("div",{className:"team-meta-hero",children:[a.jsx("span",{className:"meta-label",children:"Captain:"}),a.jsx("span",{className:"meta-value",children:o.captain||"TBA"})]}),o.formation&&a.jsxs("div",{className:"team-formation-hero",children:[a.jsx("i",{className:"fas fa-chess-board"}),a.jsx("span",{children:o.formation})]})]})]})]}),a.jsxs("div",{className:"team-detail-body",children:[a.jsxs("div",{className:"team-detail-main",children:[a.jsxs("div",{className:"match-log-section",children:[a.jsx("h3",{className:"section-title-italic",children:"MATCH LOG"}),S.length>0?a.jsxs("div",{className:"match-log-table",children:[a.jsxs("div",{className:"match-log-header",children:[a.jsx("span",{children:"MW"}),a.jsx("span",{children:"DATE"}),a.jsx("span",{children:"MATCH"}),a.jsx("span",{children:"SCORE"}),a.jsx("span",{children:"GF"}),a.jsx("span",{children:"GA"}),a.jsx("span",{children:"PTS"})]}),S.map((s,e)=>a.jsxs("div",{className:"match-log-row",children:[a.jsx("span",{children:s.matchweek}),a.jsx("span",{children:s.date}),a.jsxs("span",{className:"match-teams",children:[a.jsx("img",{src:s.home_logo,alt:"",className:"match-team-logo"}),a.jsx("span",{children:s.home_abbr}),a.jsx("span",{className:"vs",children:"vs"}),a.jsx("img",{src:s.away_logo,alt:"",className:"match-team-logo"}),a.jsx("span",{children:s.away_abbr})]}),a.jsx("span",{className:`match-score ${s.result}`,children:s.score}),a.jsx("span",{children:s.goals_for}),a.jsx("span",{children:s.goals_against}),a.jsx("span",{children:s.points})]},e))]}):a.jsx("div",{className:"no-matches",children:a.jsx("p",{children:"No matches played yet"})})]}),a.jsxs("div",{className:"standings-section",children:[a.jsx("h3",{className:"section-title-italic",children:"STANDINGS"}),a.jsxs("div",{className:"standings-table",children:[a.jsxs("div",{className:"standings-header",children:[a.jsx("span",{className:"col-pos",children:"#"}),a.jsx("span",{className:"col-team",children:"TEAM"}),a.jsx("span",{className:"col-pts",children:"PTS"})]}),p.map(s=>{var e;const i=s.id===l;return a.jsxs("div",{className:"standings-row "+(i?"highlighted":""),children:[a.jsx("span",{className:"col-pos",children:s.position}),a.jsx("span",{className:"col-team",children:a.jsxs("div",{className:"team-cell",children:[a.jsx("div",{className:"team-logo-small",children:s.crest_url?a.jsx("img",{src:s.crest_url,alt:s.name}):a.jsx("span",{children:(null==(e=s.name)?void 0:e.charAt(0))||"?"})}),a.jsx("span",{className:"team-name-standings",children:s.name})]})}),a.jsx("span",{className:"col-pts",children:s.points||0})]},s.id)})]})]})]}),a.jsxs("div",{className:"team-detail-sidebar",children:[a.jsx("h3",{className:"section-title",children:"SQUAD"}),a.jsx("div",{className:"squad-list",children:Object.entries(y).map(([s,e])=>a.jsxs("div",{className:"squad-group",children:[a.jsx("h4",{className:"squad-group-title",children:s}),e.map((s,e)=>a.jsxs("div",{className:"squad-row",onClick:()=>t&&t(s.id,s.player_name),children:[a.jsx("span",{className:"squad-number",children:e+1}),a.jsx("div",{className:"squad-photo",children:s.player_image?a.jsx("img",{src:s.player_image,alt:s.player_name}):a.jsx("i",{className:"fas fa-user"})}),a.jsxs("div",{className:"squad-info",children:[a.jsx("span",{className:"squad-name",children:s.player_name}),a.jsx("span",{className:"squad-position",children:w(s.position)})]})]},s.id))]},s))})]})]}),a.jsxs("div",{className:"leaderboards-section",children:[a.jsx("h2",{className:"leaderboards-title",children:"LEADERBOARDS"}),a.jsxs("div",{className:"leaderboards-grid",children:[a.jsxs("div",{className:"leaderboard-card",children:[a.jsx("h3",{className:"leaderboard-card-title",children:"TOP SCORERS"}),a.jsx("div",{className:"leaderboard-list",children:N.topScorers.length>0?N.topScorers.map((s,e)=>a.jsxs("div",{className:"leaderboard-item",onClick:()=>t&&t(s.id,s.player_name),children:[a.jsx("span",{className:"lb-rank",children:e+1}),a.jsx("div",{className:"lb-player-photo",children:s.player_image?a.jsx("img",{src:s.player_image,alt:s.player_name}):a.jsx("i",{className:"fas fa-user"})}),a.jsx("span",{className:"lb-player-name",children:s.player_name}),a.jsx("span",{className:"lb-stat",children:s.goals||0})]},s.id)):a.jsx("div",{className:"no-stats",children:"No goals scored yet"})}),a.jsxs("button",{className:"view-more-btn",children:["VIEW MORE ",a.jsx("i",{className:"fas fa-arrow-right"})]})]}),a.jsxs("div",{className:"leaderboard-card",children:[a.jsx("h3",{className:"leaderboard-card-title",children:"TOP ASSISTS"}),a.jsx("div",{className:"leaderboard-list",children:N.topAssists.length>0?N.topAssists.map((s,e)=>a.jsxs("div",{className:"leaderboard-item",onClick:()=>t&&t(s.id,s.player_name),children:[a.jsx("span",{className:"lb-rank",children:e+1}),a.jsx("div",{className:"lb-player-photo",children:s.player_image?a.jsx("img",{src:s.player_image,alt:s.player_name}):a.jsx("i",{className:"fas fa-user"})}),a.jsx("span",{className:"lb-player-name",children:s.player_name}),a.jsx("span",{className:"lb-stat",children:s.assists||0})]},s.id)):a.jsx("div",{className:"no-stats",children:"No assists yet"})}),a.jsxs("button",{className:"view-more-btn",children:["VIEW MORE ",a.jsx("i",{className:"fas fa-arrow-right"})]})]})]})]}),a.jsx("div",{className:"team-detail-footer",children:a.jsxs("button",{onClick:i,className:"back-btn",children:[a.jsx("i",{className:"fas fa-arrow-left"})," Back to Teams"]})}),a.jsx(r,{edition:"2026"})]})]})}function o(){const[l,i]=s.useState([]),[c,d]=s.useState(!0),[o,h]=s.useState(null),[j,x]=s.useState("list");s.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("team");return a?(h(a),x("detail"),d(!1)):g(),window.addEventListener("popstate",p),()=>window.removeEventListener("popstate",p)},[]);const p=()=>{const a=new URLSearchParams(window.location.search).get("team");a?(h(a),x("detail")):(x("list"),h(null))},g=async()=>{try{const{data:a,error:s}=await e.from("teams").select("id, name, crest_url, captain, category").eq("category","open-age").order("name",{ascending:!0});if(s)throw s;i(a||[])}catch(a){}finally{d(!1)}},N=()=>{window.history.pushState({},"","/muqawamah/2026/open-age/teams/"),x("list"),h(null)};return c?a.jsx("div",{className:"teams-loading",children:a.jsxs("div",{className:"teams-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading teams..."})]})}):"detail"===j&&o?a.jsx(m,{teamId:o,onBack:N,onNavigateToPlayer:(a,s)=>{window.location.href=`/muqawamah/2026/open-age/players/?player=${a}`}}):a.jsxs(a.Fragment,{children:[a.jsx(n,{}),a.jsx(t,{teams:l,onTeamClick:a=>{const s=`/muqawamah/2026/open-age/teams/?team=${a.id}`;window.history.pushState({teamId:a.id},"",s),h(a.id),x("detail"),window.scrollTo(0,0)}}),a.jsx(r,{edition:"2026"})]})}l.createRoot(document.getElementById("teams-root")).render(a.jsx(i.StrictMode,{children:a.jsx(o,{})}));
