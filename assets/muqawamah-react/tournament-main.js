import{r as s,j as a,m as e,A as t,c as i,R as n}from"./App-Dz4hA5Sj.js";function l({teams:t,category:i}){const[n,l]=s.useState(null),r=s=>s+1,d=s=>s<4?"qualification-zone":"",o=s=>s>0?`+${s}`:s,m=()=>{l(null)};return a.jsxs("div",{className:"standings-container",children:[a.jsx("div",{className:"table-wrapper",children:a.jsxs("table",{className:"standings-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"POS"}),a.jsx("th",{className:"team-column",children:"CLUB"}),a.jsx("th",{className:"mobile-hide",children:"P"}),a.jsx("th",{className:"mobile-hide",children:"W"}),a.jsx("th",{className:"mobile-hide",children:"D"}),a.jsx("th",{className:"mobile-hide",children:"L"}),a.jsx("th",{children:"GF"}),a.jsx("th",{children:"GA"}),a.jsx("th",{children:"GD"}),a.jsx("th",{className:"points-column",children:"PTS"}),a.jsx("th",{className:"form-column mobile-hide",children:"FORM"})]})}),a.jsx("tbody",{children:t.map((s,t)=>a.jsxs(e.tr,{className:d(t),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>l(s),children:[a.jsx("td",{className:"position-cell",children:a.jsx("div",{className:`position-indicator ${d(t)}`,children:r(t)})}),a.jsx("td",{className:"team-cell",children:a.jsxs("div",{className:"team-info",children:[a.jsx("img",{src:s.crest_url||"/assets/data/open-age/team-logos/default.png",alt:s.name,className:"team-crest-small",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),a.jsx("span",{className:"team-name",children:s.name})]})}),a.jsx("td",{className:"mobile-hide",children:s.played||0}),a.jsx("td",{className:"mobile-hide stat-win",children:s.won||0}),a.jsx("td",{className:"mobile-hide",children:s.drawn||0}),a.jsx("td",{className:"mobile-hide stat-loss",children:s.lost||0}),a.jsx("td",{children:s.goals_for||0}),a.jsx("td",{children:s.goals_against||0}),a.jsx("td",{className:"gd-cell "+(s.gd>0?"positive":s.gd<0?"negative":""),children:o(s.gd||0)}),a.jsx("td",{className:"points-cell",children:a.jsx("strong",{children:s.points||0})}),a.jsx("td",{className:"form-cell mobile-hide",children:c(s.form)})]},s.id))})]})}),a.jsx("div",{className:"table-legend",children:a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-indicator qualification-zone"}),a.jsx("span",{children:"Qualification to Semi-Finals"})]})}),n&&a.jsx(e.div,{className:"team-popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m,children:a.jsxs(e.div,{className:"team-popup-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:s=>s.stopPropagation(),children:[a.jsx("button",{className:"close-popup-btn",onClick:m,children:a.jsx("i",{className:"fas fa-times"})}),a.jsxs("div",{className:"popup-header",children:[a.jsx("img",{src:n.crest_url||"/assets/data/open-age/team-logos/default.png",alt:n.name,className:"popup-team-crest",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),a.jsx("h2",{children:n.name}),n.captain&&a.jsxs("p",{className:"captain-info",children:[a.jsx("i",{className:"fas fa-user-tie"}),"Captain: ",n.captain]})]}),a.jsxs("div",{className:"popup-stats",children:[a.jsxs("div",{className:"stat-row",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Played"}),a.jsx("span",{className:"stat-value",children:n.played||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Won"}),a.jsx("span",{className:"stat-value",children:n.won||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Drawn"}),a.jsx("span",{className:"stat-value",children:n.drawn||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Lost"}),a.jsx("span",{className:"stat-value",children:n.lost||0})]})]}),a.jsxs("div",{className:"stat-row",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Goals For"}),a.jsx("span",{className:"stat-value",children:n.goals_for||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Goals Against"}),a.jsx("span",{className:"stat-value",children:n.goals_against||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Goal Difference"}),a.jsx("span",{className:"stat-value "+(n.gd>0?"positive":n.gd<0?"negative":""),children:o(n.gd||0)})]}),a.jsxs("div",{className:"stat-item highlighted",children:[a.jsx("span",{className:"stat-label",children:"Points"}),a.jsx("span",{className:"stat-value",children:n.points||0})]})]})]})]})})]})}function c(s){return s?a.jsx("div",{className:"form-indicators",children:s.split("").slice(0,5).map((s,e)=>a.jsx("span",{className:`form-result ${s.toLowerCase()}`,children:s},e))}):a.jsx("span",{className:"no-form",children:"-"})}function r({fixtures:t}){const[i,n]=s.useState("all");var l;const c=(s=>{const a={};return s.forEach(s=>{const e=new Date(s.match_time).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});a[e]||(a[e]=[]),a[e].push(s)}),a})((l=t,"all"===i?l:"completed"===i?l.filter(s=>"completed"===s.status):"upcoming"===i?l.filter(s=>"completed"!==s.status):l)),r=s=>{if("completed"===s.status)return a.jsx("span",{className:"status-badge completed",children:"FT"});if("live"===s.status)return a.jsx("span",{className:"status-badge live",children:"LIVE"});{const e=new Date(s.match_time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return a.jsx("span",{className:"status-badge upcoming",children:e})}};return a.jsxs("div",{className:"fixtures-container",children:[a.jsxs("div",{className:"fixtures-filter",children:[a.jsx("button",{className:"filter-btn "+("all"===i?"active":""),onClick:()=>n("all"),children:"All Matches"}),a.jsx("button",{className:"filter-btn "+("completed"===i?"active":""),onClick:()=>n("completed"),children:"Completed"}),a.jsx("button",{className:"filter-btn "+("upcoming"===i?"active":""),onClick:()=>n("upcoming"),children:"Upcoming"})]}),a.jsx("div",{className:"fixtures-list",children:0===Object.keys(c).length?a.jsxs("div",{className:"no-fixtures",children:[a.jsx("i",{className:"fas fa-calendar-times"}),a.jsx("p",{children:"No fixtures found"})]}):Object.entries(c).map(([s,t],i)=>a.jsxs("div",{className:"fixture-date-group",children:[a.jsxs("div",{className:"fixture-date-header",children:[a.jsx("i",{className:"fas fa-calendar-day"}),a.jsx("h3",{children:s})]}),a.jsx("div",{className:"fixture-cards",children:t.map((s,t)=>{var i,n,l,c,d,o;return a.jsxs(e.div,{className:`fixture-card ${s.status}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[a.jsxs("div",{className:"fixture-header",children:[r(s),s.venue&&a.jsxs("span",{className:"fixture-venue",children:[a.jsx("i",{className:"fas fa-map-marker-alt"}),s.venue]})]}),a.jsxs("div",{className:"fixture-teams",children:[a.jsxs("div",{className:"fixture-team home",children:[a.jsx("img",{src:(null==(i=s.home_team)?void 0:i.crest_url)||"/assets/data/open-age/team-logos/default.png",alt:null==(n=s.home_team)?void 0:n.name,className:"fixture-team-crest",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),a.jsx("span",{className:"fixture-team-name",children:(null==(l=s.home_team)?void 0:l.name)||"TBD"})]}),a.jsx("div",{className:"fixture-score",children:"completed"===s.status||"live"===s.status?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"score-display "+(s.home_score>s.away_score?"winner":""),children:s.home_score||0}),a.jsx("span",{className:"score-separator",children:"-"}),a.jsx("span",{className:"score-display "+(s.away_score>s.home_score?"winner":""),children:s.away_score||0})]}):a.jsx("span",{className:"vs-text",children:"VS"})}),a.jsxs("div",{className:"fixture-team away",children:[a.jsx("span",{className:"fixture-team-name",children:(null==(c=s.away_team)?void 0:c.name)||"TBD"}),a.jsx("img",{src:(null==(d=s.away_team)?void 0:d.crest_url)||"/assets/data/open-age/team-logos/default.png",alt:null==(o=s.away_team)?void 0:o.name,className:"fixture-team-crest",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}})]})]}),"completed"===s.status&&s.winner&&a.jsx("div",{className:"fixture-footer",children:a.jsxs("span",{className:"winner-badge",children:[a.jsx("i",{className:"fas fa-trophy"}),"Winner: ",s.winner]})})]},s.id)})})]},s))})]})}function d({category:t}){const[i,n]=s.useState("scorers"),[l,c]=s.useState([]),[r,d]=s.useState([]),[o,m]=s.useState(!0);s.useEffect(()=>{h()},[t]);const h=async()=>{m(!0);try{if(!window.supabaseClient)return void m(!1);const{data:s,error:a}=await window.supabaseClient.from("match_events").select("player_name, team_id, teams(name, crest_url)").eq("category",t).eq("event_type","goal");if(a)throw a;const e={};null==s||s.forEach(s=>{const a=`${s.player_name}-${s.team_id}`;e[a]||(e[a]={player_name:s.player_name,team:s.teams,goals:0}),e[a].goals++});const i=Object.values(e).sort((s,a)=>a.goals-s.goals).slice(0,15),{data:n,error:l}=await window.supabaseClient.from("match_events").select("assist_name, team_id, teams(name, crest_url)").eq("category",t).not("assist_name","is",null);if(l)throw l;const r={};null==n||n.forEach(s=>{const a=`${s.assist_name}-${s.team_id}`;r[a]||(r[a]={player_name:s.assist_name,team:s.teams,assists:0}),r[a].assists++});const o=Object.values(r).sort((s,a)=>a.assists-s.assists).slice(0,15);c(i),d(o)}catch(s){}finally{m(!1)}},x=(s,t)=>0===s.length?a.jsxs("div",{className:"no-stats",children:[a.jsx("i",{className:"fas fa-chart-line"}),a.jsx("p",{children:"No statistics available yet"})]}):a.jsx("div",{className:"stats-list",children:s.map((s,i)=>{var n,l,c;const r="scorers"===t?s.goals:s.assists,d=0===i?"gold":1===i?"silver":2===i?"bronze":"";return a.jsxs(e.div,{className:`stat-card ${d}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*i},children:[a.jsx("div",{className:"stat-position",children:i<3?a.jsx("div",{className:"medal-icon",children:a.jsx("i",{className:`fas fa-medal ${d}`})}):a.jsx("span",{className:"position-number",children:i+1})}),a.jsxs("div",{className:"stat-player-info",children:[a.jsx("div",{className:"player-name",children:s.player_name}),a.jsxs("div",{className:"player-team",children:[a.jsx("img",{src:(null==(n=s.team)?void 0:n.crest_url)||"/assets/data/open-age/team-logos/default.png",alt:null==(l=s.team)?void 0:l.name,className:"team-crest-mini",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),a.jsx("span",{children:(null==(c=s.team)?void 0:c.name)||"Unknown"})]})]}),a.jsxs("div",{className:"stat-value",children:[a.jsx("span",{className:"value-number",children:r}),a.jsx("span",{className:"value-label",children:"scorers"===t?"Goals":"Assists"})]})]},`${s.player_name}-${i}`)})});return a.jsxs("div",{className:"statistics-container",children:[a.jsxs("div",{className:"stats-tab-selector",children:[a.jsxs("button",{className:"stats-tab-btn "+("scorers"===i?"active":""),onClick:()=>n("scorers"),children:[a.jsx("i",{className:"fas fa-futbol"}),"Top Scorers"]}),a.jsxs("button",{className:"stats-tab-btn "+("assists"===i?"active":""),onClick:()=>n("assists"),children:[a.jsx("i",{className:"fas fa-hands-helping"}),"Top Assists"]})]}),a.jsx("div",{className:"stats-content",children:o?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading statistics..."})]}):a.jsxs(a.Fragment,{children:["scorers"===i&&x(l,"scorers"),"assists"===i&&x(r,"assists")]})})]})}function o(){var i;const n=window.location.pathname.includes("/u17/")?"u17":"open-age",[c,o]=s.useState(n),[m,h]=s.useState("standings"),[x,u]=s.useState([]),[p,j]=s.useState([]),[N,g]=s.useState(!0),f=(null==(i=window.location.pathname.match(/\/muqawamah\/(\d{4})\//))?void 0:i[1])||"2025";s.useEffect(()=>{if(v(),window.supabaseClient){const s=window.supabaseClient.channel("tournament_updates").on("postgres_changes",{event:"*",schema:"public",table:"teams"},()=>v()).subscribe();return()=>s.unsubscribe()}},[c]);const v=async()=>{g(!0);try{if(!window.supabaseClient)return void g(!1);const{data:s,error:a}=await window.supabaseClient.from("teams").select("*").eq("category",c).order("points",{ascending:!1}).order("gd",{ascending:!1});if(a)throw a;const{data:e,error:t}=await window.supabaseClient.from("fixtures").select("\n          *,\n          home_team:teams!fixtures_home_team_id_fkey(id, name, crest_url),\n          away_team:teams!fixtures_away_team_id_fkey(id, name, crest_url)\n        ").eq("category",c).order("match_time",{ascending:!0});if(t)throw t;u(s||[]),j(e||[])}catch(s){}finally{g(!1)}},y=s=>{o(s);const a=`/muqawamah/${f}/${s}/`;window.history.pushState({},"",a)};return a.jsxs("div",{className:"tournament-page",children:[a.jsxs("div",{className:"tournament-header",children:[a.jsxs("a",{href:`/muqawamah/${f}/`,className:"back-button",children:[a.jsx("i",{className:"fas fa-arrow-left"}),a.jsx("span",{children:"Back to Muqawama"})]}),a.jsxs("div",{className:"tournament-title",children:[a.jsxs("h1",{children:["MUQAWAMA ",f]}),a.jsx("p",{children:"Tournament Results & Statistics"})]}),a.jsxs("div",{className:"category-selector-tournament",children:[a.jsxs("button",{className:"category-btn "+("open-age"===c?"active":""),onClick:()=>y("open-age"),children:[a.jsx("i",{className:"fas fa-users"}),"Open Age"]}),a.jsxs("button",{className:"category-btn "+("u17"===c?"active":""),onClick:()=>y("u17"),children:[a.jsx("i",{className:"fas fa-user-friends"}),"U17"]})]})]}),a.jsxs("div",{className:"tab-navigation-tournament",children:[a.jsxs("button",{className:"tab-btn "+("standings"===m?"active":""),onClick:()=>h("standings"),children:[a.jsx("i",{className:"fas fa-trophy"}),a.jsx("span",{children:"Standings"})]}),a.jsxs("button",{className:"tab-btn "+("fixtures"===m?"active":""),onClick:()=>h("fixtures"),children:[a.jsx("i",{className:"fas fa-calendar-alt"}),a.jsx("span",{children:"Fixtures & Results"})]}),a.jsxs("button",{className:"tab-btn "+("stats"===m?"active":""),onClick:()=>h("stats"),children:[a.jsx("i",{className:"fas fa-chart-bar"}),a.jsx("span",{children:"Statistics"})]})]}),a.jsx(t,{mode:"wait",children:a.jsx(e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"tournament-content",children:N?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading tournament data..."})]}):a.jsxs(a.Fragment,{children:["standings"===m&&a.jsx(l,{teams:x,category:c}),"fixtures"===m&&a.jsx(r,{fixtures:p}),"stats"===m&&a.jsx(d,{category:c})]})},`${c}-${m}`)})]})}i.createRoot(document.getElementById("tournament-root")).render(a.jsx(n.StrictMode,{children:a.jsx(o,{})}));
