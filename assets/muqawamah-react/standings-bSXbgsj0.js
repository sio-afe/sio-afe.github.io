import{r as s,s as a,j as e,c as n,R as l}from"./supabaseClient-y7L7r4ir.js";import{T as t}from"./TournamentNavbar-CJHVAkqk.js";import{F as r}from"./Footer-Cjjkr2XU.js";import{g as i,a as o}from"./tournamentUtils-svDOucmL.js";import{S as c}from"./SmartImg-mv2gJrPZ.js";import"./supabase-client-FID_-7ME.js";function d(){const[n,l]=s.useState({}),[d,g]=s.useState(null),[m,p]=s.useState(!0),[h,x]=s.useState("groups"),[u]=s.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");s.useEffect(()=>{j();const s=a.channel("standings_changes").on("postgres_changes",{event:"*",schema:"public",table:"teams"},()=>{j()}).on("postgres_changes",{event:"*",schema:"public",table:"cards"},()=>{j()}).subscribe();return()=>{s.unsubscribe()}},[]);const j=async()=>{try{const s=await i(u);g(s);const a=await o(u);l(a)}catch(s){}finally{p(!1)}},f=(s,a=null)=>e.jsxs("div",{className:"standings-table-wrapper",children:[a&&"Ungrouped"!==a&&e.jsx("div",{className:"group-header",children:e.jsxs("span",{className:"group-badge",children:["Group ",a]})}),"Ungrouped"===a&&s.length>0&&e.jsx("div",{className:"group-header ungrouped",children:e.jsx("span",{className:"group-badge",children:"Ungrouped Teams"})}),e.jsxs("table",{className:"standings-table-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"col-position",children:"#"}),e.jsx("th",{className:"col-team-full",children:"TEAM"}),e.jsx("th",{className:"col-stat",children:"P"}),e.jsx("th",{className:"col-stat",children:"W"}),e.jsx("th",{className:"col-stat",children:"D"}),e.jsx("th",{className:"col-stat",children:"L"}),e.jsx("th",{className:"col-stat hide-mobile",children:"GF"}),e.jsx("th",{className:"col-stat hide-mobile",children:"GA"}),e.jsx("th",{className:"col-stat",children:"GD"}),e.jsx("th",{className:"col-stat hide-mobile",title:"Yellow Cards",children:"YC"}),e.jsx("th",{className:"col-stat hide-mobile",title:"Red Cards",children:"RC"}),e.jsx("th",{className:"col-points",children:"PTS"})]})}),e.jsx("tbody",{children:s.map((s,a)=>{var n;const l=s.group_position||s.position||a+1,t=l===((null==d?void 0:d.teams_qualifying_per_group)||2);return e.jsxs("tr",{className:"standings-table-row "+(t?"qualification-line":""),onClick:()=>{return a=s.id,void(window.location.href=`/muqawamah/2026/${u}/teams/?team=${a}`);var a},children:[e.jsx("td",{className:"col-position",children:e.jsx("span",{className:`position-badge position-${l}`,children:l})}),e.jsx("td",{className:"col-team-full",children:e.jsxs("div",{className:"team-cell-full",children:[e.jsx("div",{className:"team-logo-standings",children:s.crest_url?e.jsx(c,{src:s.crest_url,preset:"crestSm",alt:s.name,loading:"lazy",decoding:"async"}):e.jsx("span",{children:(null==(n=s.name)?void 0:n.charAt(0))||"?"})}),e.jsx("span",{className:"team-name-full",children:s.name})]})}),e.jsx("td",{className:"col-stat",children:s.played||0}),e.jsx("td",{className:"col-stat stat-wins",children:s.won||0}),e.jsx("td",{className:"col-stat stat-draws",children:s.drawn||0}),e.jsx("td",{className:"col-stat stat-losses",children:s.lost||0}),e.jsx("td",{className:"col-stat hide-mobile",children:s.goals_for||0}),e.jsx("td",{className:"col-stat hide-mobile",children:s.goals_against||0}),e.jsx("td",{className:"col-stat",children:e.jsxs("span",{className:s.goal_difference>=0?"gd-positive":"gd-negative",children:[s.goal_difference>=0?"+":"",s.goal_difference||0]})}),e.jsx("td",{className:"col-stat hide-mobile",children:e.jsx("span",{className:"card-stat yellow",children:s.yellow_cards||0})}),e.jsx("td",{className:"col-stat hide-mobile",children:e.jsx("span",{className:"card-stat red",children:s.red_cards||0})}),e.jsx("td",{className:"col-points",children:e.jsx("span",{className:"points-value",children:s.points||0})})]},s.id)})})]})]},a||"overall");if(m)return e.jsxs(e.Fragment,{children:[e.jsx(t,{}),e.jsx("div",{className:"standings-loading",children:e.jsxs("div",{className:"standings-loading-content",children:[e.jsxs("div",{className:"logo-loader",children:[e.jsx("div",{className:"logo-ring"}),e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawama",className:"logo-pulse"})]}),e.jsx("p",{children:"Loading standings..."})]})}),e.jsx(r,{edition:"2026"})]});const b=Object.keys(n).filter(s=>"Ungrouped"!==s).sort(),N=b.length>0,v=n.Ungrouped||[];return e.jsxs(e.Fragment,{children:[e.jsx(t,{}),e.jsx("div",{className:"standings-page",children:e.jsxs("div",{className:"standings-page-container",children:[e.jsxs("div",{className:"standings-header-v2",children:[e.jsx("h1",{className:"standings-page-title",children:"STANDINGS"}),e.jsx("hr",{className:"standings-divider"})]}),N&&e.jsx("div",{className:"standings-controls",children:e.jsxs("div",{className:"view-toggle",children:[e.jsxs("button",{className:"toggle-btn "+("groups"===h?"active":""),onClick:()=>x("groups"),children:[e.jsx("i",{className:"fas fa-th-large"})," Groups"]}),e.jsxs("button",{className:"toggle-btn "+("overall"===h?"active":""),onClick:()=>x("overall"),children:[e.jsx("i",{className:"fas fa-list"})," Overall"]})]})}),"groups"===h&&N?e.jsxs("div",{className:"groups-container",children:[b.map(s=>e.jsx("div",{className:"group-standings",children:f(n[s],s)},s)),v.length>0&&e.jsx("div",{className:"group-standings",children:f(v,"Ungrouped")})]}):f(Object.values(n).flat().sort((s,a)=>a.points!==s.points?(a.points||0)-(s.points||0):a.goal_difference!==s.goal_difference?(a.goal_difference||0)-(s.goal_difference||0):(a.goals_for||0)!==(s.goals_for||0)?(a.goals_for||0)-(s.goals_for||0):(s.yellow_cards||0)!==(a.yellow_cards||0)?(s.yellow_cards||0)-(a.yellow_cards||0):(s.red_cards||0)-(a.red_cards||0)).map((s,a)=>({...s,position:a+1}))),!N&&0===v.length&&0===Object.keys(n).length&&e.jsxs("div",{className:"no-standings",children:[e.jsx("i",{className:"fas fa-table"}),e.jsx("p",{children:"No standings available yet"})]})]})}),e.jsx(r,{edition:"2026"}),e.jsx("style",{children:"\n        .standings-header-v2 {\n          margin-bottom: 32px;\n        }\n\n        .standings-divider {\n          border: none;\n          height: 1px;\n          background: rgba(255, 255, 255, 0.1);\n          margin: 0;\n        }\n\n        .standings-controls {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n\n        .view-toggle {\n          display: flex;\n          gap: 8px;\n          background: rgba(255, 255, 255, 0.05);\n          padding: 4px;\n          border-radius: 8px;\n        }\n\n        .toggle-btn {\n          padding: 8px 16px;\n          background: transparent;\n          border: none;\n          color: rgba(255, 255, 255, 0.6);\n          cursor: pointer;\n          border-radius: 6px;\n          font-size: 13px;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          transition: all 0.2s;\n        }\n\n        .toggle-btn:hover {\n          color: #fff;\n        }\n\n        .toggle-btn.active {\n          background: #4f8cff;\n          color: #fff;\n        }\n\n        .groups-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));\n          gap: 24px;\n        }\n\n        @media (max-width: 768px) {\n          .groups-container {\n            grid-template-columns: 1fr;\n          }\n        }\n\n        .group-header {\n          padding: 12px 16px;\n          background: linear-gradient(135deg, rgba(79, 140, 255, 0.2), rgba(79, 140, 255, 0.05));\n          border-radius: 8px 8px 0 0;\n          border-bottom: 2px solid #4f8cff;\n        }\n\n        .group-header.ungrouped {\n          background: linear-gradient(135deg, rgba(255, 152, 0, 0.2), rgba(255, 152, 0, 0.05));\n          border-bottom-color: #ff9800;\n        }\n\n        .group-badge {\n          font-family: 'Oswald', sans-serif;\n          font-size: 1rem;\n          font-weight: 700;\n          text-transform: uppercase;\n          color: #4f8cff;\n          letter-spacing: 1px;\n        }\n\n        .group-header.ungrouped .group-badge {\n          color: #ff9800;\n        }\n\n        .standings-table-row.qualification-line {\n          border-bottom: 2px solid #4f8cff !important;\n        }\n\n        .card-stat {\n          font-size: 0.85rem;\n          font-weight: 500;\n        }\n\n        .card-stat.yellow {\n          color: #ffc107;\n        }\n\n        .card-stat.red {\n          color: #f44336;\n        }\n      "})]})}n.createRoot(document.getElementById("standings-root")).render(e.jsx(l.StrictMode,{children:e.jsx(d,{})}));
