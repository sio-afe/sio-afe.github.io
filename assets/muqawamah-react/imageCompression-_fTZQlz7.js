async function t(t,o={}){const{maxWidth:a=800,maxHeight:n=800,quality:r=.8,outputFormat:i="image/webp"}=o;return new Promise((o,s)=>{const c=new FileReader;c.onerror=()=>s(new Error("Failed to read file")),c.onload=c=>{const d=new Image;d.onerror=()=>s(new Error("Failed to load image")),d.onload=()=>{try{let{width:s,height:c}=d;if(s>a||c>n){const t=Math.min(a/s,n/c);s=Math.floor(s*t),c=Math.floor(c*t)}const h=document.createElement("canvas");h.width=s,h.height=c;const g=h.getContext("2d");g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(d,0,0,s,c);const m=h.toDataURL(i,r);Math.round(t.size/1024),e(m);o(m)}catch(c){s(new Error("Failed to compress image: "+c.message))}},d.src=c.target.result},c.readAsDataURL(t)})}function e(t){const e=t.length-(t.indexOf(",")+1);return Math.round(.75*e/1024)}export{t as c,e as g};
