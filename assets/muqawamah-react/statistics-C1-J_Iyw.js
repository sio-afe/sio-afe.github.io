import{r as s,s as a,j as e,c as l,R as i}from"./supabaseClient-Bdusv2SU.js";import{T as t}from"./TournamentNavbar-D2cgzQdF.js";import{F as n}from"./Footer-YZurjJeH.js";function c(){const[l,i]=s.useState("goals"),[c,r]=s.useState({goals:[],assists:[]}),[o,d]=s.useState([]),[m,h]=s.useState(!0),[j]=s.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");s.useEffect(()=>{v()},[j]);const v=async()=>{try{h(!0);const{data:s}=await a.from("team_players").select("\n          id,\n          player_name,\n          player_image,\n          goals,\n          assists,\n          team_id,\n          team_registrations(team_name, team_logo, category)\n        ").order("goals",{ascending:!1});if(s){const a=s.filter(s=>{var a;return(null==(a=s.team_registrations)?void 0:a.category)===j}),e=a.filter(s=>(s.goals||0)>0).slice(0,10),l=[...a].filter(s=>(s.assists||0)>0).sort((s,a)=>(a.assists||0)-(s.assists||0)).slice(0,10);r({goals:e,assists:l})}const{data:e}=await a.from("teams").select("*").eq("category",j).order("goals_for",{ascending:!1});e&&d(e.slice(0,10))}catch(s){}finally{h(!1)}};if(m)return e.jsxs(e.Fragment,{children:[e.jsx(t,{}),e.jsx("div",{className:"stats-page-v2 stats-loading-v2",children:e.jsxs("div",{className:"stats-loading-content",children:[e.jsxs("div",{className:"logo-loader",children:[e.jsx("div",{className:"logo-ring"}),e.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),e.jsx("p",{children:"Loading statistics..."})]})}),e.jsx(n,{edition:"2026"})]});const x=(s,a)=>e.jsx("div",{className:"leaderboard-v2",children:s.length>0?s.map((s,l)=>{var i,t;return e.jsxs("div",{className:"leaderboard-row-v2 "+(0===l?"top-player":""),onClick:()=>(s=>{const a="u17"===j?"/muqawamah/2026/u17":"/muqawamah/2026/open-age";window.location.href=`${a}/players/?player=${s}`})(s.id),children:[e.jsx("div",{className:"rank-cell-v2",children:e.jsx("span",{className:"rank-number "+(l<3?"rank-top":""),children:l+1})}),e.jsx("div",{className:"player-photo-v2",children:s.player_image?e.jsx("img",{src:s.player_image,alt:s.player_name}):e.jsx("div",{className:"photo-placeholder",children:e.jsx("i",{className:"fas fa-user"})})}),e.jsxs("div",{className:"player-info-v2",children:[e.jsx("span",{className:"player-name-v2",children:s.player_name}),e.jsxs("div",{className:"team-info-v2",children:[(null==(i=s.team_registrations)?void 0:i.team_logo)&&e.jsx("img",{src:s.team_registrations.team_logo,alt:"",className:"mini-team-logo"}),e.jsx("span",{className:"team-name-mini",children:(null==(t=s.team_registrations)?void 0:t.team_name)||"N/A"})]})]}),e.jsx("div",{className:"stat-value-v2",children:e.jsx("span",{className:"stat-number",children:"goals"===a?s.goals||0:s.assists||0})})]},s.id)}):e.jsxs("div",{className:"no-data-v2",children:[e.jsx("i",{className:"fas fa-chart-bar"}),e.jsx("p",{children:"No statistics available yet"})]})});return e.jsxs(e.Fragment,{children:[e.jsx(t,{}),e.jsx("div",{className:"stats-page-v2",children:e.jsxs("div",{className:"stats-container-v2",children:[e.jsxs("div",{className:"stats-header-v2",children:[e.jsx("h1",{children:"Statistics"}),e.jsx("hr",{className:"stats-divider"})]}),e.jsx("div",{className:"stats-tabs-v2",children:[{id:"goals",label:"TOP SCORERS",icon:"fa-futbol"},{id:"assists",label:"TOP ASSISTS",icon:"fa-hands-helping"},{id:"teams",label:"TEAM STATS",icon:"fa-shield-alt"}].map(s=>e.jsxs("button",{className:"stats-tab-v2 "+(l===s.id?"active":""),onClick:()=>i(s.id),children:[e.jsx("i",{className:`fas ${s.icon}`}),e.jsx("span",{children:s.label})]},s.id))}),e.jsxs("div",{className:"stats-content-v2",children:["goals"===l&&e.jsxs("div",{className:"stats-section-v2",children:[e.jsxs("div",{className:"section-header-v2",children:[e.jsx("h2",{children:"Top Scorers"}),e.jsx("span",{className:"section-subtitle",children:"Players with most goals"})]}),x(c.goals,"goals")]}),"assists"===l&&e.jsxs("div",{className:"stats-section-v2",children:[e.jsxs("div",{className:"section-header-v2",children:[e.jsx("h2",{children:"Top Assists"}),e.jsx("span",{className:"section-subtitle",children:"Players with most assists"})]}),x(c.assists,"assists")]}),"teams"===l&&e.jsxs("div",{className:"stats-section-v2",children:[e.jsxs("div",{className:"section-header-v2",children:[e.jsx("h2",{children:"Team Statistics"}),e.jsx("span",{className:"section-subtitle",children:"Goals scored and conceded"})]}),e.jsx("div",{className:"leaderboard-v2 team-leaderboard",children:o.length>0?o.map((s,a)=>{var l;return e.jsxs("div",{className:"leaderboard-row-v2 team-row "+(0===a?"top-team":""),onClick:()=>(s=>{const a="u17"===j?"/muqawamah/2026/u17":"/muqawamah/2026/open-age";window.location.href=`${a}/teams/?team=${s}`})(s.id),children:[e.jsx("div",{className:"rank-cell-v2",children:e.jsx("span",{className:"rank-number "+(a<3?"rank-top":""),children:a+1})}),e.jsx("div",{className:"team-logo-v2",children:s.crest_url?e.jsx("img",{src:s.crest_url,alt:s.name}):e.jsx("div",{className:"logo-placeholder",children:e.jsx("span",{children:(null==(l=s.name)?void 0:l.charAt(0))||"?"})})}),e.jsx("div",{className:"team-info-main-v2",children:e.jsx("span",{className:"team-name-v2",children:s.name})}),e.jsxs("div",{className:"team-stats-row",children:[e.jsxs("div",{className:"team-stat-cell",children:[e.jsx("span",{className:"stat-label-mini",children:"GF"}),e.jsx("span",{className:"stat-num",children:s.goals_for||0})]}),e.jsxs("div",{className:"team-stat-cell",children:[e.jsx("span",{className:"stat-label-mini",children:"GA"}),e.jsx("span",{className:"stat-num",children:s.goals_against||0})]}),e.jsxs("div",{className:"team-stat-cell gd-cell",children:[e.jsx("span",{className:"stat-label-mini",children:"GD"}),e.jsxs("span",{className:"stat-num "+(s.goals_for-s.goals_against>=0?"positive":"negative"),children:[(s.goals_for||0)-(s.goals_against||0)>=0?"+":"",(s.goals_for||0)-(s.goals_against||0)]})]})]})]},s.id)}):e.jsxs("div",{className:"no-data-v2",children:[e.jsx("i",{className:"fas fa-shield-alt"}),e.jsx("p",{children:"No team statistics available yet"})]})})]})]})]})}),e.jsx(n,{edition:"2026"})]})}l.createRoot(document.getElementById("statistics-root")).render(e.jsx(i.StrictMode,{children:e.jsx(c,{})}));
