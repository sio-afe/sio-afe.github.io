import{j as a,R as e,r as s,s as r,c as i}from"./supabaseClient-Bdusv2SU.js";import{F as l}from"./Footer-YZurjJeH.js";import{T as t}from"./TournamentNavbar-BcAhqk4i.js";function n({teams:e=[],onTeamClick:s}){return a.jsxs("div",{className:"team-database",children:[a.jsx("div",{className:"team-database-header",children:a.jsx("h1",{className:"team-database-title",children:"Teams"})}),a.jsx("div",{className:"teams-count",children:a.jsxs("span",{children:[e.length," teams registered"]})}),a.jsx("div",{className:"teams-grid",children:e.map((e,r)=>{var i;const l=["33, 150, 243","156, 39, 176","244, 67, 54","76, 175, 80","255, 152, 0","0, 188, 212","233, 30, 99","255, 193, 7","63, 81, 181","0, 150, 136","121, 85, 72","96, 125, 139"],t=l[e.id.split("").reduce((a,e)=>a+e.charCodeAt(0),0)%l.length],n=`linear-gradient(135deg, rgba(${t}, 0.15) 0%, rgba(${t}, 0.02) 100%)`;return a.jsxs("div",{className:"team-card-db",style:{background:n},onClick:()=>s&&s(e),children:[a.jsx("div",{className:"team-logo-large",children:e.crest_url?a.jsx("img",{src:e.crest_url,alt:e.name,loading:"lazy"}):a.jsx("span",{children:(null==(i=e.name)?void 0:i.charAt(0))||"?"})}),a.jsxs("div",{className:"team-info-db",children:[a.jsx("h3",{className:"team-name-db",children:e.name}),a.jsx("p",{className:"team-captain-db",children:e.captain})]})]},e.id)})}),0===e.length&&a.jsxs("div",{className:"no-teams",children:[a.jsx("i",{className:"fas fa-shield-alt"}),a.jsx("p",{children:"No teams registered yet"})]})]})}const c=e.forwardRef(({children:e,className:s="",...r},i)=>a.jsxs("svg",{ref:i,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 74 111",className:`dark-field-svg ${s}`,...r,children:[a.jsx("rect",{width:"74",height:"111",fill:"#0d1117"}),a.jsxs("g",{fill:"none",stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",transform:"translate(3 3)",children:[a.jsx("path",{d:"M 0 0 h 68 v 105 h -68 Z"}),a.jsx("path",{d:"M 0 52.5 h 68"}),a.jsx("circle",{r:"9.15",cx:"34",cy:"52.5"}),a.jsx("circle",{r:"0.75",cx:"34",cy:"52.5",fill:"rgba(255,255,255,0.4)",stroke:"none"}),a.jsxs("g",{children:[a.jsx("path",{d:"M 13.84 0 v 16.5 h 40.32 v -16.5"}),a.jsx("path",{d:"M 24.84 0 v 5.5 h 18.32 v -5.5"}),a.jsx("circle",{r:"0.75",cx:"34",cy:"10.94",fill:"rgba(255,255,255,0.4)",stroke:"none"}),a.jsx("path",{d:"M 26.733027 16.5 a 9.15 9.15 0 0 0 14.533946 0"})]}),a.jsxs("g",{transform:"rotate(180,34,52.5)",children:[a.jsx("path",{d:"M 13.84 0 v 16.5 h 40.32 v -16.5"}),a.jsx("path",{d:"M 24.84 0 v 5.5 h 18.32 v -5.5"}),a.jsx("circle",{r:"0.75",cx:"34",cy:"10.94",fill:"rgba(255,255,255,0.4)",stroke:"none"}),a.jsx("path",{d:"M 26.733027 16.5 a 9.15 9.15 0 0 0 14.533946 0"})]}),a.jsx("path",{d:"M 0 2 a 2 2 0 0 0 2 -2M 66 0 a 2 2 0 0 0 2 2M 68 103 a 2 2 0 0 0 -2 2M 2 105 a 2 2 0 0 0 -2 -2"})]}),e]}));function d({players:e=[],formation:s=""}){const r=e.filter(a=>!a.isSubstitute&&"SUB"!==a.position).slice(0,7);return 0===r.length?a.jsx("div",{className:"team-formation-display",children:a.jsxs("div",{className:"no-formation",children:[a.jsx("i",{className:"fas fa-users-slash"}),a.jsx("p",{children:"Formation not set"})]})}):a.jsxs("div",{className:"team-formation-display",children:[s&&a.jsxs("div",{className:"formation-label",children:[a.jsx("i",{className:"fas fa-chess-board"}),a.jsx("span",{children:s})]}),a.jsx("div",{className:"formation-field-wrapper",children:a.jsxs(c,{style:{width:"100%",height:"auto",maxWidth:"350px",display:"block",margin:"0 auto"},children:[a.jsx("defs",{children:r.map(e=>a.jsx("clipPath",{id:`team-clip-${e.id}`,children:a.jsx("circle",{r:"3.5",cx:"0",cy:"0"})},`clip-${e.id}`))}),r.map(e=>{var s;const r=3+("number"==typeof e.position_x?e.position_x:50)/100*68,i=3+("number"==typeof e.position_y?e.position_y:50)/100*105;return a.jsxs("g",{transform:`translate(${r}, ${i})`,className:"formation-player",children:[a.jsx("circle",{r:"3.5",fill:"#e63946",stroke:"#fff",strokeWidth:"0.6"}),e.player_image?a.jsx("image",{href:e.player_image,x:"-3.5",y:"-3.5",width:"7",height:"7",clipPath:`url(#team-clip-${e.id})`,preserveAspectRatio:"xMidYMid slice"}):a.jsx("text",{x:"0",y:"1.2",textAnchor:"middle",fill:"#fff",fontSize:"2.8",fontWeight:"700",children:e.position||"?"}),a.jsx("text",{x:"0",y:"6.5",textAnchor:"middle",fill:"#fff",fontSize:"2.2",fontWeight:"600",children:(null==(s=e.player_name)?void 0:s.split(" ")[0])||"Player"})]},e.id)})]})})]})}c.displayName="DarkFieldSVG";const o={Goalkeeper:"GOALKEEPERS",Defender:"DEFENDERS",Midfielder:"MIDFIELDERS",Forward:"FORWARDS",Striker:"FORWARDS",Substitute:"SUBSTITUTES"},m={GK:"Goalkeeper",CB:"Defender",LB:"Defender",RB:"Defender",CDM:"Midfielder",CM:"Midfielder",CAM:"Midfielder",LM:"Midfielder",RM:"Midfielder",CF:"Forward",ST:"Forward",SUB:"Substitute"},h=[{primary:"33, 150, 243",name:"blue"},{primary:"156, 39, 176",name:"purple"},{primary:"244, 67, 54",name:"red"},{primary:"76, 175, 80",name:"green"},{primary:"255, 152, 0",name:"orange"},{primary:"0, 188, 212",name:"cyan"},{primary:"233, 30, 99",name:"pink"},{primary:"255, 193, 7",name:"amber"},{primary:"63, 81, 181",name:"indigo"},{primary:"0, 150, 136",name:"teal"},{primary:"121, 85, 72",name:"brown"},{primary:"96, 125, 139",name:"blue-grey"}];function p({teamId:e,onBack:i,onNavigateToPlayer:n}){var c;const[p,x]=s.useState(null),[g,j]=s.useState([]),[y,u]=s.useState([]),[N,f]=s.useState([]),[_,v]=s.useState({topScorers:[],topAssists:[]}),[b,w]=s.useState(!0);s.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const{data:a,error:s}=await r.from("teams").select("*").eq("id",e).single();if(s)throw s;if(x(a),null==a?void 0:a.category){const{data:s}=await r.from("teams").select("id, name, crest_url, played, won, drawn, lost, goals_for, goals_against, points").eq("category",a.category).order("points",{ascending:!1}).order("goals_for",{ascending:!1});if(s){const a=s.map((a,e)=>({...a,position:e+1}));u(a)}const{data:i}=await r.from("matches").select("\n            *,\n            home_team:teams!matches_home_team_id_fkey(id, name, crest_url),\n            away_team:teams!matches_away_team_id_fkey(id, name, crest_url)\n          ").eq("category",a.category).or(`home_team_id.eq.${e},away_team_id.eq.${e}`).order("match_date",{ascending:!0}).order("scheduled_time",{ascending:!0});i&&f(i)}const{data:i}=await r.from("players").select("id, name, player_image, position, position_x, position_y, is_substitute, registration_player_id").eq("team_id",e);if(i){const a=i.map(a=>({...a,player_name:a.name,player_age:null}));j(a);const{data:s}=await r.from("goals").select("\n            scorer_id,\n            assister_id,\n            scorer:team_players!goals_scorer_id_fkey(id, player_name, player_image),\n            assister:team_players!goals_assister_id_fkey(id, player_name, player_image)\n          ").eq("team_id",e),l={};(i||[]).forEach(a=>{a.registration_player_id&&(l[a.registration_player_id]=a.id)});const t={},n={};(s||[]).forEach(a=>{if(a.scorer_id&&a.scorer){const e=l[a.scorer_id]||a.scorer_id;t[e]||(t[e]={id:e,player_name:a.scorer.player_name,player_image:a.scorer.player_image,goals:0}),t[e].goals+=1}if(a.assister_id&&a.assister){const e=l[a.assister_id]||a.assister_id;n[e]||(n[e]={id:e,player_name:a.assister.player_name,player_image:a.assister.player_image,assists:0}),n[e].assists+=1}});const c=Object.values(t).sort((a,e)=>e.goals-a.goals).slice(0,5),d=Object.values(n).sort((a,e)=>e.assists-a.assists).slice(0,5);v({topScorers:c,topAssists:d})}}catch(a){}finally{w(!1)}},k=a=>m[a]||a||"Unknown";if(b)return a.jsx("div",{className:"team-detail-loading",children:a.jsxs("div",{className:"teams-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading team..."})]})});if(!p)return a.jsxs("div",{className:"team-detail-error",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"}),a.jsx("p",{children:"Team not found"})]});const M=(()=>{const a={};return g.forEach(e=>{const s=k(e.position),r=o[s]||"OTHERS";a[r]||(a[r]=[]),a[r].push(e)}),a})(),$=N.map(a=>((a,e)=>{const s=a.home_team_id===e,r=s?a.away_team:a.home_team,i=s?a.home_score:a.away_score,l=s?a.away_score:a.home_score;let t="scheduled",n="-";"completed"===a.status&&null!==i&&null!==l&&(i>l?(t="win",n=3):i<l?(t="loss",n=0):(t="draw",n=1));const c=a.match_date?new Date(a.match_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):"TBD";return{...a,isHome:s,opponent:r,goalsFor:i??"-",goalsAgainst:l??"-",result:t,points:n,matchDate:c,score:"completed"===a.status?`${i} - ${l}`:"vs"}})(a,e)),A=(a=>{if(!a)return h[0];const e=a.split("").reduce((a,e)=>a+e.charCodeAt(0),0);return h[e%h.length]})(e),E={background:`linear-gradient(180deg, \n      rgba(${A.primary}, 0.15) 0%, \n      rgba(${A.primary}, 0.08) 30%,\n      #0d1225 70%,\n      #0a0e1a 100%\n    )`},T={background:`\n      radial-gradient(ellipse at 50% 0%, rgba(${A.primary}, 0.25) 0%, transparent 60%),\n      radial-gradient(ellipse at 0% 100%, rgba(${A.primary}, 0.1) 0%, transparent 50%),\n      radial-gradient(ellipse at 100% 100%, rgba(${A.primary}, 0.1) 0%, transparent 50%)\n    `},q={background:`linear-gradient(135deg, rgba(${A.primary}, 0.2) 0%, rgba(${A.primary}, 0.05) 100%)`,borderColor:`rgba(${A.primary}, 0.4)`,boxShadow:`0 8px 32px rgba(0, 0, 0, 0.4), 0 0 40px rgba(${A.primary}, 0.2), inset 0 0 20px rgba(${A.primary}, 0.1)`},R=`rgb(${A.primary})`;return a.jsxs(a.Fragment,{children:[a.jsx(t,{}),a.jsxs("div",{className:"team-detail",children:[a.jsxs("div",{className:"team-hero",style:E,children:[a.jsx("div",{className:"team-hero-bg",style:T}),a.jsxs("div",{className:"team-hero-content",children:[a.jsx("div",{className:"team-crest-hero",style:q,children:p.crest_url?a.jsx("img",{src:p.crest_url,alt:p.name}):a.jsx("span",{children:(null==(c=p.name)?void 0:c.charAt(0))||"?"})}),a.jsxs("div",{className:"team-info-hero",children:[a.jsx("h1",{className:"team-name-hero",children:p.name}),a.jsxs("div",{className:"team-meta-hero",children:[a.jsx("span",{className:"meta-label",children:"Captain:"}),a.jsx("span",{className:"meta-value",style:{color:R},children:p.captain||"TBA"})]}),p.formation&&a.jsxs("div",{className:"team-formation-hero",style:{background:`rgba(${A.primary}, 0.15)`,borderColor:`rgba(${A.primary}, 0.3)`},children:[a.jsx("i",{className:"fas fa-chess-board",style:{color:R}}),a.jsx("span",{children:p.formation})]})]})]})]}),a.jsxs("div",{className:"team-detail-body",children:[a.jsxs("div",{className:"team-detail-main",children:[a.jsxs("div",{className:"team-match-log-section",children:[a.jsx("h3",{className:"section-title-italic",children:"MATCH LOG"}),$.length>0?a.jsx("div",{className:"team-match-log-wrapper",children:a.jsxs("table",{className:"team-match-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"OPPONENT"}),a.jsx("th",{children:"RESULT"}),a.jsx("th",{children:"PTS"})]})}),a.jsx("tbody",{children:$.map((e,s)=>{const r=e.isHome?e.away_team:e.home_team;return a.jsxs("tr",{className:"team-match-row",onClick:()=>{const a=p.category||"open-age";window.location.href=`/muqawamah/2026/${a}/fixtures/?match=${e.id}`},children:[a.jsx("td",{className:"opponent-cell",children:a.jsxs("div",{className:"opponent-inner",children:[(null==r?void 0:r.crest_url)&&a.jsx("img",{src:r.crest_url,alt:"",className:"opponent-logo",loading:"lazy"}),a.jsx("span",{className:"opponent-name",children:(null==r?void 0:r.name)||"TBD"})]})}),a.jsx("td",{className:"result-cell",children:a.jsx("div",{className:"result-inner",children:"completed"===e.status?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`result-badge result-${e.result}`,children:"win"===e.result?"WIN":"loss"===e.result?"LOSS":"DRAW"}),a.jsxs("span",{className:"score-text",children:[e.goalsFor,"-",e.goalsAgainst]})]}):a.jsx("span",{className:"scheduled-badge-simple",children:"VS"})})}),a.jsx("td",{className:"pts-cell",children:a.jsx("span",{className:`pts-value ${e.result}`,children:e.points})})]},e.id||s)})})]})}):a.jsxs("div",{className:"no-matches",children:[a.jsx("i",{className:"fas fa-calendar-alt"}),a.jsx("p",{children:"No matches scheduled yet"})]})]}),a.jsxs("div",{className:"team-formation-section",children:[a.jsx("h3",{className:"section-title-italic",children:"FORMATION"}),a.jsx(d,{players:g,formation:p.formation})]}),a.jsxs("div",{className:"standings-section",children:[a.jsx("h3",{className:"section-title-italic",children:"STANDINGS"}),a.jsxs("div",{className:"standings-table",children:[a.jsxs("div",{className:"standings-header",children:[a.jsx("span",{className:"col-pos",children:"#"}),a.jsx("span",{className:"col-team",children:"TEAM"}),a.jsx("span",{className:"col-pts",children:"PTS"})]}),y.map(s=>{var r;const i=s.id===e;return a.jsxs("div",{className:"standings-row "+(i?"highlighted":""),children:[a.jsx("span",{className:"col-pos",children:s.position}),a.jsx("span",{className:"col-team",children:a.jsxs("div",{className:"team-cell",children:[a.jsx("div",{className:"team-logo-small",children:s.crest_url?a.jsx("img",{src:s.crest_url,alt:s.name,loading:"lazy"}):a.jsx("span",{children:(null==(r=s.name)?void 0:r.charAt(0))||"?"})}),a.jsx("span",{className:"team-name-standings",children:s.name})]})}),a.jsx("span",{className:"col-pts",children:s.points||0})]},s.id)})]})]})]}),a.jsxs("div",{className:"team-detail-sidebar",children:[a.jsx("h3",{className:"section-title-italic",children:"SQUAD"}),a.jsx("div",{className:"squad-list",children:Object.entries(M).map(([e,s])=>a.jsxs("div",{className:"squad-group",children:[a.jsx("h4",{className:"squad-group-title",children:e}),s.map((e,s)=>a.jsxs("div",{className:"squad-row",onClick:()=>n&&n(e.id,e.player_name),children:[a.jsx("span",{className:"squad-number",children:s+1}),a.jsx("div",{className:"squad-photo",children:e.player_image?a.jsx("img",{src:e.player_image,alt:e.player_name,loading:"lazy"}):a.jsx("i",{className:"fas fa-user"})}),a.jsxs("div",{className:"squad-info",children:[a.jsx("span",{className:"squad-name",children:e.player_name}),a.jsx("span",{className:"squad-position",children:k(e.position)})]})]},e.id))]},e))})]})]}),a.jsxs("div",{className:"leaderboards-section",children:[a.jsx("h2",{className:"leaderboards-title",children:"LEADERBOARDS"}),a.jsxs("div",{className:"leaderboards-grid",children:[a.jsxs("div",{className:"leaderboard-card",children:[a.jsx("h3",{className:"leaderboard-card-title",children:"TOP SCORERS"}),a.jsx("div",{className:"leaderboard-list",children:_.topScorers.length>0?_.topScorers.map((e,s)=>a.jsxs("div",{className:"leaderboard-item",onClick:()=>n&&n(e.id,e.player_name),children:[a.jsx("span",{className:"lb-rank",children:s+1}),a.jsx("div",{className:"lb-player-photo",children:e.player_image?a.jsx("img",{src:e.player_image,alt:e.player_name,loading:"lazy"}):a.jsx("i",{className:"fas fa-user"})}),a.jsx("span",{className:"lb-player-name",children:e.player_name}),a.jsx("span",{className:"lb-stat",children:e.goals||0})]},e.id)):a.jsx("div",{className:"no-stats",children:"No goals scored yet"})}),a.jsxs("button",{className:"view-more-btn",children:["VIEW MORE ",a.jsx("i",{className:"fas fa-arrow-right"})]})]}),a.jsxs("div",{className:"leaderboard-card",children:[a.jsx("h3",{className:"leaderboard-card-title",children:"TOP ASSISTS"}),a.jsx("div",{className:"leaderboard-list",children:_.topAssists.length>0?_.topAssists.map((e,s)=>a.jsxs("div",{className:"leaderboard-item",onClick:()=>n&&n(e.id,e.player_name),children:[a.jsx("span",{className:"lb-rank",children:s+1}),a.jsx("div",{className:"lb-player-photo",children:e.player_image?a.jsx("img",{src:e.player_image,alt:e.player_name,loading:"lazy"}):a.jsx("i",{className:"fas fa-user"})}),a.jsx("span",{className:"lb-player-name",children:e.player_name}),a.jsx("span",{className:"lb-stat",children:e.assists||0})]},e.id)):a.jsx("div",{className:"no-stats",children:"No assists yet"})}),a.jsxs("button",{className:"view-more-btn",children:["VIEW MORE ",a.jsx("i",{className:"fas fa-arrow-right"})]})]})]})]}),a.jsx(l,{edition:"2026"})]})]})}function x(){const[e,i]=s.useState([]),[c,d]=s.useState(!0),[o,m]=s.useState(null),[h,x]=s.useState("list");s.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("team");return a?(m(a),x("detail"),d(!1)):j(),window.addEventListener("popstate",g),()=>window.removeEventListener("popstate",g)},[]);const g=()=>{const a=new URLSearchParams(window.location.search).get("team");a?(m(a),x("detail")):(x("list"),m(null))},j=async()=>{try{const{data:a,error:e}=await r.from("teams").select("id, name, crest_url, captain, category").eq("category","open-age").order("name",{ascending:!0});if(e)throw e;i(a||[])}catch(a){}finally{d(!1)}},y=()=>{window.history.pushState({},"","/muqawamah/2026/open-age/teams/"),x("list"),m(null)};return c?a.jsx("div",{className:"teams-loading",children:a.jsxs("div",{className:"teams-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading teams..."})]})}):"detail"===h&&o?a.jsx(p,{teamId:o,onBack:y,onNavigateToPlayer:(a,e)=>{window.location.href=`/muqawamah/2026/open-age/players/?player=${a}`}}):a.jsxs(a.Fragment,{children:[a.jsx(t,{}),a.jsx(n,{teams:e,onTeamClick:a=>{const e=`/muqawamah/2026/open-age/teams/?team=${a.id}`;window.history.pushState({teamId:a.id},"",e),m(a.id),x("detail"),window.scrollTo(0,0)}}),a.jsx(l,{edition:"2026"})]})}i.createRoot(document.getElementById("teams-root")).render(a.jsx(e.StrictMode,{children:a.jsx(x,{})}));
