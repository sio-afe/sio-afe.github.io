var s;import{r as a,j as e,s as t,c as i,R as n}from"./App-ClKdzuI3.js";import{m as l,A as c}from"./index-mNB_kVS6.js";function r({teams:s,category:t}){const[i,n]=a.useState(null),c=s=>s+1,r=s=>s<4?"qualification-zone":"",m=s=>s>0?`+${s}`:s,h=()=>{n(null)};return e.jsxs("div",{className:"standings-container",children:[e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"standings-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"POS"}),e.jsx("th",{className:"team-column",children:"CLUB"}),e.jsx("th",{className:"mobile-hide",children:"P"}),e.jsx("th",{className:"mobile-hide",children:"W"}),e.jsx("th",{className:"mobile-hide",children:"D"}),e.jsx("th",{className:"mobile-hide",children:"L"}),e.jsx("th",{children:"GF"}),e.jsx("th",{children:"GA"}),e.jsx("th",{children:"GD"}),e.jsx("th",{className:"points-column",children:"PTS"}),e.jsx("th",{className:"form-column mobile-hide",children:"FORM"})]})}),e.jsx("tbody",{children:s.map((s,a)=>e.jsxs(l.tr,{className:r(a),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},onClick:()=>n(s),children:[e.jsx("td",{className:"position-cell",children:e.jsx("div",{className:`position-indicator ${r(a)}`,children:c(a)})}),e.jsxs("td",{className:"team-cell",children:[e.jsx("div",{className:"team-info",children:e.jsx("img",{src:s.crest_url||"/assets/data/open-age/team-logos/default.png",alt:s.name,className:"team-crest-small",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}})}),e.jsx("div",{className:"mobile-form",children:d(s.form)})]}),e.jsx("td",{className:"mobile-hide",children:s.played||0}),e.jsx("td",{className:"mobile-hide stat-win",children:s.won||0}),e.jsx("td",{className:"mobile-hide",children:s.drawn||0}),e.jsx("td",{className:"mobile-hide stat-loss",children:s.lost||0}),e.jsx("td",{children:s.goals_for||0}),e.jsx("td",{children:s.goals_against||0}),e.jsx("td",{className:"gd-cell "+(s.gd>0?"positive":s.gd<0?"negative":""),children:m(s.gd||0)}),e.jsx("td",{className:"points-cell",children:e.jsx("strong",{children:s.points||0})}),e.jsx("td",{className:"form-cell mobile-hide",children:o(s.form)})]},s.id))})]})}),e.jsx("div",{className:"table-legend",children:e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-indicator qualification-zone"}),e.jsx("span",{children:"Qualification to Semi-Finals"})]})}),i&&e.jsx(l.div,{className:"team-popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,children:e.jsxs(l.div,{className:"team-popup-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"close-popup-btn",onClick:h,children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{className:"popup-header",children:[e.jsx("img",{src:i.crest_url||"/assets/data/open-age/team-logos/default.png",alt:i.name,className:"popup-team-crest",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),e.jsx("h2",{children:i.name}),i.captain&&e.jsxs("p",{className:"captain-info",children:[e.jsx("i",{className:"fas fa-user-tie"}),"Captain: ",i.captain]})]}),e.jsxs("div",{className:"popup-stats",children:[e.jsxs("div",{className:"stat-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Played"}),e.jsx("span",{className:"stat-value",children:i.played||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Won"}),e.jsx("span",{className:"stat-value",children:i.won||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Drawn"}),e.jsx("span",{className:"stat-value",children:i.drawn||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Lost"}),e.jsx("span",{className:"stat-value",children:i.lost||0})]})]}),e.jsxs("div",{className:"stat-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Goals For"}),e.jsx("span",{className:"stat-value",children:i.goals_for||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Goals Against"}),e.jsx("span",{className:"stat-value",children:i.goals_against||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Goal Difference"}),e.jsx("span",{className:"stat-value "+(i.gd>0?"positive":i.gd<0?"negative":""),children:m(i.gd||0)})]}),e.jsxs("div",{className:"stat-item highlighted",children:[e.jsx("span",{className:"stat-label",children:"Points"}),e.jsx("span",{className:"stat-value",children:i.points||0})]})]})]})]})})]})}function o(s){return s?e.jsx("div",{className:"form-indicators",children:s.split("").slice(0,5).map((s,a)=>e.jsx("span",{className:`form-result ${s.toLowerCase()}`,children:s},a))}):e.jsx("span",{className:"no-form",children:"-"})}function d(s){return s?e.jsx("div",{className:"form-indicators-mobile",children:s.split("").slice(0,3).map((s,a)=>e.jsxs("span",{className:`form-result-mobile ${s.toLowerCase()}`,children:["W"===s&&e.jsx("i",{className:"fas fa-check-circle"}),"D"===s&&e.jsx("i",{className:"fas fa-minus-circle"}),"L"===s&&e.jsx("i",{className:"fas fa-times-circle"})]},a))}):null}function m({fixtures:s}){const[i,n]=a.useState("all"),[r,o]=a.useState(null),[d,m]=a.useState(null),[h,x]=a.useState(!1);var u;const j=(s=>{const a={};return s.forEach(s=>{const e=(s.match_time?new Date(s.match_time):new Date(s.match_date)).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});a[e]||(a[e]=[]),a[e].push(s)}),a})((u=s,"all"===i?u:"completed"===i?u.filter(s=>"completed"===s.status):"upcoming"===i?u.filter(s=>"completed"!==s.status):u)),p=s=>{if("completed"===s.status)return e.jsx("span",{className:"status-badge completed",children:"FT"});if("live"===s.status)return e.jsx("span",{className:"status-badge live",children:"LIVE"});{const a=s.match_time||s.match_date,t=new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return e.jsx("span",{className:"status-badge upcoming",children:t})}},g=s=>{try{return JSON.parse(s)}catch(a){return null}},N=s=>{if(!s)return[];if("string"==typeof s){const a=g(s);return Array.isArray(a)?a:[]}return Array.isArray(s)?s:[]},f=()=>{o(null),m(null)};return e.jsxs("div",{className:"fixtures-container",children:[e.jsxs("div",{className:"fixtures-filter",children:[e.jsx("button",{className:"filter-btn "+("all"===i?"active":""),onClick:()=>n("all"),children:"All Matches"}),e.jsx("button",{className:"filter-btn "+("completed"===i?"active":""),onClick:()=>n("completed"),children:"Completed"}),e.jsx("button",{className:"filter-btn "+("upcoming"===i?"active":""),onClick:()=>n("upcoming"),children:"Upcoming"})]}),e.jsx("div",{className:"fixtures-list",children:0===Object.keys(j).length?e.jsxs("div",{className:"no-fixtures",children:[e.jsx("i",{className:"fas fa-calendar-times"}),e.jsx("p",{children:"No fixtures found"})]}):Object.entries(j).map(([s,a],i)=>e.jsxs("div",{className:"fixture-date-group",children:[e.jsxs("div",{className:"fixture-date-header",children:[e.jsx("i",{className:"fas fa-calendar-day"}),e.jsx("h3",{children:s})]}),e.jsx("div",{className:"fixture-cards",children:a.map((s,a)=>{var i,n,c,r,d,h;return e.jsxs(l.div,{className:`fixture-card ${s.status} ${"completed"===s.status?"clickable":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},onClick:()=>(async s=>{if("completed"===s.status){o(s),x(!0);try{const a=window.supabaseClient||t;if(a){const{data:e,error:t}=await a.rpc("get_match_details",{match_uuid:s.id});if(t)m(s);else{const a=Array.isArray(e)?e[0]:e,t="string"==typeof a?g(a):a;m(t||s)}}else m(s)}catch(a){m(s)}finally{x(!1)}}})(s),style:{cursor:"completed"===s.status?"pointer":"default"},children:[e.jsxs("div",{className:"fixture-header",children:[p(s),s.venue&&e.jsxs("span",{className:"fixture-venue",children:[e.jsx("i",{className:"fas fa-map-marker-alt"}),s.venue]})]}),e.jsxs("div",{className:"fixture-teams",children:[e.jsxs("div",{className:"fixture-team home",children:[e.jsx("img",{src:(null==(i=s.home_team)?void 0:i.crest_url)||"/assets/data/open-age/team-logos/default.png",alt:null==(n=s.home_team)?void 0:n.name,className:"fixture-team-crest",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),e.jsx("span",{className:"fixture-team-name",children:(null==(c=s.home_team)?void 0:c.name)||"TBD"})]}),e.jsx("div",{className:"fixture-score",children:"completed"===s.status||"live"===s.status?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"score-display "+(s.home_score>s.away_score?"winner":""),children:s.home_score||0}),e.jsx("span",{className:"score-separator",children:"-"}),e.jsx("span",{className:"score-display "+(s.away_score>s.home_score?"winner":""),children:s.away_score||0})]}):e.jsx("span",{className:"vs-text",children:"VS"})}),e.jsxs("div",{className:"fixture-team away",children:[e.jsx("span",{className:"fixture-team-name",children:(null==(r=s.away_team)?void 0:r.name)||"TBD"}),e.jsx("img",{src:(null==(d=s.away_team)?void 0:d.crest_url)||"/assets/data/open-age/team-logos/default.png",alt:null==(h=s.away_team)?void 0:h.name,className:"fixture-team-crest",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}})]})]}),"completed"===s.status&&s.winner&&e.jsx("div",{className:"fixture-footer",children:e.jsxs("span",{className:"winner-badge",children:[e.jsx("i",{className:"fas fa-trophy"}),"Winner: ",s.winner]})})]},s.id)})})]},s))}),e.jsx(c,{children:r&&e.jsx(l.div,{className:"match-details-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f,children:e.jsxs(l.div,{className:"match-details-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"close-modal-btn",onClick:f,children:e.jsx("i",{className:"fas fa-times"})}),h?e.jsxs("div",{className:"loading-details",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading match details..."})]}):d?e.jsxs("div",{className:"match-details-content",children:[e.jsxs("div",{className:"match-details-header",children:[e.jsxs("div",{className:"match-date-time",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),new Date(r.match_time||r.match_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),r.venue&&e.jsxs("div",{className:"match-venue",children:[e.jsx("i",{className:"fas fa-map-marker-alt"}),r.venue]})]}),e.jsx("div",{className:"match-score-display",children:(()=>{var s,a,t,i,n,l,c,o;const m=(null==d?void 0:d.match)||{},h=m.home_score??r.home_score??0,x=m.away_score??r.away_score??0,u=(null==d?void 0:d.home_team)||{},j=(null==d?void 0:d.away_team)||{},p=N(u.players),g=N(j.players);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"team-display home",children:[e.jsx("img",{src:(null==(s=r.home_team)?void 0:s.crest_url)||u.crest_url||"/assets/data/open-age/team-logos/default.png",alt:(null==(a=r.home_team)?void 0:a.name)||u.name,className:"team-crest-large"}),e.jsx("h3",{children:(null==(t=r.home_team)?void 0:t.name)||u.name}),u.formation&&e.jsx("span",{className:"formation-badge",children:u.formation})]}),e.jsxs("div",{className:"score-display-large",children:[e.jsx("span",{className:"score-number "+(h>x?"winner":""),children:h}),e.jsx("span",{className:"score-separator",children:"-"}),e.jsx("span",{className:"score-number "+(x>h?"winner":""),children:x})]}),e.jsxs("div",{className:"team-display away",children:[e.jsx("img",{src:(null==(i=r.away_team)?void 0:i.crest_url)||j.crest_url||"/assets/data/open-age/team-logos/default.png",alt:(null==(n=r.away_team)?void 0:n.name)||j.name,className:"team-crest-large"}),e.jsx("h3",{children:(null==(l=r.away_team)?void 0:l.name)||j.name}),j.formation&&e.jsx("span",{className:"formation-badge",children:j.formation})]}),p.length>0&&g.length>0?e.jsxs("div",{className:"match-lineups-section",children:[e.jsxs("h4",{children:[e.jsx("i",{className:"fas fa-users"})," Match Lineups"]}),e.jsxs("div",{className:"lineups-grid",children:[e.jsxs("div",{className:"lineup-column",children:[e.jsx("h5",{children:(null==(c=r.home_team)?void 0:c.name)||u.name}),e.jsx("ul",{className:"player-list",children:p.slice(0,7).map(s=>e.jsxs("li",{children:[e.jsx("span",{className:"player-position",children:s.position}),e.jsx("span",{className:"player-name",children:s.name})]},s.id||s.name))})]}),e.jsxs("div",{className:"lineup-column",children:[e.jsx("h5",{children:(null==(o=r.away_team)?void 0:o.name)||j.name}),e.jsx("ul",{className:"player-list",children:g.slice(0,7).map(s=>e.jsxs("li",{children:[e.jsx("span",{className:"player-position",children:s.position}),e.jsx("span",{className:"player-name",children:s.name})]},s.id||s.name))})]})]})]}):e.jsxs("div",{className:"no-lineups",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("p",{children:"Detailed lineups not available for this match yet."})]})]})})()})]}):null]})})})]})}function h({category:s}){const[i,n]=a.useState("scorers"),[c,r]=a.useState([]),[o,d]=a.useState([]),[m,h]=a.useState(!0);a.useEffect(()=>{x()},[s]);const x=async()=>{h(!0);try{const a=window.supabaseClient||t;if(!a)return r([]),void d([]);const{data:e,error:i}=await a.from("matches").select("id").eq("category",s);if(i)throw i;if(!e||0===e.length)return r([]),void d([]);const n=e.map(s=>s.id),{data:l,error:c}=await a.from("goals").select("scorer_name, assist_name, team_id, teams(name, crest_url)").in("match_id",n);if(c)throw c;const o={},m={};(l||[]).forEach(s=>{if(s.scorer_name){const a=`${s.scorer_name}-${s.team_id}`;o[a]||(o[a]={player_name:s.scorer_name,team:s.teams,goals:0}),o[a].goals+=1}if(s.assist_name){const a=`${s.assist_name}-${s.team_id}`;m[a]||(m[a]={player_name:s.assist_name,team:s.teams,assists:0}),m[a].assists+=1}});const h=Object.values(o).sort((s,a)=>a.goals-s.goals).slice(0,15),x=Object.values(m).sort((s,a)=>a.assists-s.assists).slice(0,15);r(h),d(x)}catch(a){r([]),d([])}finally{h(!1)}},u=(s,a)=>0===s.length?e.jsxs("div",{className:"no-stats",children:[e.jsx("i",{className:"fas fa-chart-line"}),e.jsx("p",{children:"No statistics available yet"})]}):e.jsx("div",{className:"stats-list",children:s.map((s,t)=>{var i,n,c;const r="scorers"===a?s.goals:s.assists,o=0===t?"gold":1===t?"silver":2===t?"bronze":"";return e.jsxs(l.div,{className:`stat-card ${o}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:[e.jsx("div",{className:"stat-position",children:t<3?e.jsx("div",{className:"medal-icon",children:e.jsx("i",{className:`fas fa-medal ${o}`})}):e.jsx("span",{className:"position-number",children:t+1})}),e.jsxs("div",{className:"stat-player-info",children:[e.jsx("div",{className:"player-name",children:s.player_name}),e.jsxs("div",{className:"player-team",children:[e.jsx("img",{src:(null==(i=s.team)?void 0:i.crest_url)||"/assets/data/open-age/team-logos/default.png",alt:null==(n=s.team)?void 0:n.name,className:"team-crest-mini",loading:"lazy",onError:s=>{s.target.src="/assets/data/open-age/team-logos/default.png"}}),e.jsx("span",{children:(null==(c=s.team)?void 0:c.name)||"Unknown"})]})]}),e.jsxs("div",{className:"stat-value",children:[e.jsx("span",{className:"value-number",children:r}),e.jsx("span",{className:"value-label",children:"scorers"===a?"Goals":"Assists"})]})]},`${s.player_name}-${t}`)})});return e.jsxs("div",{className:"statistics-container",children:[e.jsxs("div",{className:"stats-tab-selector",children:[e.jsxs("button",{className:"stats-tab-btn "+("scorers"===i?"active":""),onClick:()=>n("scorers"),children:[e.jsx("i",{className:"fas fa-futbol"}),"Top Scorers"]}),e.jsxs("button",{className:"stats-tab-btn "+("assists"===i?"active":""),onClick:()=>n("assists"),children:[e.jsx("i",{className:"fas fa-hands-helping"}),"Top Assists"]})]}),e.jsx("div",{className:"stats-content",children:m?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading statistics..."})]}):e.jsxs(e.Fragment,{children:["scorers"===i&&u(c,"scorers"),"assists"===i&&u(o,"assists")]})})]})}const x="2026"===((null==(s=window.location.pathname.match(/\/muqawamah\/(\d{4})\//))?void 0:s[1])||"2025")?function(){const s=window.location.pathname.includes("/u17/")?"u17":"open-age",[i,n]=a.useState(s),[o,d]=a.useState("standings"),[x,u]=a.useState([]),[j,p]=a.useState([]),[g,N]=a.useState(!0),f="2026";a.useEffect(()=>{v();const s=t.channel("tournament_2026_updates").on("postgres_changes",{event:"*",schema:"public",table:"teams",filter:`category=eq.${i}`},()=>{v()}).on("postgres_changes",{event:"*",schema:"public",table:"matches",filter:`category=eq.${i}`},()=>{v()}).subscribe();return()=>s.unsubscribe()},[i]);const v=async()=>{N(!0);try{const{data:s,error:a}=await t.from("teams").select("*").eq("category",i).order("points",{ascending:!1}).order("goals_for",{ascending:!1}).order("goals_against",{ascending:!0});if(a)throw a;const e=(s||[]).map(s=>({...s,gd:s.goals_for-s.goals_against})),{data:n,error:l}=await t.from("matches").select("\n          *,\n          home_team:home_team_id(id, name, crest_url),\n          away_team:away_team_id(id, name, crest_url)\n        ").eq("category",i).order("match_date",{ascending:!0}).order("scheduled_time",{ascending:!0});u(e),p(n||[])}catch(s){}finally{N(!1)}},y=s=>{n(s);const a=`/muqawamah/${f}/${s}/`;window.history.pushState({},"",a)};return e.jsxs("div",{className:"tournament-page",children:[e.jsxs("div",{className:"tournament-header",children:[e.jsxs("a",{href:`/muqawamah/${f}/`,className:"back-button",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("span",{children:"Back to Muqawama"})]}),e.jsxs("div",{className:"tournament-title",children:[e.jsxs("h1",{children:["MUQAWAMA ",f]}),e.jsx("p",{children:"Live Tournament Standings & Fixtures"})]}),e.jsxs("div",{className:"category-selector-tournament",children:[e.jsxs("button",{className:"category-btn "+("open-age"===i?"active":""),onClick:()=>y("open-age"),children:[e.jsx("i",{className:"fas fa-users"}),"Open Age"]}),e.jsxs("button",{className:"category-btn "+("u17"===i?"active":""),onClick:()=>y("u17"),children:[e.jsx("i",{className:"fas fa-user-friends"}),"U17"]})]})]}),e.jsxs("div",{className:"tab-navigation-tournament",children:[e.jsxs("button",{className:"tab-btn "+("standings"===o?"active":""),onClick:()=>d("standings"),children:[e.jsx("i",{className:"fas fa-trophy"}),e.jsx("span",{children:"Standings"})]}),e.jsxs("button",{className:"tab-btn "+("fixtures"===o?"active":""),onClick:()=>d("fixtures"),children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:"Fixtures & Results"})]}),e.jsxs("button",{className:"tab-btn "+("stats"===o?"active":""),onClick:()=>d("stats"),children:[e.jsx("i",{className:"fas fa-chart-bar"}),e.jsx("span",{children:"Statistics"})]})]}),e.jsx(c,{mode:"wait",children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"tournament-content",children:g?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading tournament data..."})]}):e.jsxs(e.Fragment,{children:["standings"===o&&e.jsx(e.Fragment,{children:0===x.length?e.jsxs("div",{className:"empty-state",children:[e.jsx("i",{className:"fas fa-users-slash"}),e.jsx("h3",{children:"No Teams Yet"}),e.jsx("p",{children:"Teams will appear here as they register and get confirmed for the tournament."}),e.jsx("a",{href:`/muqawamah/${f}/register/`,className:"register-btn",children:"Register Your Team"})]}):e.jsx(r,{teams:x,category:i})}),"fixtures"===o&&e.jsx(e.Fragment,{children:0===j.length?e.jsxs("div",{className:"empty-state",children:[e.jsx("i",{className:"fas fa-calendar-times"}),e.jsx("h3",{children:"Fixtures Coming Soon"}),e.jsx("p",{children:"Match fixtures will be published once all teams are confirmed."})]}):e.jsx(m,{fixtures:j})}),"stats"===o&&e.jsx(e.Fragment,{children:0===x.length?e.jsxs("div",{className:"empty-state",children:[e.jsx("i",{className:"fas fa-chart-line"}),e.jsx("h3",{children:"Statistics Coming Soon"}),e.jsx("p",{children:"Player and team statistics will be available once matches begin."})]}):e.jsx(h,{category:i})})]})},`${i}-${o}`)})]})}:function(){var s;const t=window.location.pathname.includes("/u17/")?"u17":"open-age",[i,n]=a.useState(t),[o,d]=a.useState("standings"),[x,u]=a.useState([]),[j,p]=a.useState([]),[g,N]=a.useState(!0),f=(null==(s=window.location.pathname.match(/\/muqawamah\/(\d{4})\//))?void 0:s[1])||"2025";a.useEffect(()=>{if(v(),window.supabaseClient){const s=window.supabaseClient.channel("tournament_updates").on("postgres_changes",{event:"*",schema:"public",table:"teams"},()=>v()).subscribe();return()=>s.unsubscribe()}},[i]);const v=async()=>{N(!0);try{if(!window.supabaseClient)return void N(!1);const{data:s,error:a}=await window.supabaseClient.from("teams").select("*").eq("category",i).order("points",{ascending:!1}).order("gd",{ascending:!1});if(a)throw a;const{data:e,error:t}=await window.supabaseClient.from("fixtures").select("\n          *,\n          home_team:teams!fixtures_home_team_id_fkey(id, name, crest_url),\n          away_team:teams!fixtures_away_team_id_fkey(id, name, crest_url)\n        ").eq("category",i).order("match_time",{ascending:!0});if(t)throw t;u(s||[]),p(e||[])}catch(s){}finally{N(!1)}},y=s=>{n(s);const a=`/muqawamah/${f}/${s}/`;window.history.pushState({},"",a)};return e.jsxs("div",{className:"tournament-page",children:[e.jsxs("div",{className:"tournament-header",children:[e.jsxs("a",{href:`/muqawamah/${f}/`,className:"back-button",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("span",{children:"Back to Muqawama"})]}),e.jsxs("div",{className:"tournament-title",children:[e.jsxs("h1",{children:["MUQAWAMA ",f]}),e.jsx("p",{children:"Tournament Results & Statistics"})]}),e.jsxs("div",{className:"category-selector-tournament",children:[e.jsxs("button",{className:"category-btn "+("open-age"===i?"active":""),onClick:()=>y("open-age"),children:[e.jsx("i",{className:"fas fa-users"}),"Open Age"]}),e.jsxs("button",{className:"category-btn "+("u17"===i?"active":""),onClick:()=>y("u17"),children:[e.jsx("i",{className:"fas fa-user-friends"}),"U17"]})]})]}),e.jsxs("div",{className:"tab-navigation-tournament",children:[e.jsxs("button",{className:"tab-btn "+("standings"===o?"active":""),onClick:()=>d("standings"),children:[e.jsx("i",{className:"fas fa-trophy"}),e.jsx("span",{children:"Standings"})]}),e.jsxs("button",{className:"tab-btn "+("fixtures"===o?"active":""),onClick:()=>d("fixtures"),children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:"Fixtures & Results"})]}),e.jsxs("button",{className:"tab-btn "+("stats"===o?"active":""),onClick:()=>d("stats"),children:[e.jsx("i",{className:"fas fa-chart-bar"}),e.jsx("span",{children:"Statistics"})]})]}),e.jsx(c,{mode:"wait",children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"tournament-content",children:g?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading tournament data..."})]}):e.jsxs(e.Fragment,{children:["standings"===o&&e.jsx(r,{teams:x,category:i}),"fixtures"===o&&e.jsx(m,{fixtures:j}),"stats"===o&&e.jsx(h,{category:i})]})},`${i}-${o}`)})]})};i.createRoot(document.getElementById("tournament-root")).render(e.jsx(n.StrictMode,{children:e.jsx(x,{})}));
