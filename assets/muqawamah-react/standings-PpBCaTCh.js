import{r as s,s as a,j as e,c as l,R as t}from"./supabaseClient-Bdusv2SU.js";import{T as n}from"./TournamentNavbar-BcAhqk4i.js";import{F as i}from"./Footer-YZurjJeH.js";function c(){const[l,t]=s.useState([]),[c,o]=s.useState(!0),[d]=s.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");s.useEffect(()=>{r();const s=a.channel("standings_changes").on("postgres_changes",{event:"*",schema:"public",table:"teams"},()=>{r()}).subscribe();return()=>{s.unsubscribe()}},[]);const r=async()=>{try{const{data:s,error:e}=await a.from("teams").select("*").eq("category",d).order("points",{ascending:!1}).order("goals_for",{ascending:!1}).order("goals_against",{ascending:!0});if(e)throw e;const l=s.map((s,a)=>({...s,position:a+1,goal_difference:(s.goals_for||0)-(s.goals_against||0)}));t(l)}catch(s){}finally{o(!1)}};return c?e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx("div",{className:"standings-loading",children:e.jsxs("div",{className:"standings-loading-content",children:[e.jsxs("div",{className:"logo-loader",children:[e.jsx("div",{className:"logo-ring"}),e.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),e.jsx("p",{children:"Loading standings..."})]})}),e.jsx(i,{edition:"2026"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx("div",{className:"standings-page",children:e.jsxs("div",{className:"standings-page-container",children:[e.jsx("h1",{className:"standings-page-title",children:"STANDINGS"}),e.jsxs("div",{className:"standings-table-wrapper",children:[e.jsxs("table",{className:"standings-table-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"col-position",children:"#"}),e.jsx("th",{className:"col-team-full",children:"TEAM"}),e.jsx("th",{className:"col-stat",children:"P"}),e.jsx("th",{className:"col-stat",children:"W"}),e.jsx("th",{className:"col-stat",children:"D"}),e.jsx("th",{className:"col-stat",children:"L"}),e.jsx("th",{className:"col-stat hide-mobile",children:"GF"}),e.jsx("th",{className:"col-stat hide-mobile",children:"GA"}),e.jsx("th",{className:"col-stat",children:"GD"}),e.jsx("th",{className:"col-points",children:"PTS"})]})}),e.jsx("tbody",{children:l.map(s=>{var a;return e.jsxs("tr",{className:"standings-table-row",onClick:()=>{return a=s.id,void(window.location.href=`/muqawamah/2026/${d}/teams/?team=${a}`);var a},children:[e.jsx("td",{className:"col-position",children:e.jsx("span",{className:`position-badge position-${s.position}`,children:s.position})}),e.jsx("td",{className:"col-team-full",children:e.jsxs("div",{className:"team-cell-full",children:[e.jsx("div",{className:"team-logo-standings",children:s.crest_url?e.jsx("img",{src:s.crest_url,alt:s.name,loading:"lazy"}):e.jsx("span",{children:(null==(a=s.name)?void 0:a.charAt(0))||"?"})}),e.jsx("span",{className:"team-name-full",children:s.name})]})}),e.jsx("td",{className:"col-stat",children:s.played||0}),e.jsx("td",{className:"col-stat stat-wins",children:s.won||0}),e.jsx("td",{className:"col-stat stat-draws",children:s.drawn||0}),e.jsx("td",{className:"col-stat stat-losses",children:s.lost||0}),e.jsx("td",{className:"col-stat hide-mobile",children:s.goals_for||0}),e.jsx("td",{className:"col-stat hide-mobile",children:s.goals_against||0}),e.jsx("td",{className:"col-stat",children:e.jsxs("span",{className:s.goal_difference>=0?"gd-positive":"gd-negative",children:[s.goal_difference>=0?"+":"",s.goal_difference]})}),e.jsx("td",{className:"col-points",children:e.jsx("span",{className:"points-value",children:s.points||0})})]},s.id)})})]}),0===l.length&&e.jsxs("div",{className:"no-standings",children:[e.jsx("i",{className:"fas fa-table"}),e.jsx("p",{children:"No standings available yet"})]})]})]})}),e.jsx(i,{edition:"2026"})]})}l.createRoot(document.getElementById("standings-root")).render(e.jsx(t.StrictMode,{children:e.jsx(c,{})}));
