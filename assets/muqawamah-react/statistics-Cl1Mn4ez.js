import{r as s,s as a,j as e,c as i,R as t}from"./supabaseClient-Bdusv2SU.js";import{T as l}from"./TournamentNavbar-D2cgzQdF.js";import{F as r}from"./Footer-YZurjJeH.js";function n(){const[i,t]=s.useState("goals"),[n,c]=s.useState({goals:[],assists:[]}),[o,d]=s.useState([]),[m,h]=s.useState(!0),[g]=s.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");s.useEffect(()=>{j()},[g]);const j=async()=>{try{h(!0);const{data:s}=await a.from("matches").select("id").eq("category",g),e=(s||[]).map(s=>s.id),{data:i}=await a.from("goals").select("\n          scorer_id,\n          assister_id,\n          team_id,\n          scorer:team_players!goals_scorer_id_fkey(id, player_name, player_image, team_id, team_registrations(team_name, team_logo)),\n          assister:team_players!goals_assister_id_fkey(id, player_name, player_image, team_id, team_registrations(team_name, team_logo))\n        ").in("match_id",e),t={},l={};(i||[]).forEach(s=>{var a,e;(null==(a=s.scorer)?void 0:a.id)&&(t[s.scorer.id]||(t[s.scorer.id]={id:s.scorer.id,player_name:s.scorer.player_name,player_image:s.scorer.player_image,team_registrations:s.scorer.team_registrations,goals:0}),t[s.scorer.id].goals+=1),(null==(e=s.assister)?void 0:e.id)&&(l[s.assister.id]||(l[s.assister.id]={id:s.assister.id,player_name:s.assister.player_name,player_image:s.assister.player_image,team_registrations:s.assister.team_registrations,assists:0}),l[s.assister.id].assists+=1)});const r=Object.values(t).sort((s,a)=>a.goals-s.goals).slice(0,10),n=Object.values(l).sort((s,a)=>a.assists-s.assists).slice(0,10);c({goals:r,assists:n});const{data:o}=await a.from("teams").select("*").eq("category",g).order("goals_for",{ascending:!1});o&&d(o.slice(0,10))}catch(s){}finally{h(!1)}};if(m)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"stats-page-v2 stats-loading-v2",children:e.jsxs("div",{className:"stats-loading-content",children:[e.jsxs("div",{className:"logo-loader",children:[e.jsx("div",{className:"logo-ring"}),e.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"logo-pulse"})]}),e.jsx("p",{children:"Loading statistics..."})]})}),e.jsx(r,{edition:"2026"})]});const v=(s,a)=>e.jsx("div",{className:"leaderboard-v2",children:s.length>0?s.map((s,i)=>{var t,l;return e.jsxs("div",{className:"leaderboard-row-v2 "+(0===i?"top-player":""),onClick:()=>(s=>{const a="u17"===g?"/muqawamah/2026/u17":"/muqawamah/2026/open-age";window.location.href=`${a}/players/?player=${s}`})(s.id),children:[e.jsx("div",{className:"rank-cell-v2",children:e.jsx("span",{className:"rank-number "+(i<3?"rank-top":""),children:i+1})}),e.jsx("div",{className:"player-photo-v2",children:s.player_image?e.jsx("img",{src:s.player_image,alt:s.player_name}):e.jsx("div",{className:"photo-placeholder",children:e.jsx("i",{className:"fas fa-user"})})}),e.jsxs("div",{className:"player-info-v2",children:[e.jsx("span",{className:"player-name-v2",children:s.player_name}),e.jsxs("div",{className:"team-info-v2",children:[(null==(t=s.team_registrations)?void 0:t.team_logo)&&e.jsx("img",{src:s.team_registrations.team_logo,alt:"",className:"mini-team-logo"}),e.jsx("span",{className:"team-name-mini",children:(null==(l=s.team_registrations)?void 0:l.team_name)||"N/A"})]})]}),e.jsx("div",{className:"stat-value-v2",children:e.jsx("span",{className:"stat-number",children:"goals"===a?s.goals||0:s.assists||0})})]},s.id)}):e.jsxs("div",{className:"no-data-v2",children:[e.jsx("i",{className:"fas fa-chart-bar"}),e.jsx("p",{children:"No statistics available yet"})]})});return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"stats-page-v2",children:e.jsxs("div",{className:"stats-container-v2",children:[e.jsxs("div",{className:"stats-header-v2",children:[e.jsx("h1",{children:"Statistics"}),e.jsx("hr",{className:"stats-divider"})]}),e.jsx("div",{className:"stats-tabs-v2",children:[{id:"goals",label:"TOP SCORERS",icon:"fa-futbol"},{id:"assists",label:"TOP ASSISTS",icon:"fa-hands-helping"},{id:"teams",label:"TEAM STATS",icon:"fa-shield-alt"}].map(s=>e.jsxs("button",{className:"stats-tab-v2 "+(i===s.id?"active":""),onClick:()=>t(s.id),children:[e.jsx("i",{className:`fas ${s.icon}`}),e.jsx("span",{children:s.label})]},s.id))}),e.jsxs("div",{className:"stats-content-v2",children:["goals"===i&&e.jsxs("div",{className:"stats-section-v2",children:[e.jsxs("div",{className:"section-header-v2",children:[e.jsx("h2",{children:"Top Scorers"}),e.jsx("span",{className:"section-subtitle",children:"Players with most goals"})]}),v(n.goals,"goals")]}),"assists"===i&&e.jsxs("div",{className:"stats-section-v2",children:[e.jsxs("div",{className:"section-header-v2",children:[e.jsx("h2",{children:"Top Assists"}),e.jsx("span",{className:"section-subtitle",children:"Players with most assists"})]}),v(n.assists,"assists")]}),"teams"===i&&e.jsxs("div",{className:"stats-section-v2",children:[e.jsxs("div",{className:"section-header-v2",children:[e.jsx("h2",{children:"Team Statistics"}),e.jsx("span",{className:"section-subtitle",children:"Goals scored and conceded"})]}),e.jsx("div",{className:"leaderboard-v2 team-leaderboard",children:o.length>0?o.map((s,a)=>{var i;return e.jsxs("div",{className:"leaderboard-row-v2 team-row "+(0===a?"top-team":""),onClick:()=>(s=>{const a="u17"===g?"/muqawamah/2026/u17":"/muqawamah/2026/open-age";window.location.href=`${a}/teams/?team=${s}`})(s.id),children:[e.jsx("div",{className:"rank-cell-v2",children:e.jsx("span",{className:"rank-number "+(a<3?"rank-top":""),children:a+1})}),e.jsx("div",{className:"team-logo-v2",children:s.crest_url?e.jsx("img",{src:s.crest_url,alt:s.name}):e.jsx("div",{className:"logo-placeholder",children:e.jsx("span",{children:(null==(i=s.name)?void 0:i.charAt(0))||"?"})})}),e.jsx("div",{className:"team-info-main-v2",children:e.jsx("span",{className:"team-name-v2",children:s.name})}),e.jsxs("div",{className:"team-stats-row",children:[e.jsxs("div",{className:"team-stat-cell",children:[e.jsx("span",{className:"stat-label-mini",children:"GF"}),e.jsx("span",{className:"stat-num",children:s.goals_for||0})]}),e.jsxs("div",{className:"team-stat-cell",children:[e.jsx("span",{className:"stat-label-mini",children:"GA"}),e.jsx("span",{className:"stat-num",children:s.goals_against||0})]}),e.jsxs("div",{className:"team-stat-cell gd-cell",children:[e.jsx("span",{className:"stat-label-mini",children:"GD"}),e.jsxs("span",{className:"stat-num "+(s.goals_for-s.goals_against>=0?"positive":"negative"),children:[(s.goals_for||0)-(s.goals_against||0)>=0?"+":"",(s.goals_for||0)-(s.goals_against||0)]})]})]})]},s.id)}):e.jsxs("div",{className:"no-data-v2",children:[e.jsx("i",{className:"fas fa-shield-alt"}),e.jsx("p",{children:"No team statistics available yet"})]})})]})]})]})}),e.jsx(r,{edition:"2026"})]})}i.createRoot(document.getElementById("statistics-root")).render(e.jsx(t.StrictMode,{children:e.jsx(n,{})}));
