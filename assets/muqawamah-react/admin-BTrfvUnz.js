import{s as e,r as a,j as s,a as t}from"./supabaseClient-Bdusv2SU.js";const l=["admin@sio-abulfazal.org"],i="/muqawamah/admin",n="/muqawamah/admin/registrations",r="/muqawamah/admin/players",c="/muqawamah/admin/teams",d="/muqawamah/admin/fixtures",o="/muqawamah/admin/matches",m="/muqawamah/admin/goals",h="/muqawamah/admin/statistics",x="/muqawamah/admin/settings",u=[{value:"submitted",label:"Submitted",color:"#fbbf24"},{value:"pending_payment",label:"Pending Payment",color:"#f59e0b"},{value:"confirmed",label:"Confirmed",color:"#10b981"},{value:"cancelled",label:"Cancelled",color:"#ef4444"}],j=["GK","CB","LB","RB","CDM","CM","CAM","LM","RM","CF","ST"];function p({children:t}){const[i,n]=a.useState(null),[r,c]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const a=await(async()=>{var a;try{const{data:{user:s},error:t}=await e.auth.getUser();return!(t||!s)&&l.includes(null==(a=s.email)?void 0:a.toLowerCase())}catch(s){return!1}})();n(a),a||(alert("⚠️ Access Denied: You do not have admin privileges. Only authorized super admins can access this area."),window.location.href="/muqawamah/")}catch(a){alert("⚠️ Authentication Error: Unable to verify admin access."),window.location.href="/muqawamah/"}finally{c(!1)}})()},[]),r?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Verifying admin access..."})]}):i?s.jsx(s.Fragment,{children:t}):s.jsxs("div",{className:"admin-unauthorized",children:[s.jsx("i",{className:"fas fa-lock"}),s.jsx("h2",{children:"Unauthorized Access"}),s.jsx("p",{children:"You don't have permission to access this page."})]})}function g(){const[e,t]=a.useState(window.location.pathname),l=[{icon:"fas fa-tachometer-alt",label:"Dashboard",path:i},{icon:"fas fa-file-alt",label:"Registrations",path:n},{icon:"fas fa-users",label:"Players",path:r},{icon:"fas fa-shield-alt",label:"Teams",path:c},{icon:"fas fa-calendar-alt",label:"Fixtures",path:d},{icon:"fas fa-futbol",label:"Matches",path:o},{icon:"fas fa-trophy",label:"Goals & Stats",path:m},{icon:"fas fa-chart-bar",label:"Statistics",path:h},{icon:"fas fa-cog",label:"Settings",path:x}];return s.jsxs("aside",{className:"admin-sidebar",children:[s.jsxs("div",{className:"admin-sidebar-header",children:[s.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama Admin",className:"admin-logo"}),s.jsx("h2",{className:"admin-brand",children:"Muqawama Admin"})]}),s.jsx("nav",{className:"admin-nav",children:l.map(a=>s.jsxs("button",{className:"admin-nav-item "+(e===a.path?"active":""),onClick:()=>{return e=a.path,t(e),void(window.location.href=e);var e},children:[s.jsx("i",{className:a.icon}),s.jsx("span",{children:a.label})]},a.path))}),s.jsx("div",{className:"admin-sidebar-footer",children:s.jsxs("div",{className:"admin-user-info",children:[s.jsx("i",{className:"fas fa-user-shield"}),s.jsx("span",{children:"Super Admin"})]})})]})}function f({title:t}){const[l,i]=a.useState(null);a.useEffect(()=>{(async()=>{const{data:{user:a}}=await e.auth.getUser();i(a)})()},[]);return s.jsxs("header",{className:"admin-header",children:[s.jsx("div",{className:"admin-header-left",children:s.jsx("h1",{className:"admin-page-title",children:t})}),s.jsx("div",{className:"admin-header-right",children:s.jsxs("div",{className:"admin-user-menu",children:[s.jsx("div",{className:"admin-user-avatar",children:s.jsx("i",{className:"fas fa-user-circle"})}),s.jsxs("div",{className:"admin-user-details",children:[s.jsx("span",{className:"admin-user-email",children:null==l?void 0:l.email}),s.jsx("span",{className:"admin-user-role",children:"Super Admin"})]}),s.jsx("button",{className:"admin-logout-btn",onClick:async()=>{await e.auth.signOut(),window.location.href="/muqawamah/"},title:"Logout",children:s.jsx("i",{className:"fas fa-sign-out-alt"})})]})})]})}function v({children:e,title:a="Admin Dashboard"}){return s.jsxs("div",{className:"admin-layout",children:[s.jsx(g,{}),s.jsxs("div",{className:"admin-main",children:[s.jsx(f,{title:a}),s.jsx("main",{className:"admin-content",children:e})]})]})}function y(){const[t,l]=a.useState({totalRegistrations:0,confirmedTeams:0,totalPlayers:0,pendingPayments:0,upcomingMatches:0,totalGoals:0}),[i,n]=a.useState(!0);a.useEffect(()=>{r()},[]);const r=async()=>{try{const{count:a}=await e.from("team_registrations").select("*",{count:"exact",head:!0}),{count:s}=await e.from("team_registrations").select("*",{count:"exact",head:!0}).eq("status","confirmed"),{count:t}=await e.from("team_registrations").select("*",{count:"exact",head:!0}).eq("status","pending_payment"),{count:i}=await e.from("team_players").select("*",{count:"exact",head:!0}),{count:n}=await e.from("matches").select("*",{count:"exact",head:!0}).gte("match_date",(new Date).toISOString()),{count:r}=await e.from("goals").select("*",{count:"exact",head:!0});l({totalRegistrations:a||0,confirmedTeams:s||0,totalPlayers:i||0,pendingPayments:t||0,upcomingMatches:n||0,totalGoals:r||0})}catch(a){}finally{n(!1)}},c=[{title:"Total Registrations",value:t.totalRegistrations,icon:"fas fa-file-alt",color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.1)",link:"/muqawamah/admin/registrations"},{title:"Confirmed Teams",value:t.confirmedTeams,icon:"fas fa-check-circle",color:"#10b981",bgColor:"rgba(16, 185, 129, 0.1)",link:"/muqawamah/admin/teams"},{title:"Total Players",value:t.totalPlayers,icon:"fas fa-users",color:"#ec4899",bgColor:"rgba(236, 72, 153, 0.1)",link:"/muqawamah/admin/players"},{title:"Pending Payments",value:t.pendingPayments,icon:"fas fa-clock",color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.1)",link:"/muqawamah/admin/registrations?status=pending_payment"},{title:"Upcoming Matches",value:t.upcomingMatches,icon:"fas fa-calendar-alt",color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.1)",link:"/muqawamah/admin/fixtures"},{title:"Total Goals",value:t.totalGoals,icon:"fas fa-trophy",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",link:"/muqawamah/admin/goals"}];return s.jsx(v,{title:"Dashboard",children:i?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading dashboard..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"admin-stats-grid",children:c.map((e,a)=>s.jsxs("a",{href:e.link,className:"admin-stat-card clean",children:[s.jsx("div",{className:"stat-icon-wrapper",style:{backgroundColor:e.bgColor},children:s.jsx("i",{className:e.icon,style:{color:e.color}})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{className:"stat-title",children:e.title}),s.jsx("p",{className:"stat-value",children:e.value})]})]},a))}),s.jsxs("div",{className:"admin-dashboard-bottom",children:[s.jsxs("div",{className:"admin-quick-actions-clean",children:[s.jsx("h2",{className:"section-title-clean",children:"Quick Actions"}),s.jsxs("div",{className:"quick-actions-list",children:[s.jsxs("a",{href:"/muqawamah/admin/registrations",className:"quick-action-item",children:[s.jsx("div",{className:"action-icon",style:{backgroundColor:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:s.jsx("i",{className:"fas fa-eye"})}),s.jsx("span",{children:"View Registrations"}),s.jsx("i",{className:"fas fa-chevron-right action-arrow"})]}),s.jsxs("a",{href:"/muqawamah/admin/fixtures",className:"quick-action-item",children:[s.jsx("div",{className:"action-icon",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:s.jsx("i",{className:"fas fa-plus"})}),s.jsx("span",{children:"Create Fixture"}),s.jsx("i",{className:"fas fa-chevron-right action-arrow"})]}),s.jsxs("a",{href:"/muqawamah/admin/matches",className:"quick-action-item",children:[s.jsx("div",{className:"action-icon",style:{backgroundColor:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:s.jsx("i",{className:"fas fa-edit"})}),s.jsx("span",{children:"Record Match Result"}),s.jsx("i",{className:"fas fa-chevron-right action-arrow"})]}),s.jsxs("a",{href:"/muqawamah/admin/teams",className:"quick-action-item",children:[s.jsx("div",{className:"action-icon",style:{backgroundColor:"rgba(236, 72, 153, 0.1)",color:"#ec4899"},children:s.jsx("i",{className:"fas fa-shield-alt"})}),s.jsx("span",{children:"Manage Teams"}),s.jsx("i",{className:"fas fa-chevron-right action-arrow"})]})]})]}),s.jsxs("div",{className:"admin-recent-activity",children:[s.jsx("h2",{className:"section-title-clean",children:"Recent Activity"}),s.jsxs("div",{className:"activity-list",children:[s.jsxs("div",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon",style:{backgroundColor:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:s.jsx("i",{className:"fas fa-check"})}),s.jsxs("div",{className:"activity-details",children:[s.jsx("p",{className:"activity-title",children:"Team Registration Confirmed"}),s.jsx("p",{className:"activity-time",children:"2 hours ago"})]})]}),s.jsxs("div",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:s.jsx("i",{className:"fas fa-calendar"})}),s.jsxs("div",{className:"activity-details",children:[s.jsx("p",{className:"activity-title",children:"New Match Scheduled"}),s.jsx("p",{className:"activity-time",children:"5 hours ago"})]})]}),s.jsxs("div",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},children:s.jsx("i",{className:"fas fa-futbol"})}),s.jsxs("div",{className:"activity-details",children:[s.jsx("p",{className:"activity-title",children:"Match Result Recorded"}),s.jsx("p",{className:"activity-time",children:"1 day ago"})]})]})]})]})]})]})})}function N(){var t,l;const[i,n]=a.useState([]),[r,c]=a.useState(!0),[d,o]=a.useState("all"),[m,h]=a.useState(""),[x,j]=a.useState(null),[p,g]=a.useState(!1),[f,y]=a.useState({});a.useEffect(()=>{_(),N()},[d]);const N=async()=>{try{const{data:a,error:s}=await e.from("teams").select("registration_id");if(s)throw s;const t={};null==a||a.forEach(e=>{e.registration_id&&(t[e.registration_id]=!0)}),y(t)}catch(a){}},_=async()=>{try{c(!0);let a=e.from("team_registrations").select("*, team_players(count)").order("created_at",{ascending:!1});"all"!==d&&(a=a.eq("status",d));const{data:s,error:t}=await a;if(t)throw t;n(s||[])}catch(a){alert("Failed to load registrations")}finally{c(!1)}},b=async a=>{if(f[a.id])alert(`ℹ️ "${a.team_name}" is already in the tournament!`);else if(confirm(`Add "${a.team_name}" to the tournament?\n\nThis will create an entry in the teams table for fixtures and standings.`))try{const{data:s}=await e.from("teams").select("id").eq("registration_id",a.id).single();if(s)return alert("This team is already in the tournament!"),void N();const{error:t}=await e.from("teams").insert({name:a.team_name,crest_url:a.team_logo,captain:a.captain_name,category:a.category,formation:a.formation,registration_id:a.id});if(t)throw t;alert(`✅ "${a.team_name}" added to tournament successfully!\n\nYou can now create fixtures and matches for this team.`),N()}catch(s){alert("Failed to add team to tournament: "+s.message)}},w=i.filter(e=>{var a,s,t;return(null==(a=e.team_name)?void 0:a.toLowerCase().includes(m.toLowerCase()))||(null==(s=e.captain_name)?void 0:s.toLowerCase().includes(m.toLowerCase()))||(null==(t=e.captain_email)?void 0:t.toLowerCase().includes(m.toLowerCase()))}),C=e=>{const a=u.find(a=>a.value===e);return s.jsx("span",{className:"status-badge",style:{backgroundColor:(null==a?void 0:a.color)||"#6b7280"},children:(null==a?void 0:a.label)||e})};return s.jsxs(v,{title:"Registrations Management",children:[s.jsxs("div",{className:"admin-page-header",children:[s.jsx("div",{className:"page-header-left",children:s.jsxs("button",{className:"refresh-btn",onClick:_,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]})}),s.jsx("div",{className:"page-header-right",children:s.jsxs("div",{className:"search-box",children:[s.jsx("i",{className:"fas fa-search"}),s.jsx("input",{type:"text",placeholder:"Search by team, captain, or email...",value:m,onChange:e=>h(e.target.value)})]})})]}),s.jsxs("div",{className:"filter-tabs",children:[s.jsxs("button",{className:"filter-tab "+("all"===d?"active":""),onClick:()=>o("all"),children:["All (",i.length,")"]}),u.map(e=>s.jsx("button",{className:"filter-tab "+(d===e.value?"active":""),onClick:()=>o(e.value),children:e.label},e.value))]}),r?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading registrations..."})]}):s.jsx("div",{className:"admin-table-container",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Team Name"}),s.jsx("th",{children:"Captain"}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Players"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Created"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===w.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:"7",style:{textAlign:"center",padding:"40px"},children:[s.jsx("i",{className:"fas fa-inbox",style:{fontSize:"3rem",color:"#ccc"}}),s.jsx("p",{children:"No registrations found"})]})}):w.map(a=>{var t,l;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[a.team_logo&&s.jsx("img",{src:a.team_logo,alt:"",className:"team-logo-small"}),s.jsx("strong",{children:a.team_name})]})}),s.jsxs("td",{children:[s.jsx("div",{children:a.captain_name}),s.jsx("small",{style:{color:"#6b7280"},children:a.captain_email})]}),s.jsx("td",{children:s.jsx("span",{className:"category-badge",children:a.category})}),s.jsxs("td",{children:[(null==(l=null==(t=a.team_players)?void 0:t[0])?void 0:l.count)||0," players"]}),s.jsx("td",{children:C(a.status)}),s.jsx("td",{children:new Date(a.created_at).toLocaleDateString()}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{className:"btn-icon btn-view",onClick:()=>(async a=>{try{const{data:s,error:t}=await e.from("team_registrations").select("*, team_players(*)").eq("id",a).single();if(t)throw t;j(s),g(!0)}catch(s){alert("Failed to load details")}})(a.id),title:"View Details",children:s.jsx("i",{className:"fas fa-eye"})}),"confirmed"===a.status&&(f[a.id]?s.jsx("button",{className:"btn-icon btn-tournament-added",disabled:!0,title:"Already in Tournament",children:s.jsx("i",{className:"fas fa-check-circle"})}):s.jsx("button",{className:"btn-icon btn-tournament",onClick:e=>{e.stopPropagation(),b(a)},title:"Add to Tournament",children:s.jsx("i",{className:"fas fa-trophy"})})),s.jsx("button",{className:"btn-icon btn-delete",onClick:()=>(async a=>{if(confirm("Are you sure you want to delete this registration? This will also delete all associated players."))try{await e.from("team_players").delete().eq("team_id",a);const{error:s}=await e.from("team_registrations").delete().eq("id",a);if(s)throw s;alert("Registration deleted successfully!"),_()}catch(s){alert("Failed to delete registration")}})(a.id),title:"Delete",children:s.jsx("i",{className:"fas fa-trash"})})]})})]},a.id)})})]})}),p&&x&&s.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Registration Details"}),s.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"detail-section",children:[s.jsx("h3",{children:"Team Information"}),s.jsxs("div",{className:"detail-grid",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Team Name:"}),s.jsx("span",{children:x.team_name})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Category:"}),s.jsx("span",{children:x.category})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Formation:"}),s.jsx("span",{children:x.formation})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Status:"}),C(x.status)]})]})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("h3",{children:"Captain Information"}),s.jsxs("div",{className:"detail-grid",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Name:"}),s.jsx("span",{children:x.captain_name})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Email:"}),s.jsx("span",{children:x.captain_email})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Phone:"}),s.jsx("span",{children:x.captain_phone})]})]})]}),s.jsxs("div",{className:"detail-section",children:[s.jsxs("h3",{children:["Players (",(null==(t=x.team_players)?void 0:t.length)||0,")"]}),s.jsx("div",{className:"players-list",children:null==(l=x.team_players)?void 0:l.map((e,a)=>s.jsxs("div",{className:"player-item",children:[e.player_image&&s.jsx("img",{src:e.player_image,alt:"",className:"player-image-small"}),s.jsxs("div",{children:[s.jsx("strong",{children:e.player_name}),s.jsxs("small",{children:[e.position," ",e.is_substitute&&"(SUB)"]})]})]},a))})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("h3",{children:"Change Status"}),s.jsx("div",{className:"status-buttons",children:u.map(a=>s.jsx("button",{className:"status-btn "+(x.status===a.value?"active":""),style:{borderColor:a.color},onClick:()=>{(async(a,s)=>{try{const{error:t}=await e.from("team_registrations").update({status:s,confirmed_at:"confirmed"===s?(new Date).toISOString():null}).eq("id",a);if(t)throw t;alert("Status updated successfully!"),_()}catch(t){alert("Failed to update status")}})(x.id,a.value),g(!1)},children:a.label},a.value))})]}),"confirmed"===x.status&&s.jsxs("div",{className:"detail-section",children:[s.jsx("h3",{children:"Tournament Actions"}),s.jsxs("button",{className:"btn-primary tournament-add-btn",onClick:()=>b(x),children:[s.jsx("i",{className:"fas fa-trophy"})," Add to Tournament"]}),s.jsxs("p",{className:"help-text",children:[s.jsx("i",{className:"fas fa-info-circle"})," This will create an entry in the Teams table for fixtures, matches, and standings."]})]})]})]})})]})}function _(){var t;const[l,i]=a.useState([]),[n,r]=a.useState(!0),[c,d]=a.useState(""),[o,m]=a.useState("all"),[h,x]=a.useState(null),[u,p]=a.useState(!1),[g,f]=a.useState(!1);a.useEffect(()=>{y()},[]);const y=async()=>{try{r(!0);const{data:a,error:s}=await e.from("team_players").select("*, team_registrations(team_name, category, status)").order("player_name");if(s)throw s;i(a||[])}catch(a){alert("Failed to load players")}finally{r(!1)}},N=l.filter(e=>{var a,s,t;const l=(null==(a=e.player_name)?void 0:a.toLowerCase().includes(c.toLowerCase()))||(null==(t=null==(s=e.team_registrations)?void 0:s.team_name)?void 0:t.toLowerCase().includes(c.toLowerCase())),i="all"===o||e.position===o;return l&&i});return s.jsxs(v,{title:"Players Management",children:[s.jsxs("div",{className:"admin-page-header",children:[s.jsx("div",{className:"page-header-left",children:s.jsxs("button",{className:"refresh-btn",onClick:y,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]})}),s.jsxs("div",{className:"page-header-right",children:[s.jsxs("select",{className:"filter-select",value:o,onChange:e=>m(e.target.value),children:[s.jsx("option",{value:"all",children:"All Positions"}),j.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("div",{className:"search-box",children:[s.jsx("i",{className:"fas fa-search"}),s.jsx("input",{type:"text",placeholder:"Search players or teams...",value:c,onChange:e=>d(e.target.value)})]})]})]}),n?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading players..."})]}):s.jsxs("div",{className:"admin-table-container",children:[s.jsx("div",{className:"table-stats",children:s.jsxs("p",{children:["Total Players: ",s.jsx("strong",{children:N.length})]})}),s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Player"}),s.jsx("th",{children:"Position"}),s.jsx("th",{children:"Age"}),s.jsx("th",{children:"Team"}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===N.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:"7",style:{textAlign:"center",padding:"40px"},children:[s.jsx("i",{className:"fas fa-users-slash",style:{fontSize:"3rem",color:"#ccc"}}),s.jsx("p",{children:"No players found"})]})}):N.map(a=>{var t,l;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"player-cell",children:[a.player_image&&s.jsx("img",{src:a.player_image,alt:"",className:"player-image-small"}),s.jsx("strong",{children:a.player_name})]})}),s.jsx("td",{children:s.jsx("span",{className:"position-badge",children:a.position})}),s.jsx("td",{children:a.player_age||"N/A"}),s.jsx("td",{children:(null==(t=a.team_registrations)?void 0:t.team_name)||"N/A"}),s.jsx("td",{children:s.jsx("span",{className:"category-badge",children:null==(l=a.team_registrations)?void 0:l.category})}),s.jsx("td",{children:a.is_substitute?s.jsx("span",{className:"type-badge substitute",children:"Substitute"}):s.jsx("span",{className:"type-badge starter",children:"Starter"})}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{className:"btn-icon btn-edit",onClick:()=>{x(a),p(!0),f(!1)},title:"View/Edit",children:s.jsx("i",{className:"fas fa-edit"})}),s.jsx("button",{className:"btn-icon btn-delete",onClick:()=>(async a=>{if(confirm("Are you sure you want to delete this player?"))try{const{error:s}=await e.from("team_players").delete().eq("id",a);if(s)throw s;alert("Player deleted successfully!"),y(),p(!1)}catch(s){alert("Failed to delete player")}})(a.id),title:"Delete",children:s.jsx("i",{className:"fas fa-trash"})})]})})]},a.id)})})]})]}),u&&h&&s.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:g?"Edit Player":"Player Details"}),s.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"modal-body",children:[h.player_image&&s.jsx("div",{className:"player-image-preview",children:s.jsx("img",{src:h.player_image,alt:h.player_name})}),g?s.jsxs("div",{className:"edit-form",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Player Name"}),s.jsx("input",{type:"text",value:h.player_name||"",onChange:e=>x({...h,player_name:e.target.value})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Position"}),s.jsx("select",{value:h.position||"",onChange:e=>x({...h,position:e.target.value}),children:j.map(e=>s.jsx("option",{value:e,children:e},e))})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Age"}),s.jsx("input",{type:"number",value:h.player_age||"",onChange:e=>x({...h,player_age:parseInt(e.target.value)})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Player Type"}),s.jsxs("select",{value:h.is_substitute?"substitute":"starter",onChange:e=>x({...h,is_substitute:"substitute"===e.target.value}),children:[s.jsx("option",{value:"starter",children:"Starter"}),s.jsx("option",{value:"substitute",children:"Substitute"})]})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:()=>(async(a,s)=>{try{const{error:t}=await e.from("team_players").update(s).eq("id",a);if(t)throw t;alert("Player updated successfully!"),y(),p(!1),f(!1)}catch(t){alert("Failed to update player")}})(h.id,{player_name:h.player_name,position:h.position,player_age:h.player_age,is_substitute:h.is_substitute}),children:"Save Changes"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"detail-grid",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Player Name:"}),s.jsx("span",{children:h.player_name})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Position:"}),s.jsx("span",{className:"position-badge",children:h.position})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Age:"}),s.jsx("span",{children:h.player_age||"N/A"})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Team:"}),s.jsx("span",{children:null==(t=h.team_registrations)?void 0:t.team_name})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Type:"}),h.is_substitute?s.jsx("span",{className:"type-badge substitute",children:"Substitute"}):s.jsx("span",{className:"type-badge starter",children:"Starter"})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("label",{children:"Aadhar Number:"}),s.jsx("span",{children:h.aadhar_no||"Not provided"})]})]}),s.jsx("div",{className:"modal-actions",children:s.jsxs("button",{className:"btn-primary",onClick:()=>f(!0),children:[s.jsx("i",{className:"fas fa-edit"})," Edit Player"]})})]})]})]})})]})}function b(){const[t,l]=a.useState([]),[i,n]=a.useState(!0),[r,c]=a.useState(""),[d,o]=a.useState("all");a.useEffect(()=>{m()},[d]);const m=async()=>{try{n(!0);let a=e.from("teams").select("*").order("name");"all"!==d&&(a=a.eq("category",d));const{data:s,error:t}=await a;if(t)throw t;l(s||[])}catch(a){alert("Failed to load teams")}finally{n(!1)}},h=t.filter(e=>{var a,s;return(null==(a=e.name)?void 0:a.toLowerCase().includes(r.toLowerCase()))||(null==(s=e.captain)?void 0:s.toLowerCase().includes(r.toLowerCase()))});return s.jsxs(v,{title:"Teams Management",children:[s.jsxs("div",{className:"admin-page-header",children:[s.jsx("div",{className:"page-header-left",children:s.jsxs("button",{className:"refresh-btn",onClick:m,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]})}),s.jsxs("div",{className:"page-header-right",children:[s.jsxs("select",{className:"filter-select",value:d,onChange:e=>o(e.target.value),children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"open-age",children:"Open Age"}),s.jsx("option",{value:"u17",children:"Under 17"})]}),s.jsxs("div",{className:"search-box",children:[s.jsx("i",{className:"fas fa-search"}),s.jsx("input",{type:"text",placeholder:"Search teams...",value:r,onChange:e=>c(e.target.value)})]})]})]}),i?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading teams..."})]}):s.jsxs("div",{className:"admin-table-container",children:[s.jsx("div",{className:"table-stats",children:s.jsxs("p",{children:["Total Teams: ",s.jsx("strong",{children:h.length})]})}),s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Team"}),s.jsx("th",{children:"Captain"}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Formation"}),s.jsx("th",{children:"Played"}),s.jsx("th",{children:"W-D-L"}),s.jsx("th",{children:"GD"}),s.jsx("th",{children:"Points"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===h.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:"9",style:{textAlign:"center",padding:"40px"},children:[s.jsx("i",{className:"fas fa-shield-alt",style:{fontSize:"3rem",color:"#ccc"}}),s.jsx("p",{children:"No teams found"})]})}):h.map(a=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[a.crest_url&&s.jsx("img",{src:a.crest_url,alt:"",className:"team-logo-small"}),s.jsx("strong",{children:a.name})]})}),s.jsx("td",{children:a.captain||"N/A"}),s.jsx("td",{children:s.jsx("span",{className:"category-badge",children:a.category})}),s.jsx("td",{children:a.formation||"N/A"}),s.jsx("td",{children:a.played||0}),s.jsxs("td",{children:[a.won||0,"-",a.drawn||0,"-",a.lost||0]}),s.jsx("td",{children:(a.goals_for||0)-(a.goals_against||0)}),s.jsx("td",{children:s.jsx("strong",{children:a.points||0})}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("a",{href:`/muqawamah/2026/${a.category}/teams/?team=${a.id}`,className:"btn-icon btn-view",title:"View Team Page",target:"_blank",children:s.jsx("i",{className:"fas fa-external-link-alt"})}),s.jsx("button",{className:"btn-icon btn-delete",onClick:()=>(async a=>{if(confirm("Are you sure you want to delete this team? This will remove them from the tournament."))try{const{error:s}=await e.from("teams").delete().eq("id",a);if(s)throw s;alert("Team deleted successfully!"),m()}catch(s){alert("Failed to delete team")}})(a.id),title:"Delete",children:s.jsx("i",{className:"fas fa-trash"})})]})})]},a.id))})]})]})]})}function w(){const[t,l]=a.useState([]),[i,n]=a.useState([]),[r,c]=a.useState(!0),[d,o]=a.useState(!1),[m,h]=a.useState({home_team_id:"",away_team_id:"",match_date:"",scheduled_time:"",venue:"",match_number:1,category:"open-age",match_type:"group"});a.useEffect(()=>{x()},[]);const x=async()=>{try{c(!0);const{data:a,error:s}=await e.from("matches").select("\n          *,\n          home_team:teams!matches_home_team_id_fkey(id, name, crest_url),\n          away_team:teams!matches_away_team_id_fkey(id, name, crest_url)\n        ").order("match_date",{ascending:!0});if(s)throw s;const{data:t,error:i}=await e.from("teams").select("id, name, category").order("name");if(i)throw i;l(a||[]),n(t||[])}catch(a){alert("Failed to load fixtures")}finally{c(!1)}},u=i.filter(e=>e.category===m.category);return s.jsxs(v,{title:"Fixtures Management",children:[s.jsx("div",{className:"admin-page-header",children:s.jsxs("div",{className:"page-header-left",children:[s.jsxs("button",{className:"refresh-btn",onClick:x,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]}),s.jsxs("button",{className:"create-btn",onClick:()=>o(!0),children:[s.jsx("i",{className:"fas fa-plus"})," Create Fixture"]})]})}),r?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading fixtures..."})]}):s.jsxs("div",{className:"admin-table-container",children:[s.jsx("div",{className:"table-stats",children:s.jsxs("p",{children:["Total Fixtures: ",s.jsx("strong",{children:t.length})]})}),s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"MW"}),s.jsx("th",{children:"Date & Time"}),s.jsx("th",{children:"Home Team"}),s.jsx("th",{children:"Away Team"}),s.jsx("th",{children:"Venue"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Score"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===t.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:"8",style:{textAlign:"center",padding:"40px"},children:[s.jsx("i",{className:"fas fa-calendar-alt",style:{fontSize:"3rem",color:"#ccc"}}),s.jsx("p",{children:"No fixtures found"})]})}):t.map(a=>{var t,l,i,n;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:a.match_number})}),s.jsxs("td",{children:[s.jsx("div",{children:new Date(a.match_date).toLocaleDateString()}),s.jsx("small",{children:a.scheduled_time||"TBD"})]}),s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[(null==(t=a.home_team)?void 0:t.crest_url)&&s.jsx("img",{src:a.home_team.crest_url,alt:"",className:"team-logo-small"}),s.jsx("span",{children:(null==(l=a.home_team)?void 0:l.name)||"TBD"})]})}),s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[(null==(i=a.away_team)?void 0:i.crest_url)&&s.jsx("img",{src:a.away_team.crest_url,alt:"",className:"team-logo-small"}),s.jsx("span",{children:(null==(n=a.away_team)?void 0:n.name)||"TBD"})]})}),s.jsx("td",{children:a.venue||"TBD"}),s.jsx("td",{children:s.jsx("span",{className:`status-badge status-${a.status}`,children:a.status})}),s.jsx("td",{children:"completed"===a.status?s.jsxs("strong",{children:[a.home_score," - ",a.away_score]}):s.jsx("span",{children:"-"})}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("a",{href:`/admin/matches?fixture=${a.id}`,className:"btn-icon btn-edit",title:"Record Result",children:s.jsx("i",{className:"fas fa-edit"})}),s.jsx("button",{className:"btn-icon btn-delete",onClick:()=>(async a=>{if(confirm("Are you sure you want to delete this fixture?"))try{const{error:s}=await e.from("matches").delete().eq("id",a);if(s)throw s;alert("Fixture deleted successfully!"),x()}catch(s){alert("Failed to delete fixture")}})(a.id),title:"Delete",children:s.jsx("i",{className:"fas fa-trash"})})]})})]},a.id)})})]})]}),d&&s.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:s.jsxs("div",{className:"modal-content large",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Create New Fixture"}),s.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Category"}),s.jsxs("select",{value:m.category,onChange:e=>h({...m,category:e.target.value}),children:[s.jsx("option",{value:"open-age",children:"Open Age"}),s.jsx("option",{value:"u17",children:"Under 17"})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Home Team"}),s.jsxs("select",{value:m.home_team_id,onChange:e=>h({...m,home_team_id:e.target.value}),children:[s.jsx("option",{value:"",children:"Select Home Team"}),u.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Away Team"}),s.jsxs("select",{value:m.away_team_id,onChange:e=>h({...m,away_team_id:e.target.value}),children:[s.jsx("option",{value:"",children:"Select Away Team"}),u.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Match Date"}),s.jsx("input",{type:"date",value:m.match_date,onChange:e=>h({...m,match_date:e.target.value})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Match Time"}),s.jsx("input",{type:"time",value:m.scheduled_time,onChange:e=>h({...m,scheduled_time:e.target.value})})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Venue"}),s.jsx("input",{type:"text",value:m.venue,onChange:e=>h({...m,venue:e.target.value}),placeholder:"e.g., Sio Stadium"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Match Number"}),s.jsx("input",{type:"number",min:"1",value:m.match_number,onChange:e=>h({...m,match_number:parseInt(e.target.value)}),placeholder:"e.g., 1, 2, 3..."})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Match Type"}),s.jsxs("select",{value:m.match_type,onChange:e=>h({...m,match_type:e.target.value}),children:[s.jsx("option",{value:"group",children:"Group Stage"}),s.jsx("option",{value:"quarter-final",children:"Quarter Final"}),s.jsx("option",{value:"semi-final",children:"Semi Final"}),s.jsx("option",{value:"final",children:"Final"})]})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsxs("button",{className:"btn-primary",onClick:async()=>{if(m.home_team_id&&m.away_team_id)if(m.home_team_id!==m.away_team_id)try{const{error:a}=await e.from("matches").insert({home_team_id:m.home_team_id,away_team_id:m.away_team_id,match_date:m.match_date,scheduled_time:m.scheduled_time,venue:m.venue,match_number:m.match_number,category:m.category,match_type:m.match_type,status:"scheduled"});if(a)throw a;alert("Fixture created successfully!"),o(!1),h({home_team_id:"",away_team_id:"",match_date:"",scheduled_time:"",venue:"",match_number:1,category:"open-age",match_type:"group"}),x()}catch(a){alert("Failed to create fixture")}else alert("Home and away teams must be different");else alert("Please select both teams")},children:[s.jsx("i",{className:"fas fa-plus"})," Create Fixture"]})]})]})]})})]})}function C(){var t,l,i,n,r,c;const[d,o]=a.useState([]),[m,h]=a.useState(!0),[x,u]=a.useState(null),[j,p]=a.useState(!1),[g,f]=a.useState({home_score:0,away_score:0,status:"completed"}),[y,N]=a.useState([]),[_,b]=a.useState([]),[w,C]=a.useState([]),[S,k]=a.useState({scorer_name:"",assist_name:"",minute:"",goal_type:"open_play",team_id:""});a.useEffect(()=>{A()},[]);const A=async()=>{try{h(!0);const{data:a,error:s}=await e.from("matches").select("\n          *,\n          home_team:teams!matches_home_team_id_fkey(id, name, crest_url),\n          away_team:teams!matches_away_team_id_fkey(id, name, crest_url)\n        ").order("match_date",{ascending:!1});if(s)throw s;o(a||[])}catch(a){alert("Failed to load matches")}finally{h(!1)}},T=async(a,s,t,l)=>{try{const{data:i}=await e.from("teams").select("*").eq("id",a).single(),{data:n}=await e.from("teams").select("*").eq("id",s).single();let r={played:(i.played||0)+1,goals_for:(i.goals_for||0)+t,goals_against:(i.goals_against||0)+l},c={played:(n.played||0)+1,goals_for:(n.goals_for||0)+l,goals_against:(n.goals_against||0)+t};t>l?(r.won=(i.won||0)+1,r.points=(i.points||0)+3,c.lost=(n.lost||0)+1):t<l?(c.won=(n.won||0)+1,c.points=(n.points||0)+3,r.lost=(i.lost||0)+1):(r.drawn=(i.drawn||0)+1,r.points=(i.points||0)+1,c.drawn=(n.drawn||0)+1,c.points=(n.points||0)+1),await e.from("teams").update(r).eq("id",a),await e.from("teams").update(c).eq("id",s)}catch(i){}},q=async a=>{try{const{data:s}=await e.from("teams").select("registration_id").eq("id",a.home_team_id).single(),{data:t}=await e.from("teams").select("registration_id").eq("id",a.away_team_id).single();if(null==s?void 0:s.registration_id){const{data:a}=await e.from("team_players").select("id, player_name, position").eq("team_id",s.registration_id).order("player_name");b(a||[])}if(null==t?void 0:t.registration_id){const{data:a}=await e.from("team_players").select("id, player_name, position").eq("team_id",t.registration_id).order("player_name");C(a||[])}}catch(s){}},M=async a=>{try{const{data:s,error:t}=await e.from("goals").select("*").eq("match_id",a).order("minute");if(t)throw t;N(s||[])}catch(s){}};return s.jsxs(v,{title:"Match Results",children:[s.jsx("div",{className:"admin-page-header",children:s.jsx("div",{className:"page-header-left",children:s.jsxs("button",{className:"refresh-btn",onClick:A,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]})})}),m?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading matches..."})]}):s.jsx("div",{className:"admin-table-container",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Home Team"}),s.jsx("th",{children:"Score"}),s.jsx("th",{children:"Away Team"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===d.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",style:{textAlign:"center",padding:"40px"},children:[s.jsx("i",{className:"fas fa-futbol",style:{fontSize:"3rem",color:"#ccc"}}),s.jsx("p",{children:"No matches found"})]})}):d.map(e=>{var a,t,l,i;return s.jsxs("tr",{children:[s.jsx("td",{children:new Date(e.match_date).toLocaleDateString()}),s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[(null==(a=e.home_team)?void 0:a.crest_url)&&s.jsx("img",{src:e.home_team.crest_url,alt:"",className:"team-logo-small"}),s.jsx("span",{children:null==(t=e.home_team)?void 0:t.name})]})}),s.jsx("td",{children:"completed"===e.status?s.jsxs("strong",{className:"score-display",children:[e.home_score," - ",e.away_score]}):s.jsx("span",{className:"vs-text",children:"vs"})}),s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[(null==(l=e.away_team)?void 0:l.crest_url)&&s.jsx("img",{src:e.away_team.crest_url,alt:"",className:"team-logo-small"}),s.jsx("span",{children:null==(i=e.away_team)?void 0:i.name})]})}),s.jsx("td",{children:s.jsx("span",{className:`status-badge status-${e.status}`,children:e.status})}),s.jsx("td",{children:s.jsx("button",{className:"btn-icon btn-edit",onClick:()=>(async e=>{u(e),f({home_score:e.home_score||0,away_score:e.away_score||0,status:"scheduled"===e.status?"completed":e.status}),await q(e),await M(e.id),p(!0)})(e),title:"Record/Edit Result",children:s.jsx("i",{className:"fas fa-edit"})})})]},e.id)})})]})}),j&&x&&s.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Record Match Result"}),s.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"match-info",children:[s.jsxs("div",{className:"team-score-input",children:[s.jsxs("div",{className:"team-name",children:[(null==(t=x.home_team)?void 0:t.crest_url)&&s.jsx("img",{src:x.home_team.crest_url,alt:""}),s.jsx("h3",{children:null==(l=x.home_team)?void 0:l.name})]}),s.jsx("input",{type:"number",min:"0",value:g.home_score,onChange:e=>f({...g,home_score:parseInt(e.target.value)||0}),className:"score-input"})]}),s.jsx("div",{className:"score-separator",children:"-"}),s.jsxs("div",{className:"team-score-input",children:[s.jsxs("div",{className:"team-name",children:[(null==(i=x.away_team)?void 0:i.crest_url)&&s.jsx("img",{src:x.away_team.crest_url,alt:""}),s.jsx("h3",{children:null==(n=x.away_team)?void 0:n.name})]}),s.jsx("input",{type:"number",min:"0",value:g.away_score,onChange:e=>f({...g,away_score:parseInt(e.target.value)||0}),className:"score-input"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Match Status"}),s.jsxs("select",{value:g.status,onChange:e=>f({...g,status:e.target.value}),children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"live",children:"Live"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"postponed",children:"Postponed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:"goals-section",children:[s.jsxs("h3",{children:["⚽ Goals (",y.length,")"]}),y.length>0&&s.jsx("div",{className:"goals-list",children:y.map(a=>s.jsxs("div",{className:"goal-item",children:[s.jsxs("div",{className:"goal-info",children:[s.jsxs("span",{className:"goal-minute",children:[a.minute,"'"]}),s.jsx("span",{className:"goal-scorer",children:a.scorer_name}),a.assist_name&&s.jsxs("span",{className:"goal-assist",children:["(Assist: ",a.assist_name,")"]})]}),s.jsx("button",{className:"goal-delete-btn",onClick:()=>(async(a,s)=>{if(confirm("Delete this goal? The score will be updated automatically."))try{const{error:t}=await e.from("goals").delete().eq("id",a);if(t)throw t;const l={...g};s===x.home_team_id?l.home_score=Math.max((g.home_score||0)-1,0):s===x.away_team_id&&(l.away_score=Math.max((g.away_score||0)-1,0)),f(l),await M(x.id),alert("Goal deleted! Score updated automatically.")}catch(t){alert("Failed to delete goal")}})(a.id,a.team_id),children:s.jsx("i",{className:"fas fa-times"})})]},a.id))}),s.jsxs("div",{className:"add-goal-form",children:[s.jsx("h4",{children:"Add Goal"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Scoring Team"}),s.jsxs("select",{value:S.team_id,onChange:e=>{k({...S,team_id:e.target.value,scorer_name:"",assist_name:""})},children:[s.jsx("option",{value:"",children:"Select Team"}),s.jsx("option",{value:x.home_team_id,children:null==(r=x.home_team)?void 0:r.name}),s.jsx("option",{value:x.away_team_id,children:null==(c=x.away_team)?void 0:c.name})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Goal Scorer"}),s.jsxs("select",{value:S.scorer_name,onChange:e=>k({...S,scorer_name:e.target.value}),disabled:!S.team_id,children:[s.jsx("option",{value:"",children:"Select Scorer"}),S.team_id===x.home_team_id&&_.map(e=>s.jsxs("option",{value:e.player_name,children:[e.player_name," (",e.position,")"]},e.id)),S.team_id===x.away_team_id&&w.map(e=>s.jsxs("option",{value:e.player_name,children:[e.player_name," (",e.position,")"]},e.id))]})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Assister (Optional)"}),s.jsxs("select",{value:S.assist_name,onChange:e=>k({...S,assist_name:e.target.value}),disabled:!S.team_id,children:[s.jsx("option",{value:"",children:"No Assist"}),S.team_id===x.home_team_id&&_.filter(e=>e.player_name!==S.scorer_name).map(e=>s.jsxs("option",{value:e.player_name,children:[e.player_name," (",e.position,")"]},e.id)),S.team_id===x.away_team_id&&w.filter(e=>e.player_name!==S.scorer_name).map(e=>s.jsxs("option",{value:e.player_name,children:[e.player_name," (",e.position,")"]},e.id))]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Minute"}),s.jsx("input",{type:"number",min:"1",max:"120",value:S.minute,onChange:e=>k({...S,minute:e.target.value}),placeholder:"e.g., 23"})]})]}),s.jsxs("button",{className:"btn-add-goal",onClick:async()=>{if(S.scorer_name&&S.team_id)try{const{error:a}=await e.from("goals").insert({match_id:x.id,team_id:S.team_id,scorer_name:S.scorer_name,assist_name:S.assist_name||null,minute:parseInt(S.minute)||null});if(a)throw a;const s={...g};S.team_id===x.home_team_id?s.home_score=(g.home_score||0)+1:S.team_id===x.away_team_id&&(s.away_score=(g.away_score||0)+1),f(s),k({scorer_name:"",assist_name:"",minute:"",goal_type:"open_play",team_id:""}),await M(x.id),alert("Goal added! Score updated automatically.")}catch(a){alert("Failed to add goal: "+a.message)}else alert("Please select scorer and team")},disabled:!S.scorer_name,children:[s.jsx("i",{className:"fas fa-plus"})," Add Goal"]})]})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cancel"}),s.jsxs("button",{className:"btn-primary",onClick:async()=>{if(x)try{const{error:a}=await e.from("matches").update({home_score:g.home_score,away_score:g.away_score,status:g.status}).eq("id",x.id);if(a)throw a;await T(x.home_team_id,x.away_team_id,g.home_score,g.away_score),alert("Match result recorded successfully!"),p(!1),A()}catch(a){alert("Failed to record match result")}},children:[s.jsx("i",{className:"fas fa-save"})," Save Result"]})]})]})]})})]})}function S(){const[t,l]=a.useState([]),[i,n]=a.useState([]),[r,c]=a.useState([]),[d,o]=a.useState(!0),[m,h]=a.useState(!1),[x,u]=a.useState({match_id:"",scorer_id:"",assister_id:"",minute:"",goal_type:"open_play"});a.useEffect(()=>{j()},[]);const j=async()=>{try{o(!0);const{data:a,error:s}=await e.from("goals").select("\n          *,\n          match:matches(id, home_team:teams!matches_home_team_id_fkey(name), away_team:teams!matches_away_team_id_fkey(name)),\n          scorer:team_players!goals_scorer_id_fkey(player_name, team_id),\n          assister:team_players!goals_assister_id_fkey(player_name)\n        ").order("created_at",{ascending:!1});if(s)throw s;const{data:t,error:i}=await e.from("matches").select("\n          *,\n          home_team:teams!matches_home_team_id_fkey(name),\n          away_team:teams!matches_away_team_id_fkey(name)\n        ").order("match_date",{ascending:!1}).limit(20);if(i)throw i;const{data:r,error:d}=await e.from("team_players").select("id, player_name, team_id, team_registrations(team_name)").order("player_name");if(d)throw d;l(a||[]),n(t||[]),c(r||[])}catch(a){alert("Failed to load data")}finally{o(!1)}};return s.jsxs(v,{title:"Goals & Stats Management",children:[s.jsx("div",{className:"admin-page-header",children:s.jsxs("div",{className:"page-header-left",children:[s.jsxs("button",{className:"refresh-btn",onClick:j,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]}),s.jsxs("button",{className:"create-btn",onClick:()=>h(!0),children:[s.jsx("i",{className:"fas fa-plus"})," Add Goal"]})]})}),d?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading goals..."})]}):s.jsxs("div",{className:"admin-table-container",children:[s.jsx("div",{className:"table-stats",children:s.jsxs("p",{children:["Total Goals: ",s.jsx("strong",{children:t.length})]})}),s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Match"}),s.jsx("th",{children:"Scorer"}),s.jsx("th",{children:"Assister"}),s.jsx("th",{children:"Minute"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===t.length?s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",style:{textAlign:"center",padding:"40px"},children:[s.jsx("i",{className:"fas fa-trophy",style:{fontSize:"3rem",color:"#ccc"}}),s.jsx("p",{children:"No goals recorded"})]})}):t.map(a=>{var t,l,i,n,r,c;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{children:[null==(l=null==(t=a.match)?void 0:t.home_team)?void 0:l.name," vs ",null==(n=null==(i=a.match)?void 0:i.away_team)?void 0:n.name]})}),s.jsx("td",{children:s.jsx("strong",{children:(null==(r=a.scorer)?void 0:r.player_name)||"Unknown"})}),s.jsx("td",{children:(null==(c=a.assister)?void 0:c.player_name)||"-"}),s.jsx("td",{children:a.minute?`${a.minute}'`:"-"}),s.jsx("td",{children:s.jsx("span",{className:"goal-type-badge",children:a.goal_type.replace("_"," ")})}),s.jsx("td",{children:s.jsx("button",{className:"btn-icon btn-delete",onClick:()=>(async a=>{if(confirm("Are you sure you want to delete this goal?"))try{const{error:s}=await e.from("goals").delete().eq("id",a);if(s)throw s;alert("Goal deleted successfully!"),j()}catch(s){alert("Failed to delete goal")}})(a.id),title:"Delete",children:s.jsx("i",{className:"fas fa-trash"})})})]},a.id)})})]})]}),m&&s.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Add Goal"}),s.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Match"}),s.jsxs("select",{value:x.match_id,onChange:e=>u({...x,match_id:e.target.value}),children:[s.jsx("option",{value:"",children:"Select Match"}),i.map(e=>{var a,t;return s.jsxs("option",{value:e.id,children:[null==(a=e.home_team)?void 0:a.name," vs ",null==(t=e.away_team)?void 0:t.name," - ",new Date(e.match_date).toLocaleDateString()]},e.id)})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Goal Scorer"}),s.jsxs("select",{value:x.scorer_id,onChange:e=>u({...x,scorer_id:e.target.value}),children:[s.jsx("option",{value:"",children:"Select Scorer"}),r.map(e=>{var a;return s.jsxs("option",{value:e.id,children:[e.player_name," (",null==(a=e.team_registrations)?void 0:a.team_name,")"]},e.id)})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Assister (Optional)"}),s.jsxs("select",{value:x.assister_id,onChange:e=>u({...x,assister_id:e.target.value}),children:[s.jsx("option",{value:"",children:"No Assist"}),r.map(e=>{var a;return s.jsxs("option",{value:e.id,children:[e.player_name," (",null==(a=e.team_registrations)?void 0:a.team_name,")"]},e.id)})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Minute"}),s.jsx("input",{type:"number",min:"1",max:"120",value:x.minute,onChange:e=>u({...x,minute:e.target.value}),placeholder:"e.g., 45"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Goal Type"}),s.jsxs("select",{value:x.goal_type,onChange:e=>u({...x,goal_type:e.target.value}),children:[s.jsx("option",{value:"open_play",children:"Open Play"}),s.jsx("option",{value:"penalty",children:"Penalty"}),s.jsx("option",{value:"free_kick",children:"Free Kick"}),s.jsx("option",{value:"header",children:"Header"}),s.jsx("option",{value:"own_goal",children:"Own Goal"})]})]})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>h(!1),children:"Cancel"}),s.jsxs("button",{className:"btn-primary",onClick:async()=>{if(x.match_id&&x.scorer_id)try{const{error:a}=await e.from("goals").insert({match_id:x.match_id,scorer_id:x.scorer_id,assister_id:x.assister_id||null,minute:parseInt(x.minute)||null,goal_type:x.goal_type});if(a)throw a;alert("Goal added successfully!"),h(!1),u({match_id:"",scorer_id:"",assister_id:"",minute:"",goal_type:"open_play"}),j()}catch(a){alert("Failed to add goal")}else alert("Please select match and scorer")},children:[s.jsx("i",{className:"fas fa-plus"})," Add Goal"]})]})]})]})})]})}function k(){const[t,l]=a.useState({topScorers:[],topAssisters:[],teamStats:[],matchStats:{totalMatches:0,completedMatches:0,totalGoals:0,averageGoals:0}}),[i,n]=a.useState(!0),[r,c]=a.useState("all");a.useEffect(()=>{d()},[r]);const d=async()=>{try{n(!0);const{data:a,error:s}=await e.from("goals").select("scorer_id, team_players!goals_scorer_id_fkey(player_name, player_image, team_registrations(team_name, category))").order("scorer_id");if(s)throw s;const t={};null==a||a.forEach(e=>{const a=e.scorer_id;t[a]||(t[a]={player:e.team_players,goals:0}),t[a].goals++});const i=Object.values(t).sort((e,a)=>a.goals-e.goals).slice(0,10),{data:c,error:d}=await e.from("goals").select("assister_id, team_players!goals_assister_id_fkey(player_name, player_image, team_registrations(team_name))").not("assister_id","is",null);if(d)throw d;const o={};null==c||c.forEach(e=>{const a=e.assister_id;t[a]||(o[a]={player:e.team_players,assists:0}),o[a].assists++});const m=Object.values(o).sort((e,a)=>a.assists-e.assists).slice(0,10);let h=e.from("teams").select("*").order("points",{ascending:!1});"all"!==r&&(h=h.eq("category",r));const{data:x,error:u}=await h;if(u)throw u;const{data:j,error:p}=await e.from("matches").select("*");if(p)throw p;const g=(null==a?void 0:a.length)||0,f=(null==j?void 0:j.filter(e=>"completed"===e.status).length)||0;l({topScorers:i,topAssisters:m,teamStats:x||[],matchStats:{totalMatches:(null==j?void 0:j.length)||0,completedMatches:f,totalGoals:g,averageGoals:f>0?(g/f).toFixed(2):0}})}catch(a){alert("Failed to load statistics")}finally{n(!1)}};return s.jsxs(v,{title:"Tournament Statistics",children:[s.jsxs("div",{className:"admin-page-header",children:[s.jsx("div",{className:"page-header-left",children:s.jsxs("button",{className:"refresh-btn",onClick:d,children:[s.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]})}),s.jsx("div",{className:"page-header-right",children:s.jsxs("select",{className:"filter-select",value:r,onChange:e=>c(e.target.value),children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"open-age",children:"Open Age"}),s.jsx("option",{value:"u17",children:"Under 17"})]})})]}),i?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading statistics..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"stats-overview",children:[s.jsx("h3",{children:"Match Overview"}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-box",children:[s.jsx("i",{className:"fas fa-futbol"}),s.jsxs("div",{children:[s.jsx("p",{className:"stat-label",children:"Total Matches"}),s.jsx("p",{className:"stat-value",children:t.matchStats.totalMatches})]})]}),s.jsxs("div",{className:"stat-box",children:[s.jsx("i",{className:"fas fa-check-circle"}),s.jsxs("div",{children:[s.jsx("p",{className:"stat-label",children:"Completed"}),s.jsx("p",{className:"stat-value",children:t.matchStats.completedMatches})]})]}),s.jsxs("div",{className:"stat-box",children:[s.jsx("i",{className:"fas fa-trophy"}),s.jsxs("div",{children:[s.jsx("p",{className:"stat-label",children:"Total Goals"}),s.jsx("p",{className:"stat-value",children:t.matchStats.totalGoals})]})]}),s.jsxs("div",{className:"stat-box",children:[s.jsx("i",{className:"fas fa-chart-line"}),s.jsxs("div",{children:[s.jsx("p",{className:"stat-label",children:"Avg Goals/Match"}),s.jsx("p",{className:"stat-value",children:t.matchStats.averageGoals})]})]})]})]}),s.jsxs("div",{className:"stats-tables-grid",children:[s.jsxs("div",{className:"stats-table-section",children:[s.jsx("h3",{children:"Top Scorers"}),s.jsxs("table",{className:"admin-table compact",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"#"}),s.jsx("th",{children:"Player"}),s.jsx("th",{children:"Team"}),s.jsx("th",{children:"Goals"})]})}),s.jsx("tbody",{children:0===t.topScorers.length?s.jsx("tr",{children:s.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"20px"},children:"No goals recorded"})}):t.topScorers.map((e,a)=>{var t,l,i,n;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:a+1})}),s.jsx("td",{children:s.jsxs("div",{className:"player-cell",children:[(null==(t=e.player)?void 0:t.player_image)&&s.jsx("img",{src:e.player.player_image,alt:"",className:"player-image-tiny"}),s.jsx("span",{children:null==(l=e.player)?void 0:l.player_name})]})}),s.jsx("td",{children:null==(n=null==(i=e.player)?void 0:i.team_registrations)?void 0:n.team_name}),s.jsx("td",{children:s.jsx("strong",{className:"highlight-value",children:e.goals})})]},a)})})]})]}),s.jsxs("div",{className:"stats-table-section",children:[s.jsx("h3",{children:"Top Assisters"}),s.jsxs("table",{className:"admin-table compact",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"#"}),s.jsx("th",{children:"Player"}),s.jsx("th",{children:"Team"}),s.jsx("th",{children:"Assists"})]})}),s.jsx("tbody",{children:0===t.topAssisters.length?s.jsx("tr",{children:s.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"20px"},children:"No assists recorded"})}):t.topAssisters.map((e,a)=>{var t,l,i,n;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:a+1})}),s.jsx("td",{children:s.jsxs("div",{className:"player-cell",children:[(null==(t=e.player)?void 0:t.player_image)&&s.jsx("img",{src:e.player.player_image,alt:"",className:"player-image-tiny"}),s.jsx("span",{children:null==(l=e.player)?void 0:l.player_name})]})}),s.jsx("td",{children:null==(n=null==(i=e.player)?void 0:i.team_registrations)?void 0:n.team_name}),s.jsx("td",{children:s.jsx("strong",{className:"highlight-value",children:e.assists})})]},a)})})]})]})]}),s.jsxs("div",{className:"stats-table-section full-width",children:[s.jsx("h3",{children:"Team Standings"}),s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"#"}),s.jsx("th",{children:"Team"}),s.jsx("th",{children:"Played"}),s.jsx("th",{children:"Won"}),s.jsx("th",{children:"Drawn"}),s.jsx("th",{children:"Lost"}),s.jsx("th",{children:"GF"}),s.jsx("th",{children:"GA"}),s.jsx("th",{children:"GD"}),s.jsx("th",{children:"Points"})]})}),s.jsx("tbody",{children:t.teamStats.map((e,a)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:a+1})}),s.jsx("td",{children:s.jsxs("div",{className:"team-cell",children:[e.crest_url&&s.jsx("img",{src:e.crest_url,alt:"",className:"team-logo-small"}),s.jsx("span",{children:e.name})]})}),s.jsx("td",{children:e.played||0}),s.jsx("td",{children:e.won||0}),s.jsx("td",{children:e.drawn||0}),s.jsx("td",{children:e.lost||0}),s.jsx("td",{children:e.goals_for||0}),s.jsx("td",{children:e.goals_against||0}),s.jsx("td",{children:(e.goals_for||0)-(e.goals_against||0)}),s.jsx("td",{children:s.jsx("strong",{className:"highlight-value",children:e.points||0})})]},e.id))})]})]})]})]})}function A(){const[t,i]=a.useState("general"),n=async a=>{try{const{data:s,error:t}=await e.from(a).select("*");if(t)throw t;const l=JSON.stringify(s,null,2),i=new Blob([l],{type:"application/json"}),n=URL.createObjectURL(i),r=document.createElement("a");r.href=n,r.download=`${a}-export-${(new Date).toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(n),alert(`${a} data exported successfully!`)}catch(s){alert("Failed to export data")}};return s.jsx(v,{title:"Settings",children:s.jsxs("div",{className:"settings-container",children:[s.jsxs("div",{className:"settings-tabs",children:[s.jsxs("button",{className:"settings-tab "+("general"===t?"active":""),onClick:()=>i("general"),children:[s.jsx("i",{className:"fas fa-cog"})," General"]}),s.jsxs("button",{className:"settings-tab "+("data"===t?"active":""),onClick:()=>i("data"),children:[s.jsx("i",{className:"fas fa-database"})," Data Management"]}),s.jsxs("button",{className:"settings-tab "+("admin"===t?"active":""),onClick:()=>i("admin"),children:[s.jsx("i",{className:"fas fa-user-shield"})," Admin Info"]})]}),s.jsxs("div",{className:"settings-content",children:["general"===t&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Tournament Settings"}),s.jsxs("div",{className:"settings-card",children:[s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("h4",{children:"Registration Status"}),s.jsx("p",{children:"Enable or disable team registrations"})]}),s.jsx("button",{className:"toggle-btn active",children:s.jsx("span",{children:"Enabled"})})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("h4",{children:"Tournament Year"}),s.jsx("p",{children:"Current tournament season"})]}),s.jsx("input",{type:"text",value:"2026",readOnly:!0,className:"setting-input"})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("h4",{children:"Registration Fee (Open Age)"}),s.jsx("p",{children:"Registration amount for open age category"})]}),s.jsx("input",{type:"number",value:"2500",readOnly:!0,className:"setting-input"})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("h4",{children:"Registration Fee (U17)"}),s.jsx("p",{children:"Registration amount for under 17 category"})]}),s.jsx("input",{type:"number",value:"2300",readOnly:!0,className:"setting-input"})]})]})]}),"data"===t&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Data Management"}),s.jsxs("div",{className:"settings-card",children:[s.jsx("h4",{children:"Export Data"}),s.jsx("p",{children:"Download data from database tables in JSON format"}),s.jsxs("div",{className:"export-buttons",children:[s.jsxs("button",{className:"btn-export",onClick:()=>n("team_registrations"),children:[s.jsx("i",{className:"fas fa-download"})," Export Registrations"]}),s.jsxs("button",{className:"btn-export",onClick:()=>n("teams"),children:[s.jsx("i",{className:"fas fa-download"})," Export Teams"]}),s.jsxs("button",{className:"btn-export",onClick:()=>n("team_players"),children:[s.jsx("i",{className:"fas fa-download"})," Export Players"]}),s.jsxs("button",{className:"btn-export",onClick:()=>n("matches"),children:[s.jsx("i",{className:"fas fa-download"})," Export Matches"]}),s.jsxs("button",{className:"btn-export",onClick:()=>n("goals"),children:[s.jsx("i",{className:"fas fa-download"})," Export Goals"]})]})]}),s.jsxs("div",{className:"settings-card danger",children:[s.jsxs("h4",{children:[s.jsx("i",{className:"fas fa-exclamation-triangle"})," Danger Zone"]}),s.jsx("p",{children:"These actions are irreversible. Proceed with caution!"}),s.jsxs("div",{className:"danger-actions",children:[s.jsxs("button",{className:"btn-danger",onClick:async()=>{if(confirm("Are you sure you want to reset ALL team standings? This cannot be undone!"))try{const{error:a}=await e.from("teams").update({played:0,won:0,drawn:0,lost:0,goals_for:0,goals_against:0,points:0}).neq("id","00000000-0000-0000-0000-000000000000");if(a)throw a;alert("All team standings have been reset!")}catch(a){alert("Failed to reset standings")}},children:[s.jsx("i",{className:"fas fa-undo"})," Reset All Standings"]}),s.jsxs("button",{className:"btn-danger",onClick:async()=>{if(confirm("Are you sure you want to delete ALL goals? This cannot be undone!"))try{const{error:a}=await e.from("goals").delete().neq("id","00000000-0000-0000-0000-000000000000");if(a)throw a;alert("All goals have been deleted!")}catch(a){alert("Failed to clear goals")}},children:[s.jsx("i",{className:"fas fa-trash"})," Clear All Goals"]})]})]})]}),"admin"===t&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Admin Information"}),s.jsxs("div",{className:"settings-card",children:[s.jsxs("div",{className:"admin-info-grid",children:[s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:"Super Admin Emails"}),s.jsx("div",{className:"email-list",children:l.map((e,a)=>s.jsxs("div",{className:"email-badge",children:[s.jsx("i",{className:"fas fa-shield-alt"}),e]},a))})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:"Admin Panel Version"}),s.jsx("p",{children:"v1.0.0"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:"Last Updated"}),s.jsx("p",{children:(new Date).toLocaleDateString()})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("label",{children:"Configuration File"}),s.jsx("code",{children:"admin/config/adminConfig.js"})]})]}),s.jsxs("div",{className:"info-note",children:[s.jsx("i",{className:"fas fa-info-circle"}),s.jsxs("p",{children:["To add more admin users, edit the ",s.jsx("code",{children:"SUPER_ADMIN_EMAILS"})," array in the admin configuration file."]})]})]})]})]})]})})}function T(){const[t,l]=a.useState(""),[i,n]=a.useState(""),[r,c]=a.useState(!1),[d,o]=a.useState("");return s.jsx("div",{className:"admin-auth-modal",children:s.jsxs("div",{className:"admin-auth-card",children:[s.jsxs("div",{className:"admin-auth-header",children:[s.jsx("img",{src:"/assets/img/MuqawamaLogo.png",alt:"Muqawama",className:"auth-logo"}),s.jsx("h2",{children:"Admin Login"}),s.jsx("p",{children:"Sign in with your admin credentials"})]}),s.jsxs("form",{onSubmit:async a=>{a.preventDefault(),c(!0),o("");try{const{error:a}=await e.auth.signInWithPassword({email:t,password:i});if(a)throw a;window.location.reload()}catch(s){o(s.message)}finally{c(!1)}},className:"admin-auth-form",children:[d&&s.jsxs("div",{className:"auth-error-banner",children:[s.jsx("i",{className:"fas fa-exclamation-circle"}),d]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Email"}),s.jsx("input",{type:"email",value:t,onChange:e=>l(e.target.value),placeholder:"admin@sioafe.com",required:!0,autoComplete:"email"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Password"}),s.jsx("input",{type:"password",value:i,onChange:e=>n(e.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password"})]}),s.jsx("button",{type:"submit",className:"admin-login-btn",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-spinner fa-spin"})," Signing in..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-sign-in-alt"})," Sign In"]})})]}),s.jsx("div",{className:"auth-footer",children:s.jsxs("a",{href:"/muqawamah/",className:"back-link",children:[s.jsx("i",{className:"fas fa-arrow-left"})," Back to Muqawama"]})})]})})}function q(){const[t,l]=a.useState(null),[i,n]=a.useState(!0),[r,c]=a.useState("dashboard");if(a.useEffect(()=>{(async()=>{const{data:{user:a}}=await e.auth.getUser();l(a),n(!1)})();const{data:{subscription:a}}=e.auth.onAuthStateChange((e,a)=>{l((null==a?void 0:a.user)??null)}),s=window.location.pathname;return s.includes("/admin/registrations")?c("registrations"):s.includes("/admin/players")?c("players"):s.includes("/admin/teams")?c("teams"):s.includes("/admin/fixtures")?c("fixtures"):s.includes("/admin/matches")?c("matches"):s.includes("/admin/goals")?c("goals"):s.includes("/admin/statistics")?c("statistics"):s.includes("/admin/settings")?c("settings"):c("dashboard"),()=>a.unsubscribe()},[]),i)return s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"admin-spinner"}),s.jsx("p",{children:"Loading admin panel..."})]});if(!t)return s.jsx(T,{});return s.jsx(p,{children:(()=>{switch(r){case"registrations":return s.jsx(N,{});case"players":return s.jsx(_,{});case"teams":return s.jsx(b,{});case"fixtures":return s.jsx(w,{});case"matches":return s.jsx(C,{});case"goals":return s.jsx(S,{});case"statistics":return s.jsx(k,{});case"settings":return s.jsx(A,{});default:return s.jsx(y,{})}})()})}t(document.getElementById("admin-root")).render(s.jsx(q,{}));
