import{j as a,r as s}from"./supabaseClient-y7L7r4ir.js";import{t as e}from"./index-cwrHH8V6.js";const n=a=>{const s=a.split(","),e=s[0].match(/:(.*?);/)[1],n=atob(s[1]);let l=n.length;const r=new Uint8Array(l);for(;l--;)r[l]=n.charCodeAt(l);return new Blob([r],{type:e})},l=({size:s=18,color:e="rgba(255,255,255,0.6)"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:s,height:s,fill:e,style:{verticalAlign:"middle"},children:a.jsx("path",{d:"M17.34,5.46h0a1.2,1.2,0,1,0,1.2,1.2A1.2,1.2,0,0,0,17.34,5.46Zm4.6,2.42a7.59,7.59,0,0,0-.46-2.43,4.94,4.94,0,0,0-1.16-1.77,4.7,4.7,0,0,0-1.77-1.15,7.3,7.3,0,0,0-2.43-.47C15.06,2,14.72,2,12,2s-3.06,0-4.12.06a7.3,7.3,0,0,0-2.43.47A4.78,4.78,0,0,0,3.68,3.68,4.7,4.7,0,0,0,2.53,5.45a7.3,7.3,0,0,0-.47,2.43C2,8.94,2,9.28,2,12s0,3.06.06,4.12a7.3,7.3,0,0,0,.47,2.43,4.7,4.7,0,0,0,1.15,1.77,4.78,4.78,0,0,0,1.77,1.15,7.3,7.3,0,0,0,2.43.47C8.94,22,9.28,22,12,22s3.06,0,4.12-.06a7.3,7.3,0,0,0,2.43-.47,4.7,4.7,0,0,0,1.77-1.15,4.85,4.85,0,0,0,1.16-1.77,7.59,7.59,0,0,0,.46-2.43c0-1.06.06-1.4.06-4.12S22,8.94,21.94,7.88ZM20.14,16a5.61,5.61,0,0,1-.34,1.86,3.06,3.06,0,0,1-.75,1.15,3.19,3.19,0,0,1-1.15.75,5.61,5.61,0,0,1-1.86.34c-1,.05-1.37.06-4,.06s-3,0-4-.06A5.73,5.73,0,0,1,6.1,19.8,3.27,3.27,0,0,1,5,19.05a3,3,0,0,1-.74-1.15A5.54,5.54,0,0,1,3.86,16c0-1-.06-1.37-.06-4s0-3,.06-4A5.54,5.54,0,0,1,4.21,6.1,3,3,0,0,1,5,5,3.14,3.14,0,0,1,6.1,4.2,5.73,5.73,0,0,1,8,3.86c1,0,1.37-.06,4-.06s3,0,4,.06a5.61,5.61,0,0,1,1.86.34A3.06,3.06,0,0,1,19.05,5,3.06,3.06,0,0,1,19.8,6.1,5.61,5.61,0,0,1,20.14,8c.05,1,.06,1.37.06,4S20.19,15,20.14,16ZM12,6.87A5.13,5.13,0,1,0,17.14,12,5.12,5.12,0,0,0,12,6.87Zm0,8.46A3.33,3.33,0,1,1,15.33,12,3.33,3.33,0,0,1,12,15.33Z"})});function r({match:r,onClose:t}){var c,i,o,d,m,h,u,x;const j=s.useRef(null),[p,g]=s.useState(!1),[v,N]=s.useState(!1),[w,f]=s.useState(null),b=a=>{if(!a)return"TBD";return new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).toUpperCase()},y=()=>{var a;const s=null==(a=r.match_type)?void 0:a.toLowerCase();return s&&"group"!==s?"quarter-final"===s?"QUARTER FINAL":"semi-final"===s?"SEMI FINAL":"final"===s?"FINAL":"third-place"===s?"3RD PLACE":s.toUpperCase():"GROUP STAGE"},C="completed"===r.status,_="live"===r.status,S=async()=>{if(!j.current)return null;g(!0);try{const a=await e(j.current,{quality:1,pixelRatio:3,backgroundColor:"#0a0e1a"}),s=n(a);return f(s),N(!0),{dataUrl:a,blob:s}}catch(a){return null}finally{g(!1)}},$=async()=>{var a,s;const e=await S();if(e){const n=document.createElement("a");n.download=`match-${null==(a=r.home_team)?void 0:a.name}-vs-${null==(s=r.away_team)?void 0:s.name}.png`,n.href=e.dataUrl,n.click()}};return a.jsx("div",{className:"share-modal-overlay",onClick:t,children:a.jsxs("div",{className:"share-modal-content",onClick:a=>a.stopPropagation(),children:[a.jsx("button",{className:"share-modal-close",onClick:t,children:a.jsx("i",{className:"fas fa-times"})}),a.jsx("div",{className:"shareable-card-wrapper",children:a.jsxs("div",{ref:j,className:"shareable-card match-card",children:[a.jsxs("div",{className:"card-bg-effects",children:[a.jsx("div",{className:"card-glow glow-1"}),a.jsx("div",{className:"card-glow glow-2"})]}),a.jsxs("div",{className:"card-header",children:[a.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),a.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),a.jsxs("div",{className:"card-match-content",children:[a.jsxs("div",{className:"card-team home",children:[a.jsx("div",{className:"card-team-logo",children:(null==(c=r.home_team)?void 0:c.crest_url)?a.jsx("img",{src:r.home_team.crest_url,alt:r.home_team.name,crossOrigin:"anonymous"}):a.jsx("span",{className:"logo-placeholder",children:null==(o=null==(i=r.home_team)?void 0:i.name)?void 0:o.charAt(0)})}),a.jsx("span",{className:"card-team-name",children:null==(d=r.home_team)?void 0:d.name})]}),a.jsx("div",{className:"card-score-horizontal",children:C||_?a.jsxs("div",{className:"score-row",children:[a.jsx("span",{className:"score-number",children:r.home_score??0}),a.jsx("span",{className:"score-divider",children:"-"}),a.jsx("span",{className:"score-number",children:r.away_score??0})]}):a.jsx("span",{className:"score-vs",children:"VS"})}),a.jsxs("div",{className:"card-team away",children:[a.jsx("div",{className:"card-team-logo",children:(null==(m=r.away_team)?void 0:m.crest_url)?a.jsx("img",{src:r.away_team.crest_url,alt:r.away_team.name,crossOrigin:"anonymous"}):a.jsx("span",{className:"logo-placeholder",children:null==(u=null==(h=r.away_team)?void 0:h.name)?void 0:u.charAt(0)})}),a.jsx("span",{className:"card-team-name",children:null==(x=r.away_team)?void 0:x.name})]})]}),a.jsxs("div",{className:"card-status-section",children:[a.jsx("span",{className:"card-match-type",children:y()}),a.jsx("span",{className:"card-date-inline",children:b(r.match_date)})]}),a.jsx("div",{className:"card-footer",children:a.jsxs("span",{className:"card-instagram",children:[a.jsx(l,{size:18,color:"rgba(255,255,255,0.85)"}),"@muqawamah2026"]})})]})}),a.jsxs("div",{className:"share-buttons",children:[a.jsx("h3",{children:"Share to"}),a.jsxs("div",{className:"share-btn-grid",children:[a.jsxs("button",{className:"share-btn share-native",onClick:async()=>{var a,s,e,n;const l=await S();if(!l)return;const t=`muqawamah-${null==(a=r.home_team)?void 0:a.name}-vs-${null==(s=r.away_team)?void 0:s.name}.png`,c=new File([l.blob],t,{type:"image/png"}),i=`âš½ ${null==(e=r.home_team)?void 0:e.name} ${C?r.home_score:""} - ${C?r.away_score:""} ${null==(n=r.away_team)?void 0:n.name}\nðŸ† Muqawamah 2026 â€¢ ${y()}\nðŸ“… ${b(r.match_date)}\n\nðŸ“² @muqawamah2026`;if(navigator.share&&navigator.canShare&&navigator.canShare({files:[c]}))try{return void(await navigator.share({title:"Muqawamah 2026 - Match Result",text:i,files:[c]}))}catch(o){return void o.name}if(navigator.share)try{return await navigator.share({title:"Muqawamah 2026 - Match Result",text:i}),void $()}catch(o){o.name}$(),alert("Image downloaded! You can now share it to any app.")},disabled:p,children:[a.jsx("i",{className:"fas fa-share-alt"}),a.jsx("span",{children:"Share"})]}),a.jsxs("button",{className:"share-btn copy",onClick:async()=>{const a=await S();if(a)try{await navigator.clipboard.write([new ClipboardItem({"image/png":a.blob})]),alert("Image copied to clipboard!")}catch(s){$()}},disabled:p,children:[a.jsx("i",{className:"fas fa-copy"}),a.jsx("span",{children:"Copy"})]}),a.jsxs("button",{className:"share-btn download",onClick:$,disabled:p,children:[a.jsx("i",{className:"fas fa-download"}),a.jsx("span",{children:"Download"})]})]}),p&&a.jsxs("div",{className:"generating-indicator",children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),a.jsx("span",{children:"Generating image..."})]})]})]})})}function t({team:r,stats:t,onClose:c}){var i;const o=s.useRef(null),[d,m]=s.useState(!1),h=async()=>{if(!o.current)return null;m(!0);try{const a=await e(o.current,{quality:1,pixelRatio:3,backgroundColor:"#0a0e1a"});return{dataUrl:a,blob:n(a)}}catch(a){return null}finally{m(!1)}},u=async()=>{const a=await h();if(a){const s=document.createElement("a");s.download=`team-${r.name}.png`,s.href=a.dataUrl,s.click()}};return a.jsx("div",{className:"share-modal-overlay",onClick:c,children:a.jsxs("div",{className:"share-modal-content",onClick:a=>a.stopPropagation(),children:[a.jsx("button",{className:"share-modal-close",onClick:c,children:a.jsx("i",{className:"fas fa-times"})}),a.jsx("div",{className:"shareable-card-wrapper",children:a.jsxs("div",{ref:o,className:"shareable-card team-card",children:[a.jsx("div",{className:"card-bg-effects",children:a.jsx("div",{className:"card-glow glow-team",style:{background:r.primary_color||"#4f8cff"}})}),a.jsxs("div",{className:"card-header",children:[a.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),a.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),a.jsxs("div",{className:"card-team-content",children:[a.jsx("div",{className:"card-team-logo large",children:r.crest_url?a.jsx("img",{src:r.crest_url,alt:r.name,crossOrigin:"anonymous"}):a.jsx("span",{className:"logo-placeholder",children:null==(i=r.name)?void 0:i.charAt(0)})}),a.jsx("h2",{className:"card-team-title",children:r.name}),r.captain&&a.jsxs("p",{className:"card-team-captain",children:["Captain: ",r.captain]})]}),t&&a.jsxs("div",{className:"card-team-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:t.played||0}),a.jsx("span",{className:"stat-label",children:"Played"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:t.won||0}),a.jsx("span",{className:"stat-label",children:"Won"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:t.drawn||0}),a.jsx("span",{className:"stat-label",children:"Draw"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:t.lost||0}),a.jsx("span",{className:"stat-label",children:"Lost"})]}),a.jsxs("div",{className:"stat-item highlight",children:[a.jsx("span",{className:"stat-value",children:t.points||0}),a.jsx("span",{className:"stat-label",children:"Points"})]})]}),a.jsx("div",{className:"card-footer",children:a.jsxs("span",{className:"card-instagram",children:[a.jsx(l,{size:18,color:"rgba(255,255,255,0.85)"}),"@muqawamah2026"]})})]})}),a.jsxs("div",{className:"share-buttons",children:[a.jsx("h3",{children:"Share to"}),a.jsxs("div",{className:"share-btn-grid",children:[a.jsxs("button",{className:"share-btn share-native",onClick:async()=>{const a=await h();if(!a)return;const s=`muqawamah-${r.name}.png`,e=new File([a.blob],s,{type:"image/png"}),n=`ðŸ† ${r.name}\nâš½ Muqawamah 2026\nðŸ“Š ${(null==t?void 0:t.played)||0}P | ${(null==t?void 0:t.won)||0}W | ${(null==t?void 0:t.drawn)||0}D | ${(null==t?void 0:t.lost)||0}L\nðŸŽ¯ ${(null==t?void 0:t.points)||0} Points\n\nðŸ“² @muqawamah2026`;if(navigator.share&&navigator.canShare&&navigator.canShare({files:[e]}))try{return void(await navigator.share({title:`${r.name} - Muqawamah 2026`,text:n,files:[e]}))}catch(l){return void l.name}if(navigator.share)try{return await navigator.share({title:`${r.name} - Muqawamah 2026`,text:n}),void u()}catch(l){l.name}u(),alert("Image downloaded! You can now share it to any app.")},disabled:d,children:[a.jsx("i",{className:"fas fa-share-alt"}),a.jsx("span",{children:"Share"})]}),a.jsxs("button",{className:"share-btn copy",onClick:async()=>{const a=await h();if(a)try{await navigator.clipboard.write([new ClipboardItem({"image/png":a.blob})]),alert("Image copied to clipboard!")}catch(s){u()}},disabled:d,children:[a.jsx("i",{className:"fas fa-copy"}),a.jsx("span",{children:"Copy"})]}),a.jsxs("button",{className:"share-btn download",onClick:u,disabled:d,children:[a.jsx("i",{className:"fas fa-download"}),a.jsx("span",{children:"Download"})]})]}),d&&a.jsxs("div",{className:"generating-indicator",children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),a.jsx("span",{children:"Generating image..."})]})]})]})})}function c({onClick:s,className:e=""}){return a.jsxs("button",{className:`share-trigger-btn ${e}`,onClick:s,title:"Share",children:[a.jsx("i",{className:"fas fa-share-alt"}),a.jsx("span",{children:"Share"})]})}export{r as M,c as S,t as T};
