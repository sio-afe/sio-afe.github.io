import{r as n,j as a,c as e,R as s}from"./supabaseClient-y7L7r4ir.js";import{u as t,T as r}from"./TournamentNavbar-DLqNlQUK.js";import{F as l}from"./Footer-Cjjkr2XU.js";import{g as i,a as o}from"./tournamentUtils-svDOucmL.js";import{S as d}from"./SmartImg-mv2gJrPZ.js";import{u as c}from"./useFlashMap-DAO7MYue.js";import"./supabase-client-FID_-7ME.js";function g(){const[e,s]=n.useState({}),[g,p]=n.useState(null),[h,m]=n.useState(!0),[x,f]=n.useState("groups"),u=n.useRef(new Map),{isFlashing:b,flashKeys:j}=c(900),[N]=n.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");n.useEffect(()=>{v()},[]);const w=n.useCallback(()=>{v({silent:!0})},[N]);t({enabled:!0,channelKey:`standings:${N}`,tables:["matches","teams","cards","goals"],filtersByTable:{matches:`category=eq.${N}`,teams:`category=eq.${N}`},debounceMs:800,pollIntervalMs:1e4,onUpdate:w});const v=async({silent:n=!1}={})=>{try{const a=await i(N);p(a);const e=await o(N);if(n&&e){const n=[];Object.values(e).flat().forEach(a=>{const e=`${a.points??""}|${a.goal_difference??""}|${a.goals_for??""}|${a.goals_against??""}|${a.yellow_cards??""}|${a.red_cards??""}`,s=u.current.get(a.id);s&&s!==e&&n.push(a.id),u.current.set(a.id,e)}),n.length&&j(n)}else!n&&e&&Object.values(e).flat().forEach(n=>{const a=`${n.points??""}|${n.goal_difference??""}|${n.goals_for??""}|${n.goals_against??""}|${n.yellow_cards??""}|${n.red_cards??""}`;u.current.set(n.id,a)});s(e)}catch(a){}finally{m(!1)}},y=(n,s=null,t=!1)=>a.jsxs("div",{className:"standings-table-wrapper "+(t?"group-card":""),children:[s&&"Ungrouped"!==s&&a.jsx("div",{className:"group-header",children:a.jsxs("span",{className:"group-badge",children:["Group ",s]})}),"Ungrouped"===s&&n.length>0&&a.jsx("div",{className:"group-header ungrouped",children:a.jsx("span",{className:"group-badge",children:"Ungrouped Teams"})}),a.jsxs("table",{className:"standings-table-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"col-position",children:"#"}),a.jsx("th",{className:"col-team-full",children:"TEAM"}),a.jsx("th",{className:"col-stat",children:"P"}),a.jsx("th",{className:"col-stat",children:"W"}),a.jsx("th",{className:"col-stat",children:"D"}),a.jsx("th",{className:"col-stat",children:"L"}),a.jsx("th",{className:"col-stat hide-mobile",children:"GF"}),a.jsx("th",{className:"col-stat hide-mobile",children:"GA"}),a.jsx("th",{className:"col-stat",children:"GD"}),!t&&a.jsx("th",{className:"col-stat hide-mobile",title:"Yellow Cards",children:"YC"}),!t&&a.jsx("th",{className:"col-stat hide-mobile",title:"Red Cards",children:"RC"}),a.jsx("th",{className:"col-points",children:"PTS"})]})}),a.jsx("tbody",{children:n.map((n,s)=>{var r;const l=t?n.group_position||s+1:n.position||s+1,i=(null==g?void 0:g.teams_qualifying_per_group)||2,o=Object.keys(e).filter(n=>"Ungrouped"!==n).length||1,c=t?i:o*i,p=l===c,h=l<=c;return a.jsxs("tr",{className:`standings-table-row ${p?"qualification-line":""} ${h?"qualified-row":""}`,onClick:()=>{return a=n.id,void(window.location.href=`/muqawamah/2026/${N}/teams/?team=${a}`);var a},children:[a.jsx("td",{className:"col-position",children:a.jsx("span",{className:`position-badge position-${l}`,children:l})}),a.jsx("td",{className:"col-team-full",children:a.jsxs("div",{className:"team-cell-full",title:n.name,children:[a.jsx("div",{className:"team-logo-standings",children:n.crest_url?a.jsx(d,{src:n.crest_url,preset:"crestSm",alt:n.name,loading:"lazy",decoding:"async"}):a.jsx("span",{children:(null==(r=n.name)?void 0:r.charAt(0))||"?"})}),a.jsx("span",{className:"team-name-full",children:n.name})]})}),a.jsx("td",{className:"col-stat",children:n.played||0}),a.jsx("td",{className:"col-stat stat-wins",children:n.won||0}),a.jsx("td",{className:"col-stat stat-draws",children:n.drawn||0}),a.jsx("td",{className:"col-stat stat-losses",children:n.lost||0}),a.jsx("td",{className:"col-stat hide-mobile",children:n.goals_for||0}),a.jsx("td",{className:"col-stat hide-mobile",children:n.goals_against||0}),a.jsx("td",{className:"col-stat",children:a.jsxs("span",{className:n.goal_difference>=0?"gd-positive":"gd-negative",children:[n.goal_difference>=0?"+":"",n.goal_difference||0]})}),!t&&a.jsx("td",{className:"col-stat hide-mobile",children:a.jsx("span",{className:"card-stat yellow",children:n.yellow_cards||0})}),!t&&a.jsx("td",{className:"col-stat hide-mobile",children:a.jsx("span",{className:"card-stat red",children:n.red_cards||0})}),a.jsx("td",{className:"col-points",children:a.jsx("span",{className:"points-value "+(b(n.id)?"value-flash":""),children:n.points||0})})]},n.id)})})]})]},s||"overall");if(h)return a.jsxs(a.Fragment,{children:[a.jsx(r,{}),a.jsx("div",{className:"standings-loading",children:a.jsxs("div",{className:"standings-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading standings..."})]})}),a.jsx(l,{edition:"2026"})]});const _=Object.keys(e).filter(n=>"Ungrouped"!==n).sort(),k=_.length>0,$=e.Ungrouped||[];return a.jsxs(a.Fragment,{children:[a.jsx(r,{}),a.jsx("div",{className:"standings-page",children:a.jsxs("div",{className:"standings-page-container",children:[a.jsxs("div",{className:"standings-header-v2",children:[a.jsx("h1",{className:"standings-page-title",children:"STANDINGS"}),a.jsx("hr",{className:"standings-divider"})]}),k&&a.jsx("div",{className:"standings-controls",children:a.jsxs("div",{className:"view-toggle",children:[a.jsxs("button",{className:"toggle-btn "+("groups"===x?"active":""),onClick:()=>f("groups"),children:[a.jsx("i",{className:"fas fa-th-large"})," Groups"]}),a.jsxs("button",{className:"toggle-btn "+("overall"===x?"active":""),onClick:()=>f("overall"),children:[a.jsx("i",{className:"fas fa-list"})," Overall"]})]})}),"groups"===x&&k?a.jsxs("div",{className:"groups-container",children:[_.map(n=>a.jsx("div",{className:"group-standings",children:y(e[n],n,!0)},n)),$.length>0&&a.jsx("div",{className:"group-standings",children:y($,"Ungrouped",!0)})]}):y(Object.values(e).flat().sort((n,a)=>a.points!==n.points?(a.points||0)-(n.points||0):a.goal_difference!==n.goal_difference?(a.goal_difference||0)-(n.goal_difference||0):(a.goals_for||0)!==(n.goals_for||0)?(a.goals_for||0)-(n.goals_for||0):(n.yellow_cards||0)!==(a.yellow_cards||0)?(n.yellow_cards||0)-(a.yellow_cards||0):(n.red_cards||0)-(a.red_cards||0)).map((n,a)=>({...n,position:a+1})),null,!1),!k&&0===$.length&&0===Object.keys(e).length&&a.jsxs("div",{className:"no-standings",children:[a.jsx("i",{className:"fas fa-table"}),a.jsx("p",{children:"No standings available yet"})]}),(k||Object.keys(e).length>0)&&a.jsx("div",{className:"qualification-legend",children:a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-line"}),a.jsx("span",{className:"legend-text",children:"Knockout qualification"})]})})]})}),a.jsx(l,{edition:"2026"}),a.jsx("style",{children:"\n        .standings-header-v2 {\n          margin-bottom: 40px;\n          text-align: center;\n        }\n\n        .standings-page-title {\n          background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.85) 100%);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          background-clip: text;\n          text-shadow: none;\n        }\n\n        .standings-divider {\n          border: none;\n          height: 2px;\n          background: linear-gradient(90deg, transparent, rgba(79, 140, 255, 0.5), transparent);\n          margin: 16px auto 0;\n          max-width: 200px;\n        }\n\n        .standings-controls {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 32px;\n        }\n\n        .view-toggle {\n          display: flex;\n          gap: 4px;\n          background: rgba(255, 255, 255, 0.03);\n          padding: 5px;\n          border-radius: 12px;\n          border: 1px solid rgba(255, 255, 255, 0.08);\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        }\n\n        .toggle-btn {\n          padding: 10px 20px;\n          background: transparent;\n          border: none;\n          color: rgba(255, 255, 255, 0.5);\n          cursor: pointer;\n          border-radius: 8px;\n          font-size: 13px;\n          font-weight: 500;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          transition: all 0.25s ease;\n        }\n\n        .toggle-btn:hover {\n          color: rgba(255, 255, 255, 0.85);\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .toggle-btn.active {\n          background: linear-gradient(135deg, #4f8cff 0%, #3a7bef 100%);\n          color: #fff;\n          box-shadow: 0 4px 15px rgba(79, 140, 255, 0.4);\n        }\n\n        .groups-container {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 28px;\n        }\n\n        @media (max-width: 1100px) {\n          .groups-container {\n            grid-template-columns: 1fr;\n            gap: 24px;\n          }\n        }\n\n        .group-standings {\n          animation: fadeSlideUp 0.4s ease-out backwards;\n        }\n        .group-standings:nth-child(1) { animation-delay: 0s; }\n        .group-standings:nth-child(2) { animation-delay: 0.08s; }\n        .group-standings:nth-child(3) { animation-delay: 0.16s; }\n        .group-standings:nth-child(4) { animation-delay: 0.24s; }\n\n        @keyframes fadeSlideUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .standings-table-wrapper.group-card {\n          background: linear-gradient(180deg, rgba(20, 30, 50, 0.95) 0%, rgba(15, 22, 40, 0.9) 100%);\n          border: 1px solid rgba(79, 140, 255, 0.15);\n          border-radius: 16px;\n          overflow: hidden;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.02) inset;\n          transition: transform 0.2s ease, box-shadow 0.2s ease;\n        }\n\n        .standings-table-wrapper.group-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5), 0 0 30px rgba(79, 140, 255, 0.1);\n        }\n\n        .group-header {\n          padding: 16px 20px;\n          background: linear-gradient(135deg, rgba(79, 140, 255, 0.18), rgba(79, 140, 255, 0.05));\n          border-bottom: 1px solid rgba(79, 140, 255, 0.25);\n          position: relative;\n          overflow: hidden;\n        }\n\n        .group-header::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 1px;\n          background: linear-gradient(90deg, transparent, rgba(79, 140, 255, 0.5), transparent);\n        }\n\n        .group-header.ungrouped {\n          background: linear-gradient(135deg, rgba(255, 152, 0, 0.18), rgba(255, 152, 0, 0.05));\n          border-bottom-color: rgba(255, 152, 0, 0.25);\n        }\n\n        .group-header.ungrouped::before {\n          background: linear-gradient(90deg, transparent, rgba(255, 152, 0, 0.5), transparent);\n        }\n\n        .group-badge {\n          font-family: 'Oswald', sans-serif;\n          font-size: 1.1rem;\n          font-weight: 700;\n          text-transform: uppercase;\n          color: #6fb1fc;\n          letter-spacing: 2px;\n          text-shadow: 0 0 20px rgba(79, 140, 255, 0.3);\n        }\n\n        .group-header.ungrouped .group-badge {\n          color: #ffb74d;\n          text-shadow: 0 0 20px rgba(255, 152, 0, 0.3);\n        }\n\n        .standings-table-row.qualification-line {\n          border-bottom: 2px solid #4f8cff !important;\n          position: relative;\n        }\n\n        .standings-table-row.qualification-line::after {\n          content: '';\n          position: absolute;\n          bottom: -2px;\n          left: 0;\n          right: 0;\n          height: 2px;\n          background: linear-gradient(90deg, transparent 5%, #4f8cff 30%, #6fb1fc 50%, #4f8cff 70%, transparent 95%);\n          box-shadow: 0 0 10px rgba(79, 140, 255, 0.5);\n        }\n\n        .standings-table-row.qualified-row {\n          background: linear-gradient(90deg, rgba(79, 140, 255, 0.08) 0%, transparent 100%);\n        }\n\n        .standings-table-row.qualified-row:hover {\n          background: linear-gradient(90deg, rgba(79, 140, 255, 0.12) 0%, rgba(255, 255, 255, 0.03) 100%);\n        }\n\n        .card-stat {\n          font-size: 0.85rem;\n          font-weight: 600;\n        }\n\n        .card-stat.yellow {\n          color: #ffc107;\n          text-shadow: 0 0 8px rgba(255, 193, 7, 0.3);\n        }\n\n        .card-stat.red {\n          color: #f44336;\n          text-shadow: 0 0 8px rgba(244, 67, 54, 0.3);\n        }\n\n        /* Points highlight for group view */\n        .group-card .points-value {\n          background: linear-gradient(135deg, #4f8cff, #6fb1fc);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          background-clip: text;\n          font-size: 1rem;\n        }\n\n        /* GD styling */\n        .gd-positive {\n          color: #4ade80 !important;\n        }\n\n        .gd-negative {\n          color: #f87171 !important;\n        }\n\n        /* Wins/Draws/Losses subtle colors */\n        .stat-wins {\n          color: #4ade80 !important;\n        }\n\n        .stat-losses {\n          color: #f87171 !important;\n        }\n\n        /* Qualification Legend */\n        .qualification-legend {\n          display: flex;\n          justify-content: center;\n          margin-top: 24px;\n          gap: 24px;\n        }\n\n        .legend-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n\n        .legend-line {\n          width: 30px;\n          height: 3px;\n          background: linear-gradient(90deg, #4f8cff, #6fb1fc);\n          border-radius: 2px;\n          box-shadow: 0 0 8px rgba(79, 140, 255, 0.5);\n        }\n\n        .legend-text {\n          font-size: 0.8rem;\n          color: rgba(255, 255, 255, 0.5);\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n      "})]})}e.createRoot(document.getElementById("standings-root")).render(a.jsx(s.StrictMode,{children:a.jsx(g,{})}));
