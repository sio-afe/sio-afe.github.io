import{r as a,R as s,j as e}from"./supabaseClient-y7L7r4ir.js";import{t as l,a as n}from"./index-3r6UxFjv.js";const r=a=>{let s=!1;const e=()=>{s||(s=!0,a())},l=setTimeout(e,0);let n=null;return"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(e)),()=>{clearTimeout(l),null!=n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n)}},i=new Map,c=(a,s)=>{try{const e=URL.createObjectURL(s);for(i.set(a,{blob:s,objectUrl:e,createdAt:Date.now()});i.size>40;){const a=i.keys().next().value,s=i.get(a);(null==s?void 0:s.objectUrl)&&URL.revokeObjectURL(s.objectUrl),i.delete(a)}return{blob:s,objectUrl:e}}catch{return{blob:s,objectUrl:null}}},t=(()=>{var a;try{return"undefined"!=typeof process&&"test"===(null==(a=null==process?void 0:process.env)?void 0:a.NODE_ENV)}catch{return!1}})(),o=(a,s)=>{try{return`${a}:${JSON.stringify(s)}`}catch{return`${a}:${String((null==s?void 0:s.id)||"")}`}},d=a=>{if(!a)return"TBD";return new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).toUpperCase()},m=a=>{const s=null==a?void 0:a.toLowerCase();return s&&"group"!==s?"quarter-final"===s?"QUARTER FINAL":"semi-final"===s?"SEMI FINAL":"final"===s?"FINAL":"third-place"===s?"3RD PLACE":s.toUpperCase():"GROUP STAGE"},u=a=>{var s,e,l,n;return o("match",{id:null==a?void 0:a.id,status:null==a?void 0:a.status,hs:null==a?void 0:a.home_score,as:null==a?void 0:a.away_score,ht:null==(s=null==a?void 0:a.home_team)?void 0:s.name,at:null==(e=null==a?void 0:a.away_team)?void 0:e.name,hcrest:null==(l=null==a?void 0:a.home_team)?void 0:l.crest_url,acrest:null==(n=null==a?void 0:a.away_team)?void 0:n.crest_url,date:null==a?void 0:a.match_date,type:null==a?void 0:a.match_type})},h=(a,s)=>o("team",{id:null==a?void 0:a.id,name:null==a?void 0:a.name,crest:null==a?void 0:a.crest_url,primary:null==a?void 0:a.primary_color,captain:null==a?void 0:a.captain,stats:s}),v=(a,s)=>o("stats",{statType:a,items:(s||[]).slice(0,3).map(a=>({id:null==a?void 0:a.id,name:null==a?void 0:a.name,value:null==a?void 0:a.value,image:null==a?void 0:a.image,crest_url:null==a?void 0:a.crest_url}))}),p=async({node:a,cacheKey:s,backgroundColor:e="#0a0e1a",pixelRatio:r})=>{if(!a)return null;const o=s?(a=>{const s=i.get(a);return s?(i.delete(a),i.set(a,s),s):null})(s):null;if(null==o?void 0:o.blob)return{blob:o.blob,objectUrl:o.objectUrl};await(async(a,{timeoutMs:s=(t?25:2500)}={})=>{var e;if(!a)return;const l=Array.from(a.querySelectorAll("img"));if(t)return;const n="undefined"!=typeof document&&(null==(e=document.fonts)?void 0:e.ready)?document.fonts.ready.catch(()=>{}):Promise.resolve();await Promise.race([Promise.all([n,...l.map(a=>new Promise(s=>{const e=()=>{r(),s()},l=()=>e(),n=()=>e(),r=()=>{a.removeEventListener("load",l),a.removeEventListener("error",n)};if(a.complete&&a.naturalWidth>0)return s();"function"!=typeof a.decode?(a.addEventListener("load",l),a.addEventListener("error",n)):a.decode().then(s).catch(s)}))]),new Promise(a=>setTimeout(a,s))]),await new Promise(a=>setTimeout(a,0))})(a);const d=r??(()=>{try{const a="undefined"!=typeof window&&window.devicePixelRatio||1;return Math.min(2,Math.max(1,a))}catch{return 2}})(),m=await l(a,{pixelRatio:d,backgroundColor:e,cacheBust:!0,useCORS:!0}).catch(()=>null)||null;if(m){return s?c(s,m):{blob:m,objectUrl:URL.createObjectURL(m)}}const u=await n(a,{quality:1,pixelRatio:d,backgroundColor:e,cacheBust:!0,useCORS:!0}),h=(a=>{const s=a.split(","),e=s[0].match(/:(.*?);/)[1],l=atob(s[1]);let n=l.length;const r=new Uint8Array(n);for(;n--;)r[n]=l.charCodeAt(n);return new Blob([r],{type:e})})(u);return{...s?c(s,h):{blob:h,objectUrl:null},dataUrl:u}},j=a=>{const s=null==a?void 0:a.toUpperCase();return"GK"===s?"#fbbf24":["CB","LB","RB","LWB","RWB"].includes(s)?"#60a5fa":["CM","CDM","CAM","LM","RM"].includes(s)?"#4ade80":["ST","CF","LW","RW"].includes(s)?"#f87171":"#a78bfa"},x=({size:a=18,color:s="rgba(255,255,255,0.6)"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:a,height:a,fill:s,style:{verticalAlign:"middle"},children:e.jsx("path",{d:"M17.34,5.46h0a1.2,1.2,0,1,0,1.2,1.2A1.2,1.2,0,0,0,17.34,5.46Zm4.6,2.42a7.59,7.59,0,0,0-.46-2.43,4.94,4.94,0,0,0-1.16-1.77,4.7,4.7,0,0,0-1.77-1.15,7.3,7.3,0,0,0-2.43-.47C15.06,2,14.72,2,12,2s-3.06,0-4.12.06a7.3,7.3,0,0,0-2.43.47A4.78,4.78,0,0,0,3.68,3.68,4.7,4.7,0,0,0,2.53,5.45a7.3,7.3,0,0,0-.47,2.43C2,8.94,2,9.28,2,12s0,3.06.06,4.12a7.3,7.3,0,0,0,.47,2.43,4.7,4.7,0,0,0,1.15,1.77,4.78,4.78,0,0,0,1.77,1.15,7.3,7.3,0,0,0,2.43.47C8.94,22,9.28,22,12,22s3.06,0,4.12-.06a7.3,7.3,0,0,0,2.43-.47,4.7,4.7,0,0,0,1.77-1.15,4.85,4.85,0,0,0,1.16-1.77,7.59,7.59,0,0,0,.46-2.43c0-1.06.06-1.4.06-4.12S22,8.94,21.94,7.88ZM20.14,16a5.61,5.61,0,0,1-.34,1.86,3.06,3.06,0,0,1-.75,1.15,3.19,3.19,0,0,1-1.15.75,5.61,5.61,0,0,1-1.86.34c-1,.05-1.37.06-4,.06s-3,0-4-.06A5.73,5.73,0,0,1,6.1,19.8,3.27,3.27,0,0,1,5,19.05a3,3,0,0,1-.74-1.15A5.54,5.54,0,0,1,3.86,16c0-1-.06-1.37-.06-4s0-3,.06-4A5.54,5.54,0,0,1,4.21,6.1,3,3,0,0,1,5,5,3.14,3.14,0,0,1,6.1,4.2,5.73,5.73,0,0,1,8,3.86c1,0,1.37-.06,4-.06s3,0,4,.06a5.61,5.61,0,0,1,1.86.34A3.06,3.06,0,0,1,19.05,5,3.06,3.06,0,0,1,19.8,6.1,5.61,5.61,0,0,1,20.14,8c.05,1,.06,1.37.06,4S20.19,15,20.14,16ZM12,6.87A5.13,5.13,0,1,0,17.14,12,5.12,5.12,0,0,0,12,6.87Zm0,8.46A3.33,3.33,0,1,1,15.33,12,3.33,3.33,0,0,1,12,15.33Z"})});function g({match:l,onClose:n}){var i,c,t,o,h,v,j,g;const N=a.useRef(null),[f,y]=a.useState(!0),[b,w]=a.useState(null),_="completed"===l.status,k="live"===l.status;s.useEffect(()=>r(async()=>{if(N.current)try{const a=u(l),s=await p({node:N.current,cacheKey:a});if(!(null==s?void 0:s.blob))throw new Error("Failed to generate image");w({blob:s.blob,url:s.objectUrl||null,dataUrl:s.dataUrl||null})}catch(a){}finally{y(!1)}}),[]);const C=()=>{var a,s;if(!b)return;const e=document.createElement("a");e.download=`match-${null==(a=l.home_team)?void 0:a.name}-vs-${null==(s=l.away_team)?void 0:s.name}.png`,e.href=b.url||b.dataUrl,e.click()};return e.jsx("div",{className:"share-modal-overlay",onClick:n,children:e.jsxs("div",{className:"share-modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"share-modal-close",onClick:n,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("div",{className:"shareable-card-wrapper",children:e.jsxs("div",{ref:N,className:"shareable-card match-card",children:[e.jsxs("div",{className:"card-bg-effects",children:[e.jsx("div",{className:"card-glow glow-1"}),e.jsx("div",{className:"card-glow glow-2"})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"card-match-content",children:[e.jsxs("div",{className:"card-team home",children:[e.jsx("div",{className:"card-team-logo",children:(null==(i=l.home_team)?void 0:i.crest_url)?e.jsx("img",{src:l.home_team.crest_url,alt:l.home_team.name,crossOrigin:"anonymous"}):e.jsx("span",{className:"logo-placeholder",children:null==(t=null==(c=l.home_team)?void 0:c.name)?void 0:t.charAt(0)})}),e.jsx("span",{className:"card-team-name",children:null==(o=l.home_team)?void 0:o.name})]}),e.jsx("div",{className:"card-score-horizontal",children:_||k?e.jsxs("div",{className:"score-row",children:[e.jsx("span",{className:"score-number",children:l.home_score??0}),e.jsx("span",{className:"score-divider",children:"-"}),e.jsx("span",{className:"score-number",children:l.away_score??0})]}):e.jsx("span",{className:"score-vs",children:"VS"})}),e.jsxs("div",{className:"card-team away",children:[e.jsx("div",{className:"card-team-logo",children:(null==(h=l.away_team)?void 0:h.crest_url)?e.jsx("img",{src:l.away_team.crest_url,alt:l.away_team.name,crossOrigin:"anonymous"}):e.jsx("span",{className:"logo-placeholder",children:null==(j=null==(v=l.away_team)?void 0:v.name)?void 0:j.charAt(0)})}),e.jsx("span",{className:"card-team-name",children:null==(g=l.away_team)?void 0:g.name})]})]}),e.jsxs("div",{className:"card-status-section",children:[(_||k)&&e.jsx("span",{className:`card-status ${l.status}`,children:_?"FULL TIME":"LIVE"}),e.jsx("span",{className:"card-date-inline",children:d(l.match_date)}),e.jsx("span",{className:"card-match-type-text",children:m(l.match_type)})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})}),e.jsxs("div",{className:"share-buttons",children:[e.jsx("h3",{children:"Share to"}),e.jsxs("div",{className:"share-btn-grid two-cols",children:[e.jsxs("button",{className:"share-btn share-native",onClick:async()=>{var a,s;if(!b)return;const e=`muqawamah-${(null==(a=l.home_team)?void 0:a.name)||"match"}-vs-${(null==(s=l.away_team)?void 0:s.name)||"match"}.png`,n=new File([b.blob],e,{type:"image/png"});if(navigator.share&&navigator.canShare)try{if(navigator.canShare({files:[n]}))return void(await navigator.share({files:[n]}))}catch(r){if("AbortError"===r.name)return}C()},disabled:f,children:[e.jsx("i",{className:"fas fa-share-alt"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"share-btn download",onClick:C,disabled:f,children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{children:"Download"})]})]}),f&&e.jsxs("div",{className:"generating-indicator",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Generating image..."})]})]})]})})}function N({team:l,stats:n,onClose:i}){var c;const t=a.useRef(null),[o,d]=a.useState(!0),[m,u]=a.useState(null);s.useEffect(()=>r(async()=>{if(t.current)try{const a=h(l,n),s=await p({node:t.current,cacheKey:a});if(!(null==s?void 0:s.blob))throw new Error("Failed to generate image");u({blob:s.blob,url:s.objectUrl||null,dataUrl:s.dataUrl||null})}catch(a){}finally{d(!1)}}),[]);const v=()=>{if(!m)return;const a=document.createElement("a");a.download=`team-${l.name}.png`,a.href=m.url||m.dataUrl,a.click()};return e.jsx("div",{className:"share-modal-overlay",onClick:i,children:e.jsxs("div",{className:"share-modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"share-modal-close",onClick:i,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("div",{className:"shareable-card-wrapper",children:e.jsxs("div",{ref:t,className:"shareable-card team-card",children:[e.jsx("div",{className:"card-bg-effects",children:e.jsx("div",{className:"card-glow glow-team",style:{background:l.primary_color||"#4f8cff"}})}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"card-team-content-v2",children:[e.jsx("div",{className:"team-logo-wrapper",children:l.crest_url?e.jsx("img",{src:l.crest_url,alt:l.name,crossOrigin:"anonymous",className:"team-logo-img"}):e.jsx("span",{className:"team-logo-placeholder",children:null==(c=l.name)?void 0:c.charAt(0)})}),e.jsxs("div",{className:"team-info-wrapper",children:[e.jsx("h2",{className:"team-name-large",children:l.name}),l.captain&&e.jsxs("div",{className:"team-captain-badge",children:[e.jsx("span",{className:"captain-label",children:"Captain:"}),e.jsx("span",{className:"captain-name",children:l.captain})]})]})]}),n&&e.jsxs("div",{className:"card-team-stats-v2",children:[e.jsxs("div",{className:"stat-block",children:[e.jsx("span",{className:"stat-num won",children:n.won||0}),e.jsx("span",{className:"stat-lbl",children:"W"})]}),e.jsx("div",{className:"stat-divider"}),e.jsxs("div",{className:"stat-block",children:[e.jsx("span",{className:"stat-num draw",children:n.drawn||0}),e.jsx("span",{className:"stat-lbl",children:"D"})]}),e.jsx("div",{className:"stat-divider"}),e.jsxs("div",{className:"stat-block",children:[e.jsx("span",{className:"stat-num lost",children:n.lost||0}),e.jsx("span",{className:"stat-lbl",children:"L"})]}),e.jsx("div",{className:"stat-divider"}),e.jsxs("div",{className:"stat-block points",children:[e.jsx("span",{className:"stat-num",children:n.points||0}),e.jsx("span",{className:"stat-lbl",children:"PTS"})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})}),e.jsxs("div",{className:"share-buttons",children:[e.jsx("h3",{children:"Share to"}),e.jsxs("div",{className:"share-btn-grid two-cols",children:[e.jsxs("button",{className:"share-btn share-native",onClick:async()=>{if(!m)return;const a=`muqawamah-${l.name||"team"}.png`,s=new File([m.blob],a,{type:"image/png"});if(navigator.share&&navigator.canShare)try{if(navigator.canShare({files:[s]}))return void(await navigator.share({files:[s]}))}catch(e){if("AbortError"===e.name)return}v()},disabled:o,children:[e.jsx("i",{className:"fas fa-share-alt"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"share-btn download",onClick:v,disabled:o,children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{children:"Download"})]})]}),o&&e.jsxs("div",{className:"generating-indicator",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Generating image..."})]})]})]})})}function f({player:l,team:n,onClose:i}){const c=a.useRef(null),[t,d]=a.useState(!0),[m,u]=a.useState(null);s.useEffect(()=>r(async()=>{if(c.current)try{const a=o("player",{id:null==l?void 0:l.id,name:null==l?void 0:l.name,img:null==l?void 0:l.image,pos:null==l?void 0:l.position,jersey:null==l?void 0:l.jersey_number,goals:null==l?void 0:l.goals,assists:null==l?void 0:l.assists,is_captain:null==l?void 0:l.is_captain,team:n?{id:n.id,name:n.name,crest:n.crest_url}:null}),s=await p({node:c.current,cacheKey:a});if(!(null==s?void 0:s.blob))throw new Error("Failed to generate image");u({blob:s.blob,url:s.objectUrl||null,dataUrl:s.dataUrl||null})}catch(a){}finally{d(!1)}}),[]);const h=()=>{if(!m)return;const a=document.createElement("a");a.download=`player-${l.name||"player"}.png`,a.href=m.url||m.dataUrl,a.click()};return e.jsx("div",{className:"share-modal-overlay",onClick:i,children:e.jsxs("div",{className:"share-modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"share-modal-close",onClick:i,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("div",{className:"shareable-card-wrapper",children:e.jsxs("div",{ref:c,className:"shareable-card player-card",children:[e.jsx("div",{className:"card-bg-effects",children:e.jsx("div",{className:"card-glow glow-player",style:{background:j(l.position)}})}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"card-player-content",children:[e.jsxs("div",{className:"player-photo-wrapper",children:[l.image?e.jsx("img",{src:l.image,alt:l.name,crossOrigin:"anonymous",className:"player-photo-img"}):e.jsx("div",{className:"player-photo-placeholder",children:e.jsx("i",{className:"fas fa-user"})}),l.position&&e.jsx("span",{className:"player-position-badge",style:{background:j(l.position)},children:l.position})]}),e.jsxs("div",{className:"player-info-wrapper",children:[l.jersey_number&&e.jsxs("span",{className:"player-jersey",children:["#",l.jersey_number]}),e.jsx("h2",{className:"player-name-large",children:l.name}),n&&e.jsxs("div",{className:"player-team-badge",children:[n.crest_url&&e.jsx("img",{src:n.crest_url,alt:n.name,className:"player-team-crest",crossOrigin:"anonymous"}),e.jsx("span",{className:"player-team-name",children:n.name})]})]})]}),e.jsxs("div",{className:"card-player-stats",children:[void 0!==l.goals&&e.jsxs("div",{className:"player-stat-block",children:[e.jsx("span",{className:"player-stat-num",children:l.goals||0}),e.jsx("span",{className:"player-stat-lbl",children:"Goals"})]}),void 0!==l.assists&&e.jsxs("div",{className:"player-stat-block",children:[e.jsx("span",{className:"player-stat-num",children:l.assists||0}),e.jsx("span",{className:"player-stat-lbl",children:"Assists"})]}),l.is_captain&&e.jsxs("div",{className:"player-stat-block captain",children:[e.jsx("span",{className:"player-stat-icon",children:"Â©"}),e.jsx("span",{className:"player-stat-lbl",children:"Captain"})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})}),e.jsxs("div",{className:"share-buttons",children:[e.jsx("h3",{children:"Share to"}),e.jsxs("div",{className:"share-btn-grid two-cols",children:[e.jsxs("button",{className:"share-btn share-native",onClick:async()=>{if(!m)return;const a=`muqawamah-${l.name||"player"}.png`,s=new File([m.blob],a,{type:"image/png"});if(navigator.share&&navigator.canShare)try{if(navigator.canShare({files:[s]}))return void(await navigator.share({files:[s]}))}catch(e){if("AbortError"===e.name)return}h()},disabled:t,children:[e.jsx("i",{className:"fas fa-share-alt"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"share-btn download",onClick:h,disabled:t,children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{children:"Download"})]})]}),t&&e.jsxs("div",{className:"generating-indicator",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Generating image..."})]})]})]})})}function y({player:l,team:n}){const i=a.useRef(null),[c,t]=a.useState(!1);return s.useEffect(()=>{if(c)return;if(!(null==l?void 0:l.name))return;const a=o("player",{id:null==l?void 0:l.id,name:null==l?void 0:l.name,img:null==l?void 0:l.image,pos:null==l?void 0:l.position,jersey:null==l?void 0:l.jersey_number,goals:null==l?void 0:l.goals,assists:null==l?void 0:l.assists,is_captain:null==l?void 0:l.is_captain,team:n?{id:n.id,name:n.name,crest:n.crest_url}:null});let s=!1;const e=async()=>{try{if(!i.current)return;await p({node:i.current,cacheKey:a})}catch{}finally{s||t(!0)}};let d=null;if("function"==typeof requestIdleCallback){const a=requestIdleCallback(()=>e(),{timeout:2e3});d=()=>cancelIdleCallback(a)}else d=r(()=>e());return()=>{s=!0,"function"==typeof d&&d()}},[c,null==l?void 0:l.id,null==l?void 0:l.name,null==l?void 0:l.image,null==l?void 0:l.position,null==l?void 0:l.jersey_number,null==l?void 0:l.goals,null==l?void 0:l.assists,null==l?void 0:l.is_captain,null==n?void 0:n.id,null==n?void 0:n.name,null==n?void 0:n.crest_url]),c?null:e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:-1e4,top:-1e4,width:420,pointerEvents:"none",opacity:0},children:e.jsxs("div",{ref:i,className:"shareable-card player-card",children:[e.jsx("div",{className:"card-bg-effects",children:e.jsx("div",{className:"card-glow glow-player",style:{background:j(l.position)}})}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"card-player-content",children:[e.jsxs("div",{className:"player-photo-wrapper",children:[l.image?e.jsx("img",{src:l.image,alt:l.name,crossOrigin:"anonymous",className:"player-photo-img"}):e.jsx("div",{className:"player-photo-placeholder",children:e.jsx("i",{className:"fas fa-user"})}),l.position&&e.jsx("span",{className:"player-position-badge",style:{background:j(l.position)},children:l.position})]}),e.jsxs("div",{className:"player-info-wrapper",children:[l.jersey_number&&e.jsxs("span",{className:"player-jersey",children:["#",l.jersey_number]}),e.jsx("h2",{className:"player-name-large",children:l.name}),n&&e.jsxs("div",{className:"player-team-badge",children:[n.crest_url&&e.jsx("img",{src:n.crest_url,alt:n.name,className:"player-team-crest",crossOrigin:"anonymous"}),e.jsx("span",{className:"player-team-name",children:n.name})]})]})]}),e.jsxs("div",{className:"card-player-stats",children:[void 0!==l.goals&&e.jsxs("div",{className:"player-stat-block",children:[e.jsx("span",{className:"player-stat-num",children:l.goals||0}),e.jsx("span",{className:"player-stat-lbl",children:"Goals"})]}),void 0!==l.assists&&e.jsxs("div",{className:"player-stat-block",children:[e.jsx("span",{className:"player-stat-num",children:l.assists||0}),e.jsx("span",{className:"player-stat-lbl",children:"Assists"})]}),l.is_captain&&e.jsxs("div",{className:"player-stat-block captain",children:[e.jsx("span",{className:"player-stat-icon",children:"Â©"}),e.jsx("span",{className:"player-stat-lbl",children:"Captain"})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})})}function b({match:l}){var n,i,c,t,o,h,v,j,g,N,f,y;const b=a.useRef(null),[w,_]=a.useState(!1);if(s.useEffect(()=>{if(w)return;if(!(null==l?void 0:l.id))return;const a=u(l);let s=!1;const e=async()=>{try{if(!b.current)return;await p({node:b.current,cacheKey:a})}catch{}finally{s||_(!0)}};let n=null;if("function"==typeof requestIdleCallback){const a=requestIdleCallback(()=>e(),{timeout:2e3});n=()=>cancelIdleCallback(a)}else n=r(()=>e());return()=>{s=!0,"function"==typeof n&&n()}},[w,null==l?void 0:l.id,null==l?void 0:l.status,null==l?void 0:l.home_score,null==l?void 0:l.away_score,null==(n=null==l?void 0:l.home_team)?void 0:n.name,null==(i=null==l?void 0:l.away_team)?void 0:i.name,null==(c=null==l?void 0:l.home_team)?void 0:c.crest_url,null==(t=null==l?void 0:l.away_team)?void 0:t.crest_url,null==l?void 0:l.match_date,null==l?void 0:l.match_type]),w)return null;const k="completed"===(null==l?void 0:l.status),C="live"===(null==l?void 0:l.status);return e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:-1e4,top:-1e4,width:520,pointerEvents:"none",opacity:0},children:e.jsxs("div",{ref:b,className:"shareable-card match-card",children:[e.jsxs("div",{className:"card-bg-effects",children:[e.jsx("div",{className:"card-glow glow-1"}),e.jsx("div",{className:"card-glow glow-2"})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"card-match-content",children:[e.jsxs("div",{className:"card-team home",children:[e.jsx("div",{className:"card-team-logo",children:(null==(o=null==l?void 0:l.home_team)?void 0:o.crest_url)?e.jsx("img",{src:l.home_team.crest_url,alt:l.home_team.name,crossOrigin:"anonymous"}):e.jsx("span",{className:"logo-placeholder",children:null==(v=null==(h=null==l?void 0:l.home_team)?void 0:h.name)?void 0:v.charAt(0)})}),e.jsx("span",{className:"card-team-name",children:null==(j=null==l?void 0:l.home_team)?void 0:j.name})]}),e.jsx("div",{className:"card-score-horizontal",children:k||C?e.jsxs("div",{className:"score-row",children:[e.jsx("span",{className:"score-number",children:(null==l?void 0:l.home_score)??0}),e.jsx("span",{className:"score-divider",children:"-"}),e.jsx("span",{className:"score-number",children:(null==l?void 0:l.away_score)??0})]}):e.jsx("span",{className:"score-vs",children:"VS"})}),e.jsxs("div",{className:"card-team away",children:[e.jsx("div",{className:"card-team-logo",children:(null==(g=null==l?void 0:l.away_team)?void 0:g.crest_url)?e.jsx("img",{src:l.away_team.crest_url,alt:l.away_team.name,crossOrigin:"anonymous"}):e.jsx("span",{className:"logo-placeholder",children:null==(f=null==(N=null==l?void 0:l.away_team)?void 0:N.name)?void 0:f.charAt(0)})}),e.jsx("span",{className:"card-team-name",children:null==(y=null==l?void 0:l.away_team)?void 0:y.name})]})]}),e.jsxs("div",{className:"card-status-section",children:[(k||C)&&e.jsx("span",{className:`card-status ${l.status}`,children:k?"FULL TIME":"LIVE"}),e.jsx("span",{className:"card-date-inline",children:d(null==l?void 0:l.match_date)}),e.jsx("span",{className:"card-match-type-text",children:m(null==l?void 0:l.match_type)})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})})}function w({team:l,stats:n}){var i;const c=a.useRef(null),[t,o]=a.useState(!1);return s.useEffect(()=>{if(t)return;if(!(null==l?void 0:l.id)&&!(null==l?void 0:l.name))return;const a=h(l,n);let s=!1;const e=async()=>{try{if(!c.current)return;await p({node:c.current,cacheKey:a})}catch{}finally{s||o(!0)}};let i=null;if("function"==typeof requestIdleCallback){const a=requestIdleCallback(()=>e(),{timeout:2e3});i=()=>cancelIdleCallback(a)}else i=r(()=>e());return()=>{s=!0,"function"==typeof i&&i()}},[t,null==l?void 0:l.id,null==l?void 0:l.name,null==l?void 0:l.crest_url,null==l?void 0:l.primary_color,null==l?void 0:l.captain,null==n?void 0:n.won,null==n?void 0:n.drawn,null==n?void 0:n.lost,null==n?void 0:n.points]),t?null:e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:-1e4,top:-1e4,width:520,pointerEvents:"none",opacity:0},children:e.jsxs("div",{ref:c,className:"shareable-card team-card",children:[e.jsx("div",{className:"card-bg-effects",children:e.jsx("div",{className:"card-glow glow-team",style:{background:(null==l?void 0:l.primary_color)||"#4f8cff"}})}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"card-team-content-v2",children:[e.jsx("div",{className:"team-logo-wrapper",children:(null==l?void 0:l.crest_url)?e.jsx("img",{src:l.crest_url,alt:l.name,crossOrigin:"anonymous",className:"team-logo-img"}):e.jsx("span",{className:"team-logo-placeholder",children:null==(i=null==l?void 0:l.name)?void 0:i.charAt(0)})}),e.jsxs("div",{className:"team-info-wrapper",children:[e.jsx("h2",{className:"team-name-large",children:null==l?void 0:l.name}),(null==l?void 0:l.captain)&&e.jsxs("div",{className:"team-captain-badge",children:[e.jsx("span",{className:"captain-label",children:"Captain:"}),e.jsx("span",{className:"captain-name",children:l.captain})]})]})]}),n&&e.jsxs("div",{className:"card-team-stats-v2",children:[e.jsxs("div",{className:"stat-block",children:[e.jsx("span",{className:"stat-num won",children:n.won||0}),e.jsx("span",{className:"stat-lbl",children:"W"})]}),e.jsx("div",{className:"stat-divider"}),e.jsxs("div",{className:"stat-block",children:[e.jsx("span",{className:"stat-num draw",children:n.drawn||0}),e.jsx("span",{className:"stat-lbl",children:"D"})]}),e.jsx("div",{className:"stat-divider"}),e.jsxs("div",{className:"stat-block",children:[e.jsx("span",{className:"stat-num lost",children:n.lost||0}),e.jsx("span",{className:"stat-lbl",children:"L"})]}),e.jsx("div",{className:"stat-divider"}),e.jsxs("div",{className:"stat-block points",children:[e.jsx("span",{className:"stat-num",children:n.points||0}),e.jsx("span",{className:"stat-lbl",children:"PTS"})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})})}function _({statType:l,items:n}){var i,c,t,o,d,m,u,h,j;const g=a.useRef(null),[N,f]=a.useState(!1),y=(n||[]).slice(0,3);if(s.useEffect(()=>{if(N)return;if(!l)return;if(!y||0===y.length)return;const a=v(l,n);let s=!1;const e=async()=>{try{if(!g.current)return;await p({node:g.current,cacheKey:a})}catch{}finally{s||f(!0)}};let i=null;if("function"==typeof requestIdleCallback){const a=requestIdleCallback(()=>e(),{timeout:2e3});i=()=>cancelIdleCallback(a)}else i=r(()=>e());return()=>{s=!0,"function"==typeof i&&i()}},[N,l,null==(i=null==y?void 0:y[0])?void 0:i.id,null==(c=null==y?void 0:y[0])?void 0:c.name,null==(t=null==y?void 0:y[0])?void 0:t.value,null==(o=null==y?void 0:y[1])?void 0:o.id,null==(d=null==y?void 0:y[1])?void 0:d.name,null==(m=null==y?void 0:y[1])?void 0:m.value,null==(u=null==y?void 0:y[2])?void 0:u.id,null==(h=null==y?void 0:y[2])?void 0:h.name,null==(j=null==y?void 0:y[2])?void 0:j.value]),N)return null;return e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:-1e4,top:-1e4,width:520,pointerEvents:"none",opacity:0},children:e.jsxs("div",{ref:g,className:"shareable-card stats-card",children:[e.jsxs("div",{className:"card-bg-effects",children:[e.jsx("div",{className:"card-glow glow-1"}),e.jsx("div",{className:"card-glow glow-2"})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsx("div",{className:"stats-card-header",children:e.jsxs("div",{className:"stats-card-title",children:[e.jsx("span",{className:"stats-icon",children:(()=>{switch(l){case"goals":return"âš½";case"assists":return"ðŸŽ¯";case"points":return"ðŸ†";case"wins":return"ðŸ¥‡";case"clean_sheets":return"ðŸ§¤";default:return"ðŸ“Š"}})()}),e.jsx("span",{className:"stats-title-text",children:(()=>{switch(l){case"goals":return"Top Scorers";case"assists":return"Top Assists";case"points":return"Team Standings";case"wins":return"Most Wins";case"clean_sheets":return"Clean Sheets";default:return l.charAt(0).toUpperCase()+l.slice(1)}})()})]})}),e.jsx("div",{className:"stats-top3",children:y.map((a,s)=>{var l,n;return e.jsxs("div",{className:"stats-row",children:[e.jsx("div",{className:"stats-rank",style:{color:(n=s,0===n?"#FFD700":1===n?"#C0C0C0":2===n?"#CD7F32":"#666")},children:s+1}),e.jsx("div",{className:"stats-avatar",children:(null==a?void 0:a.image)||(null==a?void 0:a.crest_url)?e.jsx("img",{src:a.image||a.crest_url,alt:a.name,crossOrigin:"anonymous"}):e.jsx("span",{className:"avatar-placeholder",children:null==(l=null==a?void 0:a.name)?void 0:l.charAt(0)})}),e.jsx("div",{className:"stats-name",children:null==a?void 0:a.name}),e.jsx("div",{className:"stats-value",children:(null==a?void 0:a.value)??0})]},(null==a?void 0:a.id)||s)})}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})})}function k({statType:l,items:n,onClose:i}){const c=a.useRef(null),[t,o]=a.useState(!0),[d,m]=a.useState(null);s.useEffect(()=>r(async()=>{if(c.current)try{const a=v(l,n),s=await p({node:c.current,cacheKey:a});if(!(null==s?void 0:s.blob))throw new Error("Failed to generate image");m({blob:s.blob,url:s.objectUrl||null,dataUrl:s.dataUrl||null})}catch(a){}finally{o(!1)}}),[]);const u=()=>{if(!d)return;const a=document.createElement("a");a.download=`muqawamah-top-${l}.png`,a.href=d.url||d.dataUrl,a.click()},h=a=>0===a?"#FFD700":1===a?"#C0C0C0":2===a?"#CD7F32":"#666",j=n.slice(0,3);return e.jsx("div",{className:"share-modal-overlay",onClick:i,children:e.jsxs("div",{className:"share-modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"share-modal-close",onClick:i,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("div",{className:"shareable-card-wrapper",children:e.jsxs("div",{ref:c,className:"shareable-card stats-card",children:[e.jsxs("div",{className:"card-bg-effects",children:[e.jsx("div",{className:"card-glow glow-1"}),e.jsx("div",{className:"card-glow glow-2"})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawamah",className:"card-tournament-logo",crossOrigin:"anonymous"}),e.jsx("img",{src:"/assets/img/sio-logo-white.png",alt:"SIO",className:"card-sio-logo",crossOrigin:"anonymous"})]}),e.jsxs("div",{className:"stats-card-title",children:[e.jsx("span",{className:"stats-icon",children:(()=>{switch(l){case"goals":return"âš½";case"assists":return"ðŸŽ¯";case"points":return"ðŸ†";case"wins":return"ðŸ¥‡";case"clean_sheets":return"ðŸ§¤";default:return"ðŸ“Š"}})()}),e.jsx("h2",{children:(()=>{switch(l){case"goals":return"Top Scorers";case"assists":return"Top Assists";case"points":return"Team Standings";case"wins":return"Most Wins";case"clean_sheets":return"Clean Sheets";default:return l.charAt(0).toUpperCase()+l.slice(1)}})()})]}),e.jsx("div",{className:"stats-leaderboard",children:j.map((a,s)=>{var l;return e.jsxs("div",{className:`stats-rank-item rank-${s+1}`,children:[e.jsx("div",{className:"rank-medal",style:{background:h(s)},children:s+1}),e.jsx("div",{className:"rank-avatar",children:a.image||a.crest_url?e.jsx("img",{src:a.image||a.crest_url,alt:a.name,crossOrigin:"anonymous"}):e.jsx("span",{className:"rank-initial",children:null==(l=a.name)?void 0:l.charAt(0)})}),e.jsxs("div",{className:"rank-info",children:[e.jsx("span",{className:"rank-name",children:a.name}),a.team_name&&e.jsx("span",{className:"rank-team",children:a.team_name})]}),e.jsx("div",{className:"rank-value",children:a.value})]},s)})}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"card-instagram",children:[e.jsx(x,{size:18,color:"rgba(255,255,255,0.85)"}),"muqawama2026"]})})]})}),e.jsxs("div",{className:"share-buttons",children:[e.jsx("h3",{children:"Share to"}),e.jsxs("div",{className:"share-btn-grid two-cols",children:[e.jsxs("button",{className:"share-btn share-native",onClick:async()=>{if(!d)return;const a=`muqawamah-top-${l}.png`,s=new File([d.blob],a,{type:"image/png"});if(navigator.share&&navigator.canShare)try{if(navigator.canShare({files:[s]}))return void(await navigator.share({files:[s]}))}catch(e){if("AbortError"===e.name)return}u()},disabled:t,children:[e.jsx("i",{className:"fas fa-share-alt"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"share-btn download",onClick:u,disabled:t,children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{children:"Download"})]})]}),t&&e.jsxs("div",{className:"generating-indicator",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Generating image..."})]})]})]})})}function C({onClick:a,className:s=""}){return e.jsxs("button",{className:`share-trigger-btn ${s}`,onClick:a,title:"Share",children:[e.jsx("i",{className:"fas fa-share-alt"}),e.jsx("span",{children:"Share"})]})}export{g as M,y as P,C as S,N as T,f as a,w as b,b as c,_ as d,k as e};
