import{r as s,j as a,c as e,R as n}from"./supabaseClient-y7L7r4ir.js";import{u as l,T as t}from"./TournamentNavbar-DLqNlQUK.js";import{F as r}from"./Footer-Cjjkr2XU.js";import{g as i,a as o}from"./tournamentUtils-svDOucmL.js";import{S as c}from"./SmartImg-mv2gJrPZ.js";import"./supabase-client-FID_-7ME.js";function d(){const[e,n]=s.useState({}),[d,g]=s.useState(null),[m,p]=s.useState(!0),[h,x]=s.useState("groups"),[u]=s.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");s.useEffect(()=>{j()},[]);const f=s.useCallback(()=>{j()},[u]);l({enabled:!0,channelKey:`standings:${u}`,tables:["matches","teams","cards","goals"],filtersByTable:{matches:`category=eq.${u}`,teams:`category=eq.${u}`},debounceMs:800,pollIntervalMs:1e4,onUpdate:f});const j=async()=>{try{const s=await i(u);g(s);const a=await o(u);n(a)}catch(s){}finally{p(!1)}},b=(s,e=null)=>a.jsxs("div",{className:"standings-table-wrapper",children:[e&&"Ungrouped"!==e&&a.jsx("div",{className:"group-header",children:a.jsxs("span",{className:"group-badge",children:["Group ",e]})}),"Ungrouped"===e&&s.length>0&&a.jsx("div",{className:"group-header ungrouped",children:a.jsx("span",{className:"group-badge",children:"Ungrouped Teams"})}),a.jsxs("table",{className:"standings-table-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"col-position",children:"#"}),a.jsx("th",{className:"col-team-full",children:"TEAM"}),a.jsx("th",{className:"col-stat",children:"P"}),a.jsx("th",{className:"col-stat",children:"W"}),a.jsx("th",{className:"col-stat",children:"D"}),a.jsx("th",{className:"col-stat",children:"L"}),a.jsx("th",{className:"col-stat hide-mobile",children:"GF"}),a.jsx("th",{className:"col-stat hide-mobile",children:"GA"}),a.jsx("th",{className:"col-stat",children:"GD"}),a.jsx("th",{className:"col-stat hide-mobile",title:"Yellow Cards",children:"YC"}),a.jsx("th",{className:"col-stat hide-mobile",title:"Red Cards",children:"RC"}),a.jsx("th",{className:"col-points",children:"PTS"})]})}),a.jsx("tbody",{children:s.map((s,e)=>{var n;const l=s.group_position||s.position||e+1,t=l===((null==d?void 0:d.teams_qualifying_per_group)||2);return a.jsxs("tr",{className:"standings-table-row "+(t?"qualification-line":""),onClick:()=>{return a=s.id,void(window.location.href=`/muqawamah/2026/${u}/teams/?team=${a}`);var a},children:[a.jsx("td",{className:"col-position",children:a.jsx("span",{className:`position-badge position-${l}`,children:l})}),a.jsx("td",{className:"col-team-full",children:a.jsxs("div",{className:"team-cell-full",children:[a.jsx("div",{className:"team-logo-standings",children:s.crest_url?a.jsx(c,{src:s.crest_url,preset:"crestSm",alt:s.name,loading:"lazy",decoding:"async"}):a.jsx("span",{children:(null==(n=s.name)?void 0:n.charAt(0))||"?"})}),a.jsx("span",{className:"team-name-full",children:s.name})]})}),a.jsx("td",{className:"col-stat",children:s.played||0}),a.jsx("td",{className:"col-stat stat-wins",children:s.won||0}),a.jsx("td",{className:"col-stat stat-draws",children:s.drawn||0}),a.jsx("td",{className:"col-stat stat-losses",children:s.lost||0}),a.jsx("td",{className:"col-stat hide-mobile",children:s.goals_for||0}),a.jsx("td",{className:"col-stat hide-mobile",children:s.goals_against||0}),a.jsx("td",{className:"col-stat",children:a.jsxs("span",{className:s.goal_difference>=0?"gd-positive":"gd-negative",children:[s.goal_difference>=0?"+":"",s.goal_difference||0]})}),a.jsx("td",{className:"col-stat hide-mobile",children:a.jsx("span",{className:"card-stat yellow",children:s.yellow_cards||0})}),a.jsx("td",{className:"col-stat hide-mobile",children:a.jsx("span",{className:"card-stat red",children:s.red_cards||0})}),a.jsx("td",{className:"col-points",children:a.jsx("span",{className:"points-value",children:s.points||0})})]},s.id)})})]})]},e||"overall");if(m)return a.jsxs(a.Fragment,{children:[a.jsx(t,{}),a.jsx("div",{className:"standings-loading",children:a.jsxs("div",{className:"standings-loading-content",children:[a.jsxs("div",{className:"logo-loader",children:[a.jsx("div",{className:"logo-ring"}),a.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawama",className:"logo-pulse"})]}),a.jsx("p",{children:"Loading standings..."})]})}),a.jsx(r,{edition:"2026"})]});const N=Object.keys(e).filter(s=>"Ungrouped"!==s).sort(),v=N.length>0,y=e.Ungrouped||[];return a.jsxs(a.Fragment,{children:[a.jsx(t,{}),a.jsx("div",{className:"standings-page",children:a.jsxs("div",{className:"standings-page-container",children:[a.jsxs("div",{className:"standings-header-v2",children:[a.jsx("h1",{className:"standings-page-title",children:"STANDINGS"}),a.jsx("hr",{className:"standings-divider"})]}),v&&a.jsx("div",{className:"standings-controls",children:a.jsxs("div",{className:"view-toggle",children:[a.jsxs("button",{className:"toggle-btn "+("groups"===h?"active":""),onClick:()=>x("groups"),children:[a.jsx("i",{className:"fas fa-th-large"})," Groups"]}),a.jsxs("button",{className:"toggle-btn "+("overall"===h?"active":""),onClick:()=>x("overall"),children:[a.jsx("i",{className:"fas fa-list"})," Overall"]})]})}),"groups"===h&&v?a.jsxs("div",{className:"groups-container",children:[N.map(s=>a.jsx("div",{className:"group-standings",children:b(e[s],s)},s)),y.length>0&&a.jsx("div",{className:"group-standings",children:b(y,"Ungrouped")})]}):b(Object.values(e).flat().sort((s,a)=>a.points!==s.points?(a.points||0)-(s.points||0):a.goal_difference!==s.goal_difference?(a.goal_difference||0)-(s.goal_difference||0):(a.goals_for||0)!==(s.goals_for||0)?(a.goals_for||0)-(s.goals_for||0):(s.yellow_cards||0)!==(a.yellow_cards||0)?(s.yellow_cards||0)-(a.yellow_cards||0):(s.red_cards||0)-(a.red_cards||0)).map((s,a)=>({...s,position:a+1}))),!v&&0===y.length&&0===Object.keys(e).length&&a.jsxs("div",{className:"no-standings",children:[a.jsx("i",{className:"fas fa-table"}),a.jsx("p",{children:"No standings available yet"})]})]})}),a.jsx(r,{edition:"2026"}),a.jsx("style",{children:"\n        .standings-header-v2 {\n          margin-bottom: 32px;\n        }\n\n        .standings-divider {\n          border: none;\n          height: 1px;\n          background: rgba(255, 255, 255, 0.1);\n          margin: 0;\n        }\n\n        .standings-controls {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n\n        .view-toggle {\n          display: flex;\n          gap: 8px;\n          background: rgba(255, 255, 255, 0.05);\n          padding: 4px;\n          border-radius: 8px;\n        }\n\n        .toggle-btn {\n          padding: 8px 16px;\n          background: transparent;\n          border: none;\n          color: rgba(255, 255, 255, 0.6);\n          cursor: pointer;\n          border-radius: 6px;\n          font-size: 13px;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          transition: all 0.2s;\n        }\n\n        .toggle-btn:hover {\n          color: #fff;\n        }\n\n        .toggle-btn.active {\n          background: #4f8cff;\n          color: #fff;\n        }\n\n        .groups-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));\n          gap: 24px;\n        }\n\n        @media (max-width: 768px) {\n          .groups-container {\n            grid-template-columns: 1fr;\n          }\n        }\n\n        .group-header {\n          padding: 12px 16px;\n          background: linear-gradient(135deg, rgba(79, 140, 255, 0.2), rgba(79, 140, 255, 0.05));\n          border-radius: 8px 8px 0 0;\n          border-bottom: 2px solid #4f8cff;\n        }\n\n        .group-header.ungrouped {\n          background: linear-gradient(135deg, rgba(255, 152, 0, 0.2), rgba(255, 152, 0, 0.05));\n          border-bottom-color: #ff9800;\n        }\n\n        .group-badge {\n          font-family: 'Oswald', sans-serif;\n          font-size: 1rem;\n          font-weight: 700;\n          text-transform: uppercase;\n          color: #4f8cff;\n          letter-spacing: 1px;\n        }\n\n        .group-header.ungrouped .group-badge {\n          color: #ff9800;\n        }\n\n        .standings-table-row.qualification-line {\n          border-bottom: 2px solid #4f8cff !important;\n        }\n\n        .card-stat {\n          font-size: 0.85rem;\n          font-weight: 500;\n        }\n\n        .card-stat.yellow {\n          color: #ffc107;\n        }\n\n        .card-stat.red {\n          color: #f44336;\n        }\n      "})]})}e.createRoot(document.getElementById("standings-root")).render(a.jsx(n.StrictMode,{children:a.jsx(d,{})}));
