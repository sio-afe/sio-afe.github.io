import{r as s,s as a,j as n,c as e,R as l}from"./supabaseClient-y7L7r4ir.js";import{T as t}from"./TournamentNavbar-EfpgZXgP.js";import{F as r}from"./Footer-Cjjkr2XU.js";import{g as i,a as o}from"./tournamentUtils-svDOucmL.js";import"./supabase-client-FID_-7ME.js";function c(){const[e,l]=s.useState({}),[c,d]=s.useState(null),[g,m]=s.useState(!0),[p,h]=s.useState("groups"),[x]=s.useState(window.location.pathname.includes("/u17/")?"u17":"open-age");s.useEffect(()=>{u();const s=a.channel("standings_changes").on("postgres_changes",{event:"*",schema:"public",table:"teams"},()=>{u()}).on("postgres_changes",{event:"*",schema:"public",table:"cards"},()=>{u()}).subscribe();return()=>{s.unsubscribe()}},[]);const u=async()=>{try{const s=await i(x);d(s);const a=await o(x);l(a)}catch(s){}finally{m(!1)}},j=(s,a=null)=>n.jsxs("div",{className:"standings-table-wrapper",children:[a&&"Ungrouped"!==a&&n.jsx("div",{className:"group-header",children:n.jsxs("span",{className:"group-badge",children:["Group ",a]})}),"Ungrouped"===a&&s.length>0&&n.jsx("div",{className:"group-header ungrouped",children:n.jsx("span",{className:"group-badge",children:"Ungrouped Teams"})}),n.jsxs("table",{className:"standings-table-full",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"col-position",children:"#"}),n.jsx("th",{className:"col-team-full",children:"TEAM"}),n.jsx("th",{className:"col-stat",children:"P"}),n.jsx("th",{className:"col-stat",children:"W"}),n.jsx("th",{className:"col-stat",children:"D"}),n.jsx("th",{className:"col-stat",children:"L"}),n.jsx("th",{className:"col-stat hide-mobile",children:"GF"}),n.jsx("th",{className:"col-stat hide-mobile",children:"GA"}),n.jsx("th",{className:"col-stat",children:"GD"}),n.jsx("th",{className:"col-stat hide-mobile",title:"Yellow Cards",children:"YC"}),n.jsx("th",{className:"col-stat hide-mobile",title:"Red Cards",children:"RC"}),n.jsx("th",{className:"col-points",children:"PTS"})]})}),n.jsx("tbody",{children:s.map((s,a)=>{var e;const l=s.group_position||s.position||a+1,t=l===((null==c?void 0:c.teams_qualifying_per_group)||2);return n.jsxs("tr",{className:"standings-table-row "+(t?"qualification-line":""),onClick:()=>{return a=s.id,void(window.location.href=`/muqawamah/2026/${x}/teams/?team=${a}`);var a},children:[n.jsx("td",{className:"col-position",children:n.jsx("span",{className:`position-badge position-${l}`,children:l})}),n.jsx("td",{className:"col-team-full",children:n.jsxs("div",{className:"team-cell-full",children:[n.jsx("div",{className:"team-logo-standings",children:s.crest_url?n.jsx("img",{src:s.crest_url,alt:s.name,loading:"lazy"}):n.jsx("span",{children:(null==(e=s.name)?void 0:e.charAt(0))||"?"})}),n.jsx("span",{className:"team-name-full",children:s.name})]})}),n.jsx("td",{className:"col-stat",children:s.played||0}),n.jsx("td",{className:"col-stat stat-wins",children:s.won||0}),n.jsx("td",{className:"col-stat stat-draws",children:s.drawn||0}),n.jsx("td",{className:"col-stat stat-losses",children:s.lost||0}),n.jsx("td",{className:"col-stat hide-mobile",children:s.goals_for||0}),n.jsx("td",{className:"col-stat hide-mobile",children:s.goals_against||0}),n.jsx("td",{className:"col-stat",children:n.jsxs("span",{className:s.goal_difference>=0?"gd-positive":"gd-negative",children:[s.goal_difference>=0?"+":"",s.goal_difference||0]})}),n.jsx("td",{className:"col-stat hide-mobile",children:n.jsx("span",{className:"card-stat yellow",children:s.yellow_cards||0})}),n.jsx("td",{className:"col-stat hide-mobile",children:n.jsx("span",{className:"card-stat red",children:s.red_cards||0})}),n.jsx("td",{className:"col-points",children:n.jsx("span",{className:"points-value",children:s.points||0})})]},s.id)})})]})]},a||"overall");if(g)return n.jsxs(n.Fragment,{children:[n.jsx(t,{}),n.jsx("div",{className:"standings-loading",children:n.jsxs("div",{className:"standings-loading-content",children:[n.jsxs("div",{className:"logo-loader",children:[n.jsx("div",{className:"logo-ring"}),n.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawama",className:"logo-pulse"})]}),n.jsx("p",{children:"Loading standings..."})]})}),n.jsx(r,{edition:"2026"})]});const f=Object.keys(e).filter(s=>"Ungrouped"!==s).sort(),b=f.length>0,N=e.Ungrouped||[];return n.jsxs(n.Fragment,{children:[n.jsx(t,{}),n.jsx("div",{className:"standings-page",children:n.jsxs("div",{className:"standings-page-container",children:[n.jsxs("div",{className:"standings-header-v2",children:[n.jsx("h1",{className:"standings-page-title",children:"STANDINGS"}),n.jsx("hr",{className:"standings-divider"})]}),b&&n.jsx("div",{className:"standings-controls",children:n.jsxs("div",{className:"view-toggle",children:[n.jsxs("button",{className:"toggle-btn "+("groups"===p?"active":""),onClick:()=>h("groups"),children:[n.jsx("i",{className:"fas fa-th-large"})," Groups"]}),n.jsxs("button",{className:"toggle-btn "+("overall"===p?"active":""),onClick:()=>h("overall"),children:[n.jsx("i",{className:"fas fa-list"})," Overall"]})]})}),"groups"===p&&b?n.jsxs("div",{className:"groups-container",children:[f.map(s=>n.jsx("div",{className:"group-standings",children:j(e[s],s)},s)),N.length>0&&n.jsx("div",{className:"group-standings",children:j(N,"Ungrouped")})]}):j(Object.values(e).flat().sort((s,a)=>a.points!==s.points?(a.points||0)-(s.points||0):a.goal_difference!==s.goal_difference?(a.goal_difference||0)-(s.goal_difference||0):(a.goals_for||0)!==(s.goals_for||0)?(a.goals_for||0)-(s.goals_for||0):(s.yellow_cards||0)!==(a.yellow_cards||0)?(s.yellow_cards||0)-(a.yellow_cards||0):(s.red_cards||0)-(a.red_cards||0)).map((s,a)=>({...s,position:a+1}))),!b&&0===N.length&&0===Object.keys(e).length&&n.jsxs("div",{className:"no-standings",children:[n.jsx("i",{className:"fas fa-table"}),n.jsx("p",{children:"No standings available yet"})]})]})}),n.jsx(r,{edition:"2026"}),n.jsx("style",{children:"\n        .standings-header-v2 {\n          margin-bottom: 32px;\n        }\n\n        .standings-divider {\n          border: none;\n          height: 1px;\n          background: rgba(255, 255, 255, 0.1);\n          margin: 0;\n        }\n\n        .standings-controls {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n\n        .view-toggle {\n          display: flex;\n          gap: 8px;\n          background: rgba(255, 255, 255, 0.05);\n          padding: 4px;\n          border-radius: 8px;\n        }\n\n        .toggle-btn {\n          padding: 8px 16px;\n          background: transparent;\n          border: none;\n          color: rgba(255, 255, 255, 0.6);\n          cursor: pointer;\n          border-radius: 6px;\n          font-size: 13px;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          transition: all 0.2s;\n        }\n\n        .toggle-btn:hover {\n          color: #fff;\n        }\n\n        .toggle-btn.active {\n          background: #4f8cff;\n          color: #fff;\n        }\n\n        .groups-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));\n          gap: 24px;\n        }\n\n        @media (max-width: 768px) {\n          .groups-container {\n            grid-template-columns: 1fr;\n          }\n        }\n\n        .group-header {\n          padding: 12px 16px;\n          background: linear-gradient(135deg, rgba(79, 140, 255, 0.2), rgba(79, 140, 255, 0.05));\n          border-radius: 8px 8px 0 0;\n          border-bottom: 2px solid #4f8cff;\n        }\n\n        .group-header.ungrouped {\n          background: linear-gradient(135deg, rgba(255, 152, 0, 0.2), rgba(255, 152, 0, 0.05));\n          border-bottom-color: #ff9800;\n        }\n\n        .group-badge {\n          font-family: 'Oswald', sans-serif;\n          font-size: 1rem;\n          font-weight: 700;\n          text-transform: uppercase;\n          color: #4f8cff;\n          letter-spacing: 1px;\n        }\n\n        .group-header.ungrouped .group-badge {\n          color: #ff9800;\n        }\n\n        .standings-table-row.qualification-line {\n          border-bottom: 2px solid #4f8cff !important;\n        }\n\n        .card-stat {\n          font-size: 0.85rem;\n          font-weight: 500;\n        }\n\n        .card-stat.yellow {\n          color: #ffc107;\n        }\n\n        .card-stat.red {\n          color: #f44336;\n        }\n      "})]})}e.createRoot(document.getElementById("standings-root")).render(n.jsx(l.StrictMode,{children:n.jsx(c,{})}));
