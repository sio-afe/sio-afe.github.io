import{r as e,j as a,s}from"./supabaseClient-y7L7r4ir.js";function n(){const[s,n]=e.useState(""),[t,l]=e.useState("open-age"),[i,r]=e.useState(!1);e.useEffect(()=>{const e=window.location.pathname;e.includes("/u17/")?l("u17"):l("open-age"),e.includes("/fixtures")?n("fixtures"):e.includes("/standings")?n("table"):e.includes("/statistics")?n("statistics"):e.includes("/teams")?n("teams"):e.includes("/players")&&n("players")},[]),e.useEffect(()=>(document.body.style.overflow=i?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[i]);const c=[{name:"MATCHES",href:`/muqawamah/2026/${t}/fixtures/`,key:"fixtures"},{name:"TABLE",href:`/muqawamah/2026/${t}/standings/`,key:"table"},{name:"STATISTICS",href:`/muqawamah/2026/${t}/statistics/`,key:"statistics"},{name:"TEAMS",href:`/muqawamah/2026/${t}/teams/`,key:"teams"},{name:"PLAYERS",href:`/muqawamah/2026/${t}/players/`,key:"players"}];return a.jsxs(a.Fragment,{children:[a.jsx("nav",{className:"tournament-navbar",children:a.jsxs("div",{className:"tournament-navbar-container",children:[a.jsx("a",{href:"/muqawamah/2026/",className:"tournament-navbar-logo desktop-only",children:a.jsx("img",{src:"/assets/img/muq_invert.png",alt:"Muqawama"})}),a.jsx("div",{className:"tournament-navbar-links desktop-only",children:c.map(e=>a.jsx("a",{href:e.href,className:"tournament-nav-link "+(s===e.key?"active":""),children:e.name},e.key))}),a.jsx("button",{className:"navbar-back-button mobile-only",onClick:()=>{window.history.back()},"aria-label":"Go back",children:a.jsx("i",{className:"fas fa-arrow-left"})}),a.jsx("a",{href:"/muqawamah/2026/",className:"tournament-navbar-center-logo mobile-only",children:a.jsx("img",{src:"/assets/img/title_invert.png",alt:"Muqawama Tournament"})}),a.jsxs("button",{className:"mobile-menu-toggle",onClick:()=>r(!i),"aria-label":"Toggle menu",children:[a.jsx("span",{className:"hamburger-line "+(i?"open":"")}),a.jsx("span",{className:"hamburger-line "+(i?"open":"")}),a.jsx("span",{className:"hamburger-line "+(i?"open":"")})]})]})}),a.jsxs("div",{className:"mobile-sidebar "+(i?"open":""),children:[a.jsxs("div",{className:"mobile-sidebar-header",children:[a.jsx("a",{href:"/muqawamah/2026/",className:"mobile-sidebar-logo",children:a.jsx("img",{src:"/assets/img/title_invert.png",alt:"Muqawama Tournament"})}),a.jsx("button",{className:"mobile-close-btn",onClick:()=>r(!1),"aria-label":"Close menu",children:a.jsx("i",{className:"fas fa-times"})})]}),a.jsx("div",{className:"mobile-sidebar-content",children:a.jsx("div",{className:"mobile-sidebar-links",children:c.map(e=>a.jsx("a",{href:e.href,className:"mobile-nav-link "+(s===e.key?"active":""),onClick:()=>r(!1),children:e.name},e.key))})})]}),i&&a.jsx("div",{className:"mobile-menu-overlay",onClick:()=>r(!1)})]})}const t=["matches","teams","players","goals","cards","match_likes","match_predictions"];function l({enabled:a=!0,channelKey:n,tables:l=t,filtersByTable:i={},schema:r="public",debounceMs:c=600,pollIntervalMs:o=1e4,pollWhenHidden:m=!1,onUpdate:u}){const d=e.useRef(u);d.current=u;const h=e.useMemo(()=>{const e=Array.isArray(l)?l:t;return Array.from(new Set(e)).sort()},[l]),b=e.useMemo(()=>{const e={};return Object.entries(i||{}).forEach(([a,s])=>{s&&(e[a]=String(s))}),e},[i]);e.useEffect(()=>{if(!a)return;if("function"!=typeof d.current)return;if(!h.length)return;let e=!1,t=null;const l=()=>{e||(t&&clearTimeout(t),t=setTimeout(()=>{var a;if(!e)try{null==(a=d.current)||a.call(d)}catch{}},c))},i=n||`tournament-live:${r}:${h.join(",")}:${Object.entries(b).map(([e,a])=>`${e}=${a}`).join("|")||"nofilter"}`,u=s.channel(i);h.forEach(e=>{const a=b[e],s={event:"*",schema:r,table:e};a&&(s.filter=a),u.on("postgres_changes",s,l)});const f=u.subscribe();let v=null;o&&o>0&&(v=setInterval(()=>{e||(m||"undefined"==typeof document||"hidden"!==document.visibilityState)&&l()},o));const y=()=>{e||"undefined"!=typeof document&&"visible"===document.visibilityState&&l()};return"undefined"!=typeof document&&document.addEventListener("visibilitychange",y),()=>{var a,n,l;e=!0,t&&clearTimeout(t),v&&clearInterval(v),"undefined"!=typeof document&&document.removeEventListener("visibilitychange",y);try{null==(a=null==f?void 0:f.unsubscribe)||a.call(f)}catch{}try{null==(l=(n=s).removeChannel)||l.call(n,u)}catch{}}},[a,n,r,c,o,m,h,b])}export{n as T,l as u};
